(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[10],{897:function(t,e,a){t.exports=a.p+"static/media/carGeo.e6f14e2e.svg"},915:function(t,e,a){"use strict";a.r(e);var n={};a.r(n),a.d(n,"geoArticlesGet",(function(){return m}));var o=a(6),i=a(7),r=a(9),c=a(8),s=a(0),l=a.n(s),p=a(32),u=a(2),d=(a(12),a(17)),m=function(t){return function(e){return new Promise((function(a,n){fetch("".concat(d.a.urlApi,"/api/article/getGeoArticles"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(t){return t.json()})).then((function(t){var n=t.articles;n&&e({type:u.zb,payload:{articles:n}}),a()}))}))}},h=a(39),f=a(59),g=a(37),v=a(112),b=a(110),C=a(897),y=a.n(C),E=function(t){Object(r.a)(a,t);var e=Object(c.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).state={articleId:!1},t}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.props.articles.isGetted||this.props.GeoActions.geoArticlesGet(this.props.user.apiToken).then((function(){t.props.articles.articles.length&&t.setState({articleId:t.props.articles.articles[0]._id})}))}},{key:"componentDidUpdate",value:function(t){this.props.articles.articles.length>0&&0===t.articles.articles.length&&this.setState({articleId:this.props.articles.articles[0]._id})}},{key:"render",value:function(){var t=this,e=this.props.articles.articles.find((function(e){return e._id===t.state.articleId}));return l.a.createElement("div",{className:"standart-page"},l.a.createElement("div",{className:"container-fluid"},l.a.createElement("h2",{className:"title mb-0"},"\u041e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u043d\u0438\u0435"),l.a.createElement(f.a,{isLoading:this.props.articles.isFetching}),l.a.createElement(g.CSSTransitionGroup,{transitionName:"height-animation-item",transitionEnterTimeout:500,transitionLeaveTimeout:1,style:{display:"contents"}},!this.props.articles.isFetching&&l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{options:this.props.articles.articles.map((function(t){return{value:t._id,label:("order"===t.type?"\u0417\u0430\u043a\u0430\u0437":"\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0435")+" \u2116"+t.articleId}})),onChange:function(e){t.setState({articleId:e.value})},value:e&&{value:e._id,label:("order"===e.type?"\u0417\u0430\u043a\u0430\u0437":"\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0435")+" \u2116"+e.articleId}}),!e&&!!this.props.articles.articles.length&&l.a.createElement("div",{className:"text-center mt-4"},"\u041e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u043d\u0438\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u043d\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e"),!e&&!this.props.articles.articles.length&&l.a.createElement("div",{className:"text-center mt-4"},"\u0417\u0430\u043a\u0430\u0437\u043e\u0432/\u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0439 \u0432 \u043f\u0443\u0442\u0438 \u043f\u043e\u043a\u0430 \u043d\u0435\u0442"),e&&l.a.createElement(b.a,{instanceRef:function(e){t.mapFrom=e},defaultState:{center:e.lastCarrierLocation&&e.lastCarrierLocation.coordinates.length?e.lastCarrierLocation.coordinates:e.fromLocation.coordinates,zoom:15},style:{marginTop:"21px",height:"500px",width:"100%"},modules:["geoObject.addon.balloon","geoObject.addon.hint"]},l.a.createElement(b.b,{options:{iconColor:"#F5D210"},properties:{hintContent:e.from.value,iconCaption:"\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u0430\u044f \u0442\u043e\u0447\u043a\u0430",balloonContentHeader:"\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u0430\u044f \u0442\u043e\u0447\u043a\u0430",balloonContentBody:e.from.value},"\u044f":!0,geometry:e.fromLocation.coordinates}),e.lastCarrierLocation&&e.lastCarrierLocation.coordinates.length&&l.a.createElement(b.b,{options:{iconLayout:"default#image",iconImageHref:y.a},date:!0,properties:{iconCaption:"\u0420\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u0432\u043e\u0437\u0447\u0438\u043a\u0430",hintContent:new Date(e.lastCarrierLocation.date).toDateR()+" "+new Date(e.lastCarrierLocation.date).toHM()},geometry:e.lastCarrierLocation.coordinates}),l.a.createElement(b.b,{options:{iconColor:"#D36161"},properties:{iconCaption:"\u041a\u043e\u043d\u0435\u0447\u043d\u0430\u044f \u0442\u043e\u0447\u043a\u0430",hintContent:e.to.value,balloonContentHeader:"\u041a\u043e\u043d\u0435\u0447\u043d\u0430\u044f \u0442\u043e\u0447\u043a\u0430",balloonContentBody:e.to.value},geometry:e.toLocation.coordinates}))))))}}]),a}(l.a.Component);e.default=Object(p.b)((function(t){return{user:t.user,articles:t.geoarticles}}),(function(t){return{GeoActions:Object(h.b)(n,t)}}))(E)}}]);
//# sourceMappingURL=10.9b2d1f0a.chunk.js.map