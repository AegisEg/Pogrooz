(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[7],{878:function(e,t,a){"use strict";var n=a(6),i=a(7),r=a(9),o=a(8),c=a(0),s=a.n(c),l=function(e){Object(r.a)(a,e);var t=Object(o.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"CheckBoxSwitcher ".concat(this.props.className," ").concat(this.props.val?"checked":""),onClick:this.props.onChange?this.props.onChange:function(){}}),this.props.lable&&s.a.createElement("label",{className:this.props.lableClassname,onClick:this.props.onChange?this.props.onChange:function(){}},this.props.lable))}}]),a}(s.a.Component);t.a=l},883:function(e,t,a){"use strict";var n=a(6),i=a(7),r=a(9),o=a(8),c=a(0),s=a.n(c),l=a(112),p=a(17),m=function(e){Object(r.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).loadOptions=function(t,a){setTimeout((function(){fetch("".concat(p.a.urlApi,"/api/car/getLikeCars"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e.props.apiToken)},body:JSON.stringify({stringLikes:t})}).then((function(e){return e.json()})).then((function(e){a(e.cars.map((function(e){return{value:e.name,label:e.name}})))}))}),1e3)},e.handleBlur=function(t){e.props.value||t.preventDefault()},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement(l.a,{async:!0,className:"carSelect",placeholder:"\u041c\u0430\u0440\u043a\u0430, \u043c\u043e\u0434\u0435\u043b\u044c",loadOptions:this.loadOptions,value:!!this.props.value&&{value:this.props.value,label:this.props.value},onChange:this.props.onChange,inputValue:this.props.value,onBlur:this.handleBlur,onInputChange:function(t,a){"input-change"===a.action&&e.props.onChange({value:t,label:t})}})}}]),a}(s.a.Component);t.a=m},901:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a(6),r=a(7),o=a(9),c=a(8),s=a(0),l=a.n(s),p=a(18),m=a(85),d=a(59),u=a(19),h=a(112),f=a(82),g=a(53),y=a(878),v=a(883),E=a(119),C=a(37),b=a(26),N=a(32),O=a(100),I=a(118),T=a(17),k=a(93),P=function(e){Object(o.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={isExtra:!1,isContract:!1,isPayment:!1,notFound:!1,isEditing:!1,car:{},isFetching:!0,isFetchingAction:!1},e.editTemplate=function(){var t=e.getArticlesInfo();if(t){var a=new FormData;a.append("car",JSON.stringify(t)),a.append("templateId",e.editingId),t.photo.file&&a.append("carPhoto",t.photo.file),e.setState({isFetchingAction:!0},(function(){fetch("".concat(T.a.urlApi,"/api/car/updateCarTemplate"),{method:"post",headers:{Authorization:"Bearer ".concat(e.props.user.apiToken)},body:a}).then((function(e){return e.json()})).then((function(t){t.error?t.errors.map((function(e){b.b.error(e.msg,{position:b.b.POSITION.TOP_CENTER})})):e.props.history.push("/mytemplate-auto")}))}))}},e.saveTemplate=function(){var t=e.getArticlesInfo();if(t){var a=new FormData;a.append("car",JSON.stringify(t)),a.append("carPhoto",t.photo.file),fetch("".concat(T.a.urlApi,"/api/car/createCarTemplate"),{method:"post",headers:{Authorization:"Bearer ".concat(e.props.user.apiToken)},body:a}).then((function(e){return e.json()})).then((function(t){t.error?t.errors.map((function(e){b.b.error(e.msg,{position:b.b.POSITION.TOP_CENTER})})):e.props.history.push("/mytemplate-auto")}))}},e.getArticlesInfo=function(){var t=!1;return e.state.car.typesCar&&e.state.car.typesCar.length||(b.b.error("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u043c\u0430\u0448\u0438\u043d\u044b",{position:b.b.POSITION.TOP_CENTER}),t=!0),e.state.car.name||(b.b.error("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043c\u0430\u0440\u043a\u0443 \u0438 \u043c\u043e\u0434\u0435\u043b\u044c \u043c\u0430\u0448\u0438\u043d\u044b",{position:b.b.POSITION.TOP_CENTER}),t=!0),e.state.car.photo||(b.b.error("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0424\u043e\u0442\u043e \u043c\u0430\u0448\u0438\u043d\u044b",{position:b.b.POSITION.TOP_CENTER}),t=!0),e.state.car.contractInfo.find((function(e){return(2===e.id||3===e.id)&&!e.org}))&&(b.b.error("\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044e",{position:b.b.POSITION.TOP_CENTER}),t=!0),!t&&e.state.car},e.onChange=function(t,a){var i=e.state.car;switch(a){case"carType":i=Object(n.a)(Object(n.a)({},i),{},{typesCar:[t],info:[]});break;case"carProperty":i=Object(n.a)(Object(n.a)({},i),{},{property:t});break;case"carName":i=Object(n.a)(Object(n.a)({},i),{},{name:t});break;case"carPhoto":i=Object(n.a)(Object(n.a)({},i),{},{photo:t})}e.setState({car:i})},e.onChangeParams=function(t,a){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Object(n.a)({},e.state.car);i?(r[t]={id:a},e.setState({car:r})):(r[t].find((function(e){return e.id===a}))?r[t]=r[t].filter((function(e,t){return e.id!==a})):r[t].push({id:a}),e.setState({car:r}))},e.onChangeParamsFiels=function(t,a,i,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=Object(n.a)({},e.state.car);o?c[t][i]=r:c[t].find((function(e){return e.id===a}))&&(c[t]=c[t].map((function(e){return e.id===a?(e[i]=r,e):e}))),e.setState({car:c})},e.onChangeCarData=function(t,a,i){var r=e.state.car.info;r.find((function(e){return e.carId===t}))?r=r.map((function(e){return e.carId===t?(e[a]=i,e):e})):(r.push({carId:t}),r[r.length-1][a]=i),e.setState({car:Object(n.a)(Object(n.a)({},e.state.car),{},{info:r})})},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.match.params.id?fetch("".concat(T.a.urlApi,"/api/car/getCarTemplate"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.props.user.apiToken)},body:JSON.stringify({templateId:this.props.match.params.id})}).then((function(e){return e.json()})).then((function(t){t.error?e.setState({notFound:!0,isFetching:!1}):t.Template&&(e.editingId=t.Template._id,e.defaultInitializate(t.Template.car,(function(){e.setState({isFetching:!1,isEditing:!0},(function(){Object(E.a)("\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u0430 \u2116"+t.Template.car.name)}))})))})):this.defaultInitializate({},(function(){e.setState({isFetching:!1})}))}},{key:"defaultInitializate",value:function(e,t){var a={};e=Object(n.a)({additionally:[],contractInfo:[],info:[],property:"",paymentInfo:[]},e),a=Object(n.a)(Object(n.a)({},a),{},{isExtra:!!e.additionally.length,isContract:!!e.contractInfo&&e.contractInfo.length,isPayment:!!e.paymentInfo.length}),this.setState(Object(n.a)({car:e},a),t)}},{key:"getIfExit",value:function(e,t,a){var n;return(n=e.find((function(e){return e.id==t})))&&n[a]?n[a]:""}},{key:"render",value:function(){var e=this,t=!(!this.state.car.typesCar||!this.state.car.typesCar.length)&&I.a.find((function(t){return e.state.car.typesCar[0]===t.id})),a={};return this.state.car.info&&(a=this.state.car.info.find((function(e){return e.carId===t.id}))||{}),l.a.createElement("div",{className:"create-page create-order-page"},l.a.createElement(m.a,{isLoading:this.state.isFetchingAction}),l.a.createElement(d.a,{isLoading:this.state.isFetching}),!this.state.isFetching&&!this.state.notFound&&l.a.createElement("div",{className:"container-fluid"},l.a.createElement("h2",{className:"title"},this.props.title),l.a.createElement("div",{className:"step-create ".concat(this.props.className)},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"mt-3 col-12 col-md-8 mx-0 px-0 row carInfo"},l.a.createElement("h4",{className:"f-16 col-12 mb-1",style:{fontWeight:"normal"}},"\u0422\u0438\u043f \u0430\u0432\u0442\u043e"),l.a.createElement("div",{className:"mt-3 carType"},l.a.createElement(h.a,{placeholder:"\u0422\u0438\u043f  \u043c\u0430\u0448\u0438\u043d\u044b",options:I.a.map((function(e){return{value:e.id,label:e.name}})),value:t?{value:t.id,label:t.name}:null,onChange:function(t){e.onChange(t.value,"carType")}})),l.a.createElement("div",{className:"carName mt-3"},l.a.createElement(v.a,{value:this.state.car.name,apiToken:this.props.user.apiToken,onChange:function(t){e.onChange(t.value,"carName")}})),t&&l.a.createElement("div",{className:"carMoreInfo carInfo row w-100"},1!==t.id&&l.a.createElement("div",{className:"carType"},l.a.createElement("div",{className:"f-14 mb-2"},"\u0413\u0440\u0443\u0437\u043e\u043f\u043e\u0434\u044a\u0435\u043c\u043d\u043e\u0441\u0442\u044c \u0432 \u0442\u043e\u043d\u043d\u0430\u0445"),l.a.createElement(u.a,{type:"number",min:"0",placeholder:"\u0413\u0440\u0443\u0437\u043e\u043f\u043e\u0434\u044c\u0435\u043c\u043d\u043e\u0441\u0442\u044c",value:a.capacity||"",onChange:function(a){e.onChangeCarData(t.id,"capacity",a.target.value)}})),12===t.id&&l.a.createElement("div",{className:"moreInfoCheckBox"},l.a.createElement("div",{className:"f-14 mb-2"},"\u0422\u0435\u043d\u0442\u043e\u0432\u044b\u0439"),l.a.createElement("div",{style:{display:"inline-block"}},l.a.createElement(f.a,{id:"awning1",name:"awning",value:"\u0416\u0435\u0441\u0442\u043a\u0438\u0439 \u0431\u043e\u0440\u0442"===a.awning||"",onChange:function(){e.onChangeCarData(t.id,"awning","\u0416\u0435\u0441\u0442\u043a\u0438\u0439 \u0431\u043e\u0440\u0442")},text:"\u0416\u0435\u0441\u0442\u043a\u0438\u0439 \u0431\u043e\u0440\u0442"})),l.a.createElement("div",{style:{display:"inline-block"}},l.a.createElement(f.a,{id:"awning2",name:"awning",value:"\u0421\u044a\u0435\u043c\u043d\u0430\u044f \u0432\u0435\u0440\u0445\u043d\u044f\u044f \u0431\u0430\u043b\u043a\u0430"===a.awning||"",onChange:function(){e.onChangeCarData(t.id,"awning","\u0421\u044a\u0435\u043c\u043d\u0430\u044f \u0432\u0435\u0440\u0445\u043d\u044f\u044f \u0431\u0430\u043b\u043a\u0430")},text:"\u0421\u044a\u0435\u043c\u043d\u0430\u044f \u0432\u0435\u0440\u0445\u043d\u044f\u044f \u0431\u0430\u043b\u043a\u0430"})),l.a.createElement("div",{style:{display:"inline-block"}},l.a.createElement(f.a,{id:"awning3",name:"awning",value:a&&"\u0421\u044a\u0435\u043c\u043d\u0430\u044f \u0431\u043e\u043a\u043e\u0432\u0430\u044f \u0441\u0442\u043e\u0439\u043a\u0430"===a.awning||"",onChange:function(){e.onChangeCarData(t.id,"awning","\u0421\u044a\u0435\u043c\u043d\u0430\u044f \u0431\u043e\u043a\u043e\u0432\u0430\u044f \u0441\u0442\u043e\u0439\u043a\u0430")},text:"\u0421\u044a\u0435\u043c\u043d\u0430\u044f \u0431\u043e\u043a\u043e\u0432\u0430\u044f \u0441\u0442\u043e\u0439\u043a\u0430"}))),9===t.id&&l.a.createElement("div",{className:"moreInfoCheckBox"},l.a.createElement("div",{className:"f-14 mb-2"},"\u0422\u0438\u043f"),l.a.createElement("div",{style:{display:"inline-block"}},l.a.createElement(f.a,{id:"typeGazel1",name:"typeGazel",value:"\u0426\u0435\u043b\u044c\u043d\u043e\u043c\u0435\u0442\u0430\u043b\u043b\u0438\u0447\u0435\u0441\u043a\u0430\u044f"===a.typeGazel||"",onChange:function(){e.onChangeCarData(t.id,"typeGazel","\u0426\u0435\u043b\u044c\u043d\u043e\u043c\u0435\u0442\u0430\u043b\u043b\u0438\u0447\u0435\u0441\u043a\u0430\u044f")},text:"\u0426\u0435\u043b\u044c\u043d\u043e\u043c\u0435\u0442\u0430\u043b\u043b\u0438\u0447\u0435\u0441\u043a\u0430\u044f"})),l.a.createElement("div",{style:{display:"inline-block"}},l.a.createElement(f.a,{id:"typeGazel2",name:"typeGazel",value:"\u0421 \u0442\u0435\u043d\u0442\u043e\u043c"===a.typeGazel||"",onChange:function(){e.onChangeCarData(t.id,"typeGazel","\u0421 \u0442\u0435\u043d\u0442\u043e\u043c")},text:"\u0421 \u0442\u0435\u043d\u0442\u043e\u043c"}))),l.a.createElement("div",{className:"moreInfoCheckBox"},l.a.createElement("div",{className:"f-14"},"\u0421\u0432\u043e\u0439\u0441\u0442\u0432\u043e:"),l.a.createElement("div",{style:{display:"inline-block"}},l.a.createElement(f.a,{id:"property1",name:"property",value:this.state.car&&"\u041c\u0430\u043d\u0438\u043f\u0443\u043b\u044f\u0442\u043e\u0440"===this.state.car.property||"",onChange:function(){e.onChange("\u041c\u0430\u043d\u0438\u043f\u0443\u043b\u044f\u0442\u043e\u0440","carProperty")},text:"\u041c\u0430\u043d\u0438\u043f\u0443\u043b\u044f\u0442\u043e\u0440"})),l.a.createElement("div",{style:{display:"inline-block"}},l.a.createElement(f.a,{id:"property2",name:"property",value:this.state.car&&"\u0420\u0435\u0444\u0440\u0438\u0436\u0435\u0440\u0430\u0442\u043e\u0440"===this.state.car.property||"",onChange:function(){e.onChange("\u0420\u0435\u0444\u0440\u0438\u0436\u0435\u0440\u0430\u0442\u043e\u0440","carProperty")},text:"\u0420\u0435\u0444\u0440\u0438\u0436\u0435\u0440\u0430\u0442\u043e\u0440"})),l.a.createElement("div",{style:{display:"inline-block"}},l.a.createElement(f.a,{id:"property3",name:"property",value:this.state.car&&"\u0418\u0437\u043e\u0442\u0435\u0440\u043c"===this.state.car.property||"",onChange:function(){e.onChange("\u0418\u0437\u043e\u0442\u0435\u0440\u043c","carProperty")},text:"\u0418\u0437\u043e\u0442\u0435\u0440\u043c"}))))),l.a.createElement("div",{className:"mt-3 col-12 col-md-4 row addPhotoCarBlock"},l.a.createElement("h4",{className:"f-16 col-12 text-center",style:{marginBottom:"20px",fontWeight:"normal"}},"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0444\u043e\u0442\u043e \u043c\u0430\u0448\u0438\u043d\u044b"),l.a.createElement("input",{id:"photoCar",onChange:function(t){var a=t.target.files[0];a.size/1e3>1e4?b.b.error("\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 10 \u043c\u0431!",{position:b.b.POSITION.TOP_CENTER}):e.onChange({file:a,path:URL.createObjectURL(a)},"carPhoto")},type:"file",accept:"image/jpeg,image/png",hidden:!0}),l.a.createElement("div",{className:"inputPhoto ".concat(this.state.car.photo?"":"unload"," ")},l.a.createElement("div",{className:"placeholder",onClick:function(){document.getElementById("photoCar").click()}},l.a.createElement("span",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c")),this.state.car.photo&&l.a.createElement("img",{src:!!this.state.car.photo&&this.state.car.photo.path,className:"carPhoto",alt:"carPhoto"}),!this.state.car.photo&&l.a.createElement("div",{className:"carPhoto"})))),l.a.createElement("div",{className:"row swicher-wrapper"},l.a.createElement("div",{className:"col-sm-6 col-md-4"},l.a.createElement("div",{className:"CheckBoxSwitcher-wrapper"},l.a.createElement(y.a,{lableClassname:"f-16",val:this.state.isExtra,onChange:function(){e.setState({isExtra:!e.state.isExtra})},lable:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b"})),l.a.createElement(C.CSSTransitionGroup,{transitionName:"height-animation-item",transitionEnterTimeout:300,transitionLeaveTimeout:300,style:{display:"contents"}},this.state.isExtra&&l.a.createElement("div",{className:"checkboxGroup"},O.b.map((function(t,a){return l.a.createElement("div",{key:a,className:"checkboxParam"},l.a.createElement(f.a,{id:"additionally".concat(t.id),name:"additionally".concat(t.id),value:e.state.car.additionally.find((function(e){return e.id==t.id})),onChange:function(){e.onChangeParams("additionally",t.id)},text:t.name}),t.additionFields&&e.state.car.additionally.find((function(e){return e.id===t.id}))&&t.additionFields.map((function(a,n){return l.a.createElement(a.field,Object.assign({key:n},a.props,{value:e.getIfExit(e.state.car.additionally,t.id,a.name),onChange:function(n){e.onChangeParamsFiels("additionally",t.id,a.name,n.target.value)}}))})))}))))),l.a.createElement("div",{className:"col-sm-6 col-md-4"},l.a.createElement("div",{className:"CheckBoxSwitcher-wrapper"},l.a.createElement(y.a,{val:this.state.isContract,onChange:function(){e.setState({isContract:!e.state.isContract})},lable:"\u0417\u0430\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})),l.a.createElement(C.CSSTransitionGroup,{transitionName:"height-animation-item",transitionEnterTimeout:300,transitionLeaveTimeout:300,style:{display:"contents"}},this.state.isContract&&l.a.createElement("div",{className:"checkboxGroup contract"},O.a.map((function(t,a){return l.a.createElement("div",{key:a,className:"checkboxParam"},l.a.createElement(f.a,{id:"contractParams".concat(t.id),name:"contractParams",value:e.state.car.contractInfo.find((function(e){return e.id===t.id})),onChange:function(){e.onChangeParams("contractInfo",t.id)},text:t.name}),t.additionFields&&e.state.car.contractInfo.find((function(e){return e.id===t.id}))&&t.additionFields.map((function(a,n){return l.a.createElement(a.field,Object.assign({key:n},a.props,{value:e.getIfExit(e.state.car.contractInfo,t.id,a.props.name).value,onChange:function(n){e.onChangeParamsFiels("contractInfo",t.id,a.props.name,n)}}))})))}))))),l.a.createElement("div",{className:"col-sm-6 col-md-4"},l.a.createElement("div",{className:"CheckBoxSwitcher-wrapper"},l.a.createElement(y.a,{val:this.state.isPayment,onChange:function(){e.setState({isPayment:!e.state.isPayment})},lable:"\u0421\u043f\u043e\u0441\u043e\u0431\u044b \u043e\u043f\u043b\u0430\u0442\u044b \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044e"})),l.a.createElement(C.CSSTransitionGroup,{transitionName:"height-animation-item",transitionEnterTimeout:300,transitionLeaveTimeout:300,style:{display:"contents"}},this.state.isPayment&&l.a.createElement("div",{className:"checkboxGroup"},O.c.map((function(t,a){return l.a.createElement("div",{key:a,className:"checkboxParam"},l.a.createElement(f.a,{id:"paymentParams".concat(t.id),name:"paymentParams".concat(t.id),value:e.state.car.paymentInfo.length&&!!e.state.car.paymentInfo.find((function(e){return e.id===t.id})),onChange:function(){e.onChangeParams("paymentInfo",t.id)},text:t.name}),t.additionFields&&e.state.car.paymentInfo.find((function(e){return e===t.id}))&&t.additionFields.map((function(a,n){return l.a.createElement(a.field,Object.assign({key:n},a.props,{value:e.state.car.paymentInfo[a.props.name],onChange:function(n){e.onChangeParamsFiels("paymentInfo",t.id,a.props.name,n.target.value)}}))})))})))))),l.a.createElement("div",{className:"row slide-step justify-content-end"},l.a.createElement(p.a,{type:"fill",className:" input-action",paddingHorizontal:"40px",onClick:this.state.isEditing?this.editTemplate:this.saveTemplate},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))),!this.state.isFething&&this.state.notFound&&l.a.createElement(k.a,null))}}]),a}(l.a.Component);t.default=Object(N.b)((function(e){return{user:e.user}}))(Object(g.o)(P))}}]);
//# sourceMappingURL=7.53da2e5a.chunk.js.map