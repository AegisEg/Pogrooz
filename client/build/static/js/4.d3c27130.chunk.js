(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[4],{887:function(t,e,a){"use strict";a.r(e);var n=a(1),r=a(5),s=a(6),i=a(8),o=a(7),c=a(0),l=a.n(c),m=a(21),d=a(430),p=a(16),u=a(20),h=a(76),f=a(428),g=a(124),y=a(31),T=a(22),v=a(18),b=a(62),E=a(66),C=function(t){Object(i.a)(a,t);var e=Object(o.a)(a);function a(){var t;Object(r.a)(this,a);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).state={isExtra:!1,isContract:!1,isPayment:!1,openTemplate:!1,currentTemplate:!1,car:{},comment:"",budget:!1},t.selectTemplate=function(e){var a={},r=Object(n.a)({additionally:[],contractInfo:[],info:[],property:"",paymentInfo:[]},e.car);a=Object(n.a)(Object(n.a)({},a),{},{isExtra:!!r.additionally.length,isContract:!!r.contractInfo&&r.contractInfo.length,isPayment:!!r.paymentInfo.length}),t.props.onChange({typesCar:e.car.typesCar}),t.setState(Object(n.a)({car:r,currentTemplate:e},a))},t.onChange=function(e,a){var r=t.state.car;switch(a){case"carType":r=Object(n.a)(Object(n.a)({},r),{},{typesCar:[e],info:[]}),t.props.onChange({typesCar:[e]});break;case"carProperty":r=Object(n.a)(Object(n.a)({},r),{},{property:e});break;case"carName":r=Object(n.a)(Object(n.a)({},r),{},{name:e});break;case"carPhoto":r=Object(n.a)(Object(n.a)({},r),{},{photo:e})}t.setState({car:r})},t.onChangeParams=function(e,a){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=Object(n.a)({},t.state.car);r?(s[e]={id:a},t.setState({car:s})):(s[e].find((function(t){return t.id===a}))?s[e]=s[e].filter((function(t,e){return t.id!==a})):s[e].push({id:a}),t.setState({car:s}))},t.onChangeParamsFiels=function(e,a,r,s){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=Object(n.a)({},t.state.car);i?o[e][r]=s:o[e].find((function(t){return t.id===a}))&&(o[e]=o[e].map((function(t){return t.id===a?(t[r]=s,t):t}))),t.setState({car:o})},t.onChangeComment=function(e){t.setState({comment:e.target.value})},t.onChangeBudget=function(e){t.setState({budget:e.target.value})},t.onChangeCarData=function(e,a,r){var s=t.state.car.info;s.find((function(t){return t.carId===e}))?s=s.map((function(t){return t.carId===e?(t[a]=r,t):t})):(s.push({carId:e}),s[s.length-1][a]=r),t.setState({car:Object(n.a)(Object(n.a)({},t.state.car),{},{info:s})})},t}return Object(s.a)(a,[{key:"getArticlesInfo",value:function(){var t=!1;return this.state.car.typesCar&&this.state.car.typesCar.length||(v.b.error("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u043c\u0430\u0448\u0438\u043d\u044b",{position:v.b.POSITION.TOP_CENTER}),t=!0),this.state.car.name||(v.b.error("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043c\u0430\u0440\u043a\u0443 \u0438 \u043c\u043e\u0434\u0435\u043b\u044c \u043c\u0430\u0448\u0438\u043d\u044b",{position:v.b.POSITION.TOP_CENTER}),t=!0),this.state.car.photo||(v.b.error("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0424\u043e\u0442\u043e \u043c\u0430\u0448\u0438\u043d\u044b",{position:v.b.POSITION.TOP_CENTER}),t=!0),this.state.car.contractInfo.find((function(t){return(2===t.id||3===t.id)&&!t.org}))&&(v.b.error("\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044e",{position:v.b.POSITION.TOP_CENTER}),t=!0),!t&&{car:this.state.car,comment:this.state.comment,budget:this.state.budget}}},{key:"componentDidMount",value:function(){var t={};this.props.comment&&(t=Object(n.a)(Object(n.a)({},t),{},{comment:this.props.comment})),this.props.budget&&(t=Object(n.a)(Object(n.a)({},t),{},{budget:this.props.budget}));var e=this.props.car;e=Object(n.a)({additionally:[],contractInfo:[],info:[],property:"",paymentInfo:[]},e),t=Object(n.a)(Object(n.a)({},t),{},{isExtra:!!e.additionally.length,isContract:!!e.contractInfo&&e.contractInfo.length,isPayment:!!e.paymentInfo.length}),this.setState(Object(n.a)({car:e},t))}},{key:"getIfExit",value:function(t,e,a){var n;return(n=t.find((function(t){return t.id==e})))&&n[a]?n[a]:""}},{key:"render",value:function(){var t=this,e=!(!this.state.car.typesCar||!this.state.car.typesCar.length)&&E.a.find((function(e){return t.state.car.typesCar[0]===e.id})),a={};return this.state.car.info&&(a=this.state.car.info.find((function(t){return t.carId===e.id}))||{}),l.a.createElement("div",{className:"step-create ".concat(this.props.className)},l.a.createElement("div",{className:"container-fluid"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"mt-3 col-12 col-md-8 mx-0 px-0 row carInfo"},!!this.props.carTemplates.length&&l.a.createElement("div",null,l.a.createElement("a",{className:"href hover",onClick:function(){t.setState({openTemplate:!t.state.openTemplate})}},this.state.openTemplate?"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0432\u044b\u0431\u043e\u0440 \u0448\u0430\u0431\u043b\u043e\u043d\u043e\u0432":"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0438\u0437 \u0448\u0430\u0431\u043b\u043e\u043d\u0430 \u0410\u0432\u0442\u043e"),this.state.openTemplate&&l.a.createElement(h.a,{placeholder:"\u0428\u0430\u0431\u043b\u043e\u043d\u044b \u043c\u0430\u0448\u0438\u043d\u044b",options:this.props.carTemplates.map((function(t){return{value:t,label:t.car.name}})),value:this.state.currentTemplate?{value:this.state.currentTemplate,label:this.state.currentTemplate.car.name}:null,onChange:function(e){t.selectTemplate(e.value)}})),l.a.createElement("h4",{className:"f-16 col-12 mb-1",style:{fontWeight:"normal"}},"\u0422\u0438\u043f \u0430\u0432\u0442\u043e"),l.a.createElement("div",{className:"mt-3 carType"},l.a.createElement(h.a,{placeholder:"\u0422\u0438\u043f  \u043c\u0430\u0448\u0438\u043d\u044b",options:E.a.map((function(t){return{value:t.id,label:t.name}})),value:e?{value:e.id,label:e.name}:null,onChange:function(e){t.onChange(e.value,"carType")}})),l.a.createElement("div",{className:"carName mt-3"},l.a.createElement(f.a,{value:this.state.car.name,apiToken:this.props.user.apiToken,onChange:function(e){t.onChange(e.value,"carName")}})),e&&l.a.createElement("div",{className:"carMoreInfo carInfo row w-100"},1!==e.id&&l.a.createElement("div",{className:"carType"},l.a.createElement("div",{className:"f-14 mb-2"},"\u0413\u0440\u0443\u0437\u043e\u043f\u043e\u0434\u044a\u0435\u043c\u043d\u043e\u0441\u0442\u044c \u0432 \u0442\u043e\u043d\u043d\u0430\u0445"),l.a.createElement(u.a,{type:"number",min:"0",placeholder:"\u0413\u0440\u0443\u0437\u043e\u043f\u043e\u0434\u044c\u0435\u043c\u043d\u043e\u0441\u0442\u044c",value:a.capacity||"",onChange:function(a){t.onChangeCarData(e.id,"capacity",a.target.value)}})),12===e.id&&l.a.createElement("div",{className:"moreInfoCheckBox"},l.a.createElement("div",{className:"f-14 mb-2"},"\u0422\u0435\u043d\u0442\u043e\u0432\u044b\u0439"),l.a.createElement("div",{style:{display:"inline-block"}},l.a.createElement(y.a,{id:"awning1",name:"awning",value:"\u0416\u0435\u0441\u0442\u043a\u0438\u0439 \u0431\u043e\u0440\u0442"===a.awning||"",onChange:function(){t.onChangeCarData(e.id,"awning","\u0416\u0435\u0441\u0442\u043a\u0438\u0439 \u0431\u043e\u0440\u0442")},text:"\u0416\u0435\u0441\u0442\u043a\u0438\u0439 \u0431\u043e\u0440\u0442"})),l.a.createElement("div",{style:{display:"inline-block"}},l.a.createElement(y.a,{id:"awning2",name:"awning",value:"\u0421\u044a\u0435\u043c\u043d\u0430\u044f \u0432\u0435\u0440\u0445\u043d\u044f\u044f \u0431\u0430\u043b\u043a\u0430"===a.awning||"",onChange:function(){t.onChangeCarData(e.id,"awning","\u0421\u044a\u0435\u043c\u043d\u0430\u044f \u0432\u0435\u0440\u0445\u043d\u044f\u044f \u0431\u0430\u043b\u043a\u0430")},text:"\u0421\u044a\u0435\u043c\u043d\u0430\u044f \u0432\u0435\u0440\u0445\u043d\u044f\u044f \u0431\u0430\u043b\u043a\u0430"})),l.a.createElement("div",{style:{display:"inline-block"}},l.a.createElement(y.a,{id:"awning3",name:"awning",value:a&&"\u0421\u044a\u0435\u043c\u043d\u0430\u044f \u0431\u043e\u043a\u043e\u0432\u0430\u044f \u0441\u0442\u043e\u0439\u043a\u0430"===a.awning||"",onChange:function(){t.onChangeCarData(e.id,"awning","\u0421\u044a\u0435\u043c\u043d\u0430\u044f \u0431\u043e\u043a\u043e\u0432\u0430\u044f \u0441\u0442\u043e\u0439\u043a\u0430")},text:"\u0421\u044a\u0435\u043c\u043d\u0430\u044f \u0431\u043e\u043a\u043e\u0432\u0430\u044f \u0441\u0442\u043e\u0439\u043a\u0430"}))),9===e.id&&l.a.createElement("div",{className:"moreInfoCheckBox"},l.a.createElement("div",{className:"f-14 mb-2"},"\u0422\u0438\u043f"),l.a.createElement("div",{style:{display:"inline-block"}},l.a.createElement(y.a,{id:"typeGazel1",name:"typeGazel",value:"\u0426\u0435\u043b\u044c\u043d\u043e\u043c\u0435\u0442\u0430\u043b\u043b\u0438\u0447\u0435\u0441\u043a\u0430\u044f"===a.typeGazel||"",onChange:function(){t.onChangeCarData(e.id,"typeGazel","\u0426\u0435\u043b\u044c\u043d\u043e\u043c\u0435\u0442\u0430\u043b\u043b\u0438\u0447\u0435\u0441\u043a\u0430\u044f")},text:"\u0426\u0435\u043b\u044c\u043d\u043e\u043c\u0435\u0442\u0430\u043b\u043b\u0438\u0447\u0435\u0441\u043a\u0430\u044f"})),l.a.createElement("div",{style:{display:"inline-block"}},l.a.createElement(y.a,{id:"typeGazel2",name:"typeGazel",value:"\u0421 \u0442\u0435\u043d\u0442\u043e\u043c"===a.typeGazel||"",onChange:function(){t.onChangeCarData(e.id,"typeGazel","\u0421 \u0442\u0435\u043d\u0442\u043e\u043c")},text:"\u0421 \u0442\u0435\u043d\u0442\u043e\u043c"}))),l.a.createElement("div",{className:"moreInfoCheckBox"},l.a.createElement("div",{className:"f-14"},"\u0421\u0432\u043e\u0439\u0441\u0442\u0432\u043e:"),l.a.createElement("div",{style:{display:"inline-block"}},l.a.createElement(y.a,{id:"property1",name:"property",value:this.state.car&&"\u041c\u0430\u043d\u0438\u043f\u0443\u043b\u044f\u0442\u043e\u0440"===this.state.car.property||"",onChange:function(){t.state.car&&"\u041c\u0430\u043d\u0438\u043f\u0443\u043b\u044f\u0442\u043e\u0440"===t.state.car.property?t.onChange(!1,"carProperty"):t.onChange("\u041c\u0430\u043d\u0438\u043f\u0443\u043b\u044f\u0442\u043e\u0440","carProperty")},text:"\u041c\u0430\u043d\u0438\u043f\u0443\u043b\u044f\u0442\u043e\u0440"})),l.a.createElement("div",{style:{display:"inline-block"}},l.a.createElement(y.a,{id:"property2",name:"property",value:this.state.car&&"\u0420\u0435\u0444\u0440\u0438\u0436\u0435\u0440\u0430\u0442\u043e\u0440"===this.state.car.property||"",onChange:function(){t.state.car&&"\u0420\u0435\u0444\u0440\u0438\u0436\u0435\u0440\u0430\u0442\u043e\u0440"===t.state.car.property?t.onChange(!1,"carProperty"):t.onChange("\u0420\u0435\u0444\u0440\u0438\u0436\u0435\u0440\u0430\u0442\u043e\u0440","carProperty")},text:"\u0420\u0435\u0444\u0440\u0438\u0436\u0435\u0440\u0430\u0442\u043e\u0440"})),l.a.createElement("div",{style:{display:"inline-block"}},l.a.createElement(y.a,{id:"property3",name:"property",value:this.state.car&&"\u0418\u0437\u043e\u0442\u0435\u0440\u043c"===this.state.car.property||"",onChange:function(){t.state.car&&"\u0418\u0437\u043e\u0442\u0435\u0440\u043c"===t.state.car.property?t.onChange(!1,"carProperty"):t.onChange("\u0418\u0437\u043e\u0442\u0435\u0440\u043c","carProperty")},text:"\u0418\u0437\u043e\u0442\u0435\u0440\u043c"}))))),l.a.createElement("div",{className:"mt-3 col-12 col-md-4 row addPhotoCarBlock"},l.a.createElement("h4",{className:"f-16 col-12 text-center",style:{marginBottom:"20px",fontWeight:"normal"}},"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0444\u043e\u0442\u043e \u043c\u0430\u0448\u0438\u043d\u044b"),l.a.createElement("input",{id:"photoCar",onChange:function(e){var a=e.target.files[0];t.onChange({file:a,path:URL.createObjectURL(a)},"carPhoto")},type:"file",accept:"image/jpeg,image/png",hidden:!0}),l.a.createElement("div",{className:"inputPhoto ".concat(this.state.car.photo?"":"unload"," ")},l.a.createElement("div",{className:"placeholder",onClick:function(){document.getElementById("photoCar").click()}},l.a.createElement("span",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c")),this.state.car.photo&&l.a.createElement("img",{src:!!this.state.car.photo&&this.state.car.photo.path,className:"carPhoto",alt:"carPhoto"}),!this.state.car.photo&&l.a.createElement("div",{className:"carPhoto"})))),l.a.createElement("div",{className:"row swicher-wrapper"},l.a.createElement("div",{className:"col-sm-6 col-md-4"},l.a.createElement("div",{className:"CheckBoxSwitcher-wrapper"},l.a.createElement(g.a,{lableClassname:"f-16",val:this.state.isExtra,onChange:function(){t.setState({isExtra:!t.state.isExtra})},lable:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b"})),l.a.createElement(T.CSSTransitionGroup,{transitionName:"height-animation-item",transitionEnterTimeout:300,transitionLeaveTimeout:300,style:{display:"contents"}},this.state.isExtra&&l.a.createElement("div",{className:"checkboxGroup"},b.b.map((function(e,a){return l.a.createElement("div",{key:a,className:"checkboxParam"},l.a.createElement(y.a,{id:"additionally".concat(e.id),name:"additionally".concat(e.id),value:t.state.car.additionally.find((function(t){return t.id==e.id})),onChange:function(){t.onChangeParams("additionally",e.id)},text:e.name}),e.additionFields&&t.state.car.additionally.find((function(t){return t.id===e.id}))&&e.additionFields.map((function(a,n){return l.a.createElement(a.field,Object.assign({key:n},a.props,{value:t.getIfExit(t.state.car.additionally,e.id,a.name),onChange:function(n){t.onChangeParamsFiels("additionally",e.id,a.name,n.target.value)}}))})))}))))),l.a.createElement("div",{className:"col-sm-6 col-md-4"},l.a.createElement("div",{className:"CheckBoxSwitcher-wrapper"},l.a.createElement(g.a,{val:this.state.isContract,onChange:function(){t.setState({isContract:!t.state.isContract})},lable:"\u0417\u0430\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0430"})),l.a.createElement(T.CSSTransitionGroup,{transitionName:"height-animation-item",transitionEnterTimeout:300,transitionLeaveTimeout:300,style:{display:"contents"}},this.state.isContract&&l.a.createElement("div",{className:"checkboxGroup contract"},b.a.map((function(e,a){return l.a.createElement("div",{key:a,className:"checkboxParam"},l.a.createElement(y.a,{id:"contractParams".concat(e.id),name:"contractParams",value:t.state.car.contractInfo.find((function(t){return t.id===e.id})),onChange:function(){t.onChangeParams("contractInfo",e.id)},text:e.name}),e.additionFields&&t.state.car.contractInfo.find((function(t){return t.id===e.id}))&&e.additionFields.map((function(a,n){return l.a.createElement(a.field,Object.assign({key:n},a.props,{value:t.getIfExit(t.state.car.contractInfo,e.id,a.props.name).value,onChange:function(n){t.onChangeParamsFiels("contractInfo",e.id,a.props.name,n)}}))})))}))))),l.a.createElement("div",{className:"col-sm-6 col-md-4"},l.a.createElement("div",{className:"CheckBoxSwitcher-wrapper"},l.a.createElement(g.a,{val:this.state.isPayment,onChange:function(){t.setState({isPayment:!t.state.isPayment})},lable:"\u0421\u043f\u043e\u0441\u043e\u0431\u044b \u043e\u043f\u043b\u0430\u0442\u044b \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044e"})),l.a.createElement(T.CSSTransitionGroup,{transitionName:"height-animation-item",transitionEnterTimeout:300,transitionLeaveTimeout:300,style:{display:"contents"}},this.state.isPayment&&l.a.createElement("div",{className:"checkboxGroup"},b.c.map((function(e,a){return l.a.createElement("div",{key:a,className:"checkboxParam"},l.a.createElement(y.a,{id:"paymentParams".concat(e.id),name:"paymentParams".concat(e.id),value:t.state.car.paymentInfo.length&&!!t.state.car.paymentInfo.find((function(t){return t.id===e.id})),onChange:function(){t.onChangeParams("paymentInfo",e.id)},text:e.name}),e.additionFields&&t.state.car.paymentInfo.find((function(t){return t===e.id}))&&e.additionFields.map((function(a,n){return l.a.createElement(a.field,Object.assign({key:n},a.props,{value:t.state.car.paymentInfo[a.props.name],onChange:function(n){t.onChangeParamsFiels("paymentInfo",e.id,a.props.name,n.target.value)}}))})))})))))),l.a.createElement("div",{className:"row "},l.a.createElement("div",{className:"col-12 col-sm-8 mt-4"},l.a.createElement("div",{className:"mb-2 f-16"},"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"),l.a.createElement("textarea",{className:"w-100",onChange:this.onChangeComment,style:{height:"70px"},value:this.state.comment?this.state.comment:""})),l.a.createElement("div",{className:"col-12 col-sm-4 mt-4"},l.a.createElement("div",{className:"mb-2 f-16"},"\u0416\u0435\u043b\u0430\u0435\u043c\u044b\u0439 \u0431\u044e\u0434\u0436\u0435\u0442"),l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement(u.a,{style:{maxWidth:"113px",marginRight:"7px"},type:"number",onChange:this.onChangeBudget,value:this.state.budget?this.state.budget:"",placeholder:"0"}),l.a.createElement("span",null,"\u0440\u0443\u0431")))),l.a.createElement("div",{className:"row slide-step justify-content-end"},l.a.createElement(p.a,{type:"fill",className:" input-action",paddingHorizontal:"40px",onClick:this.props.next},"\u0412\u043f\u0435\u0440\u0435\u0434"))))}}]),a}(l.a.Component),N=a(169),O=a(75),D=function(t){Object(i.a)(a,t);var e=Object(o.a)(a);function a(){var t;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(t=e.call.apply(e,[this].concat(s))).state={isTime:!1,isTimeInterval:!1,addressFrom:!1,addressTo:!1,startDate:!1,startTimeFrom:!1,startTimeTo:!1,errRequired:{}},t.onChangeAddress=function(e,a,n){switch(e){case"From":t.setState({addressFrom:a},n);break;case"To":t.setState({addressTo:a},n)}},t.onChangeTimeInfo=function(e,a,n){var r=new Date(t.state.startTimeFrom),s=new Date(t.state.startTimeTo);switch(e){case"date":var i={startDate:a};t.state.startTimeFrom&&(i.startTimeFrom=new Date(a.getFullYear(),a.getMonth(),a.getDate(),r.getHours(),r.getMinutes(),r.getSeconds())),t.state.startTimeTo&&(i.startTimeTo=new Date(a.getFullYear(),a.getMonth(),a.getDate(),s.getHours(),s.getMinutes(),s.getSeconds())),t.setState(i,n);break;case"From":var o;o=a?s<a?{startTimeFrom:a,startTimeTo:!1}:{startTimeFrom:a}:{startTimeFrom:!1,startTimeTo:!1},t.setState(o,n);break;case"To":r>a&&a?v.b.error('\u0412\u0440\u0435\u043c\u044f "\u0414\u043e" \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u0432\u0440\u0435\u043c\u0435\u043d\u0438 "\u041e\u0442" ',{position:v.b.POSITION.TOP_CENTER}):t.setState({startTimeTo:a},n)}},t}return Object(s.a)(a,[{key:"getArticlesInfo",value:function(){var t=!1;return this.state.startDate&&new Date(this.state.startDate)<(new Date).setHours(0,0,0,0)&&(v.b.error("\u0414\u0430\u0442\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u0442\u0435\u043a\u0443\u0449\u0435\u0439",{position:v.b.POSITION.TOP_CENTER}),t=!0),this.state.addressFrom&&8===Number(this.state.addressFrom.data.fias_level)||(v.b.error("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0434\u043e \u0434\u043e\u043c\u0430",{position:v.b.POSITION.TOP_CENTER}),t=!0),this.state.addressTo&&8===Number(this.state.addressTo.data.fias_level)||(v.b.error("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438 \u0434\u043e \u0434\u043e\u043c\u0430",{position:v.b.POSITION.TOP_CENTER}),t=!0),!t&&{startDate:!!this.state.startDate&&{timeFrom:this.state.startTimeFrom,timeTo:this.state.startTimeTo,date:this.state.startDate},from:this.state.addressFrom,to:this.state.addressTo}}},{key:"componentDidMount",value:function(){var t={};this.props.addressFrom&&(t={addressFrom:this.props.addressFrom}),this.props.addressTo&&(t=Object(n.a)(Object(n.a)({},t),{},{addressTo:this.props.addressTo})),this.props.startDate&&(this.props.startDate.date&&(t=Object(n.a)(Object(n.a)({},t),{},{startDate:this.props.startDate.date})),this.props.startDate.date&&(t=Object(n.a)(Object(n.a)({},t),{},{startTimeFrom:this.props.startDate.timeFrom})),this.props.startDate.date&&(t=Object(n.a)(Object(n.a)({},t),{},{startTimeTo:this.props.startDate.timeTo}))),this.setState(Object(n.a)({},t))}},{key:"componentDidUpdate",value:function(){this.state.startTimeFrom&&!this.state.isTime&&this.setState({isTime:!0}),this.state.startTimeTo&&!this.state.isTimeInterval&&this.setState({isTimeInterval:!0})}},{key:"render",value:function(){var t=this;return l.a.createElement("div",{className:"step-create ".concat(this.props.className)},l.a.createElement("div",{className:"container-fluid"},l.a.createElement("div",{className:"row align-items-start"},l.a.createElement("div",{className:"col-xl-8 mt-2 col-12 row"},l.a.createElement("h4",{className:"f-16 col-12 mb-1",style:{fontWeight:"normal"}},"\u041c\u0430\u0440\u0448\u0440\u0443\u0442"),l.a.createElement("div",{className:"col-12 col-sm-6 mt-2"},l.a.createElement(N.a,{placeholder:"\u041e\u0442\u043a\u0443\u0434\u0430",className:"".concat(this.state.errRequired.addressFrom?"errRequired":""),value:this.state.addressFrom?this.state.addressFrom.value:"",onChange:function(e){e&&8===Number(e.data.fias_level)&&t.setState({errRequired:Object(n.a)(Object(n.a)({},t.state.errRequired),{},{addressFrom:!1})}),t.onChangeAddress("From",e,(function(){e&&e.data.geo_lat&&e.data.geo_lon&&t.mapFrom.panTo([Number(e.data.geo_lat),Number(e.data.geo_lon)],{delay:1500})}))}}),l.a.createElement(O.a,{instanceRef:function(e){t.mapFrom=e},defaultState:{center:this.state.addressFrom?[this.state.addressFrom.data.geo_lat,this.state.addressFrom.data.geo_lon]:[55.684758,37.738521],zoom:10},style:{marginTop:"21px",height:"220px",width:"100%"}},this.state.addressFrom&&this.state.addressFrom.data.geo_lat&&this.state.addressFrom.data.geo_lon&&l.a.createElement(O.b,{geometry:[this.state.addressFrom.data.geo_lat,this.state.addressFrom.data.geo_lon]}))),l.a.createElement("div",{className:"col-12 col-sm-6 mt-2"},l.a.createElement(N.a,{placeholder:"\u041a\u0443\u0434\u0430",className:"".concat(this.state.errRequired.addressTo?"errRequired":""),value:this.state.addressTo?this.state.addressTo.value:"",onChange:function(e){e&&8===Number(e.data.fias_level)&&t.setState({errRequired:Object(n.a)(Object(n.a)({},t.state.errRequired),{},{addressTo:!1})}),t.onChangeAddress("To",e,(function(){e&&e.data.geo_lat&&e.data.geo_lon&&t.mapTo.panTo([Number(e.data.geo_lat),Number(e.data.geo_lon)],{delay:1500})}))}}),l.a.createElement(O.a,{instanceRef:function(e){t.mapTo=e},defaultState:{center:this.state.addressTo?[this.state.addressTo.data.geo_lat,this.state.addressTo.data.geo_lon]:[55.684758,37.738521],zoom:10},style:{marginTop:"21px",height:"220px",width:"100%"}},this.state.addressTo&&this.state.addressTo.data.geo_lat&&this.state.addressTo.data.geo_lon&&l.a.createElement(O.b,{geometry:[this.state.addressTo.data.geo_lat,this.state.addressTo.data.geo_lon]})))),l.a.createElement("div",{className:"col-xl-4 mt-2 col-12 row"},l.a.createElement("h4",{className:"f-16 col-12",style:{marginBottom:"12px",fontWeight:"normal"}},"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f"),l.a.createElement("div",{className:"col-12 row mx-0",style:{marginLeft:"0",marginRight:"0",alignItems:"center"}},l.a.createElement("span",{className:"filter-input-title"},"\u0414\u0430\u0442\u0430",l.a.createElement("br",null),"\u043f\u043e\u0433\u0440\u0443\u0437\u043a\u0438"),l.a.createElement(u.a,{type:"date",className:"".concat(this.state.errRequired.startDate?"errRequired":""),style:{width:"130px"},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u0442\u0443",value:this.state.startDate||null,onChange:function(e){t.setState({errRequired:Object(n.a)(Object(n.a)({},t.state.startDate),{},{startDate:!1})}),t.onChangeTimeInfo("date",e)}})),this.state.startDate&&l.a.createElement("div",{className:"col d-flex align-items-center",style:{marginTop:"21px",maxWidth:"146px"}},l.a.createElement(y.a,{id:"isTime",value:this.state.isTime,onChange:function(){t.state.isTime&&t.onChangeTimeInfo("From",!1),t.setState({isTime:!t.state.isTime})},text:"\u0423\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0440\u0435\u043c\u044f"})),this.state.isTime&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col d-flex align-items-center",style:{marginTop:"21px",maxWidth:"172px"}},this.state.startTimeFrom&&l.a.createElement(y.a,{id:"isTimeInterval",onChange:function(){t.state.isTimeInterval&&t.onChangeTimeInfo("To",!1),t.setState({isTimeInterval:!t.state.isTimeInterval})},value:this.state.isTimeInterval,text:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b"})),l.a.createElement("div",{className:"d-inline-flex  col-12 mt-3",style:{alignItems:"center",flexDirection:"row"}},l.a.createElement("span",{className:"filter-input-title mb-0"},"\u0412\u0440\u0435\u043c\u044f",l.a.createElement("br",null),"\u043f\u043e\u0433\u0440\u0443\u0437\u043a\u0438"),l.a.createElement(u.a,{date:this.state.startDate,type:"time",value:this.state.startTimeFrom||null,onChange:function(e){t.onChangeTimeInfo("From",e)}}),this.state.isTimeInterval&&l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"filter-input-title mb-0"},"\xa0\xa0-"),l.a.createElement(u.a,{date:this.state.startDate,type:"time",value:this.state.startTimeTo||null,onChange:function(e){t.onChangeTimeInfo("To",e)}})))))),l.a.createElement("div",{className:"row slide-step justify-content-end"},l.a.createElement(p.a,{type:"empty",className:" input-action",paddingHorizontal:"40px",onClick:this.props.prev},"\u041d\u0430\u0437\u0430\u0434"),l.a.createElement(p.a,{type:"fill",className:" input-action",paddingHorizontal:"40px",onClick:this.props.next},"\u0412\u043f\u0435\u0440\u0435\u0434"))))}}]),a}(l.a.Component),I=a(14),S=a(10),j=a(95),x=a(233),P=function(t){Object(i.a)(a,t);var e=Object(o.a)(a);function a(){var t;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(t=e.call.apply(e,[this].concat(s))).state={isPro:!1,cargoTypes:[],cargoData:[],cargoStandartData:{},cargoListPossible:[]},t.onChangeCargoData=function(e,a,n){var r=t.state.cargoData;r.find((function(t){return t.typeID===e}))?r=r.map((function(t){return t.typeID===e?(t[a]=n,t):t})):(r.push({typeID:e}),r[r.length-1][a]=n),t.setState({cargoData:r})},t.onChangeCargoStandartData=function(e,a){var n=t.state.cargoStandartData;n[e]=a,t.setState({cargoStandartData:n})},t.onChangeTypesByOne=function(e){t.state.cargoTypes.find((function(t){return t===e.id}))?t.setState({cargoTypes:t.state.cargoTypes.filter((function(t){return t!==e.id})),cargoData:t.state.cargoData.filter((function(t,a){return t.typeID!==e.id}))}):t.setState({cargoTypes:[].concat(Object(I.a)(t.state.cargoTypes),[e.id])})},t.onChangeTypesByMore=function(e){var a=!1;(e=e?e.map((function(t){return t.value})):[]).length<t.state.cargoTypes&&(a=t.state.cargoData.filter((function(t,a){return e.find((function(e){return e===t.typeID}))}))),t.setState({cargoTypes:Object(I.a)(e),cargoData:a||t.state.cargoData})},t}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var t=this,e=j.a.filter((function(e){return!!t.props.cargoTypes&&!!t.props.cargoTypes.find((function(t){return t===e.id}))})),a={};this.props.cargoTypes&&(a={cargoTypes:this.props.cargoTypes}),e.find((function(t){return t.isPro}))&&(a=Object(n.a)(Object(n.a)({},a),{},{isPro:!0})),this.props.cargoData&&(a=Object(n.a)(Object(n.a)({},a),{},{cargoData:this.props.cargoData})),this.props.cargoStandartData&&(a=Object(n.a)(Object(n.a)({},a),{},{cargoStandartData:this.props.cargoStandartData})),this.setState(Object(n.a)({},a),this.updateTypes())}},{key:"componentDidUpdate",value:function(t){if(t.typesCar||this.props.typesCar){var e=t.typesCar||[],a=this.props.typesCar||[];e.sort((function(t,e){return e-t})),a.sort((function(t,e){return e-t})),JSON.stringify(e)!==JSON.stringify(a)&&this.updateTypes()}}},{key:"updateTypes",value:function(){var t=[];t=(t=(t=this.props.typesCar.map((function(t){return E.a.find((function(e){return e.id==t})).cargoTypes}))).flat().filter((function(t,e,a){return a.indexOf(t)===e}))).map((function(t){return j.a.find((function(e){return e.id===t}))}));var e=this.state.cargoTypes.filter((function(e){return t.find((function(t){return t.id===e}))})),a=!1;!e.find((function(t){return t.isPro}))&&t.find((function(t){return!t.isPro}))||(a=!0),this.setState({cargoListPossible:t,cargoTypes:e,cargoData:[],isPro:a})}},{key:"getArticlesInfo",value:function(){var t=!1;return this.state.cargoTypes.length||(v.b.error("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u0433\u0440\u0443\u0437\u0430",{position:v.b.POSITION.TOP_CENTER}),t=!0),!t&&{cargoTypes:this.state.cargoTypes,cargoData:this.state.cargoData,cargoStandartData:this.state.cargoStandartData}}},{key:"render",value:function(){var t=this,e=j.a.filter((function(e){return!!t.state.cargoTypes.find((function(t){return t===e.id}))}));return l.a.createElement("div",{className:"step-create ".concat(this.props.className)},l.a.createElement("div",{className:"container-fluid"},l.a.createElement("div",{className:"box-grooz-wrapper-row align-items-start justify-content-start"},l.a.createElement("h4",{className:"f-16 col-12 mb-1",style:{fontWeight:"normal"}},l.a.createElement("span",null,"\u0422\u0438\u043f \u0433\u0440\u0443\u0437\u0430"),l.a.createElement(S.Link,{to:"/",className:"href f-14 ml-4",onClick:function(e){e.preventDefault(),t.setState({isPro:!t.state.isPro})}},!this.state.isPro&&l.a.createElement(l.a.Fragment,null,"\u041e\u0442\u043a\u0440\u044b\u0442\u044c"),this.state.isPro&&l.a.createElement(l.a.Fragment,null,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c")," Pro \u0441\u043f\u0438\u0441\u043e\u043a")),!this.state.isPro&&l.a.createElement(l.a.Fragment,null,this.state.cargoListPossible.map((function(a,n){if(!a.isPro){var r=e.find((function(t){return t.id===a.id}));return l.a.createElement("div",{key:n,className:"col box-grooz-wrapper"},l.a.createElement("div",{className:"box-grooz ".concat(r?"active":""),onClick:function(){t.onChangeTypesByOne(a)}},l.a.createElement("div",{className:"text-center"},l.a.createElement("img",{src:a.img,alt:"box"}),l.a.createElement("span",{className:"d-block"},a.name))))}}))),this.state.isPro&&l.a.createElement(h.a,{placeholder:"\u0422\u0438\u043f \u0413\u0440\u0443\u0437\u0430",options:this.state.cargoListPossible.map((function(t){return{value:t.id,label:t.name}})),isMulti:!0,className:"selectTypeCargo",value:e.map((function(t){return{value:t.id,label:t.name}})),onChange:function(e){t.onChangeTypesByMore(e)}})),l.a.createElement("div",{className:"row typeGrooz"},(e.find((function(t){return t.isStandart}))||this.state.cargoData.find((function(t){return 4===t.typeID}))&&"\u041e\u0431\u044b\u0447\u043d\u044b\u0435"===this.state.cargoData.find((function(t){return 4===t.typeID})).type||this.state.cargoData.find((function(t){return 13===t.typeID}))&&"\u041e\u0431\u044b\u0447\u043d\u044b\u0435"===this.state.cargoData.find((function(t){return 13===t.typeID})).type||this.state.cargoData.find((function(t){return 3===t.typeID}))&&"\u041e\u0431\u044b\u0447\u043d\u044b\u0435"===this.state.cargoData.find((function(t){return 3===t.typeID})).type)&&l.a.createElement(x.a,{cargoStandartData:this.state.cargoStandartData,needCube:!1,onChangeCargoStandartData:this.onChangeCargoStandartData}),!!e.length&&e.map((function(e,a){return!!e.fields&&l.a.createElement("div",{key:a,className:"rowParams"},l.a.createElement("h4",{className:"f-16 col-12 mb-1",style:{fontWeight:"normal"}},l.a.createElement("div",{className:"typeName"},e.name),"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043e\u0434\u043d\u043e\u0433\u043e \u043c\u0435\u0441\u0442\u0430 \u0438 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0435\u0441\u0442"),l.a.createElement("div",{className:"moreParams"},e.fields(t.onChangeCargoData,t.state.cargoData.find((function(t){return t.typeID===e.id}))||[],t.props.typesCar)))}))),l.a.createElement("div",{className:"row slide-step justify-content-end"},l.a.createElement(p.a,{type:"empty",className:" input-action",paddingHorizontal:"40px",onClick:this.props.prev},"\u041d\u0430\u0437\u0430\u0434"),l.a.createElement(p.a,{type:"fill",className:" input-action",paddingHorizontal:"40px",onClick:this.props.next},"\u0412\u043f\u0435\u0440\u0435\u0434"))))}}]),a}(l.a.Component),F=a(429),k=a(58),w=a(12),_=a(104),R=a(33),z=a(73),A=function(t){Object(i.a)(a,t);var e=Object(o.a)(a);function a(t){var n;return Object(r.a)(this,a),(n=e.call(this,t)).state={isFetching:!0,notFound:!1,currentTab:1,typesCar:[],carTemplates:[],article:!1,isEditing:!1},n.article={},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var t=this;"cargo"===this.props.user.type?this.setState({notFound:!0,isFetching:!1}):this.props.match.params.id?fetch("".concat(w.a.urlApi,"/api/article/getUserArticle"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.props.user.apiToken)},body:JSON.stringify({id:this.props.match.params.id,type:"offer"})}).then((function(t){return t.json()})).then((function(e){e.error?t.setState({notFound:!0,isFetching:!1}):e.article&&(t.article=e.article,t.editingId=e.article._id,t.setState({typesCar:e.article.car.typesCar,isEditing:!0},(function(){Object(_.a)(("offer"===t.state.article.type?"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430")+" \u2116"+t.article.articleId),t.getCarTemplate()})))})):this.getCarTemplate()}},{key:"getCarTemplate",value:function(){var t=this;fetch("".concat(w.a.urlApi,"/api/car/getCarTemplates"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.props.user.apiToken)}}).then((function(t){return t.json()})).then((function(e){e.error||e.carTemplates&&t.setState({carTemplates:e.carTemplates,isFetching:!1})}))}},{key:"getRef",value:function(t){switch(t){case 1:return this.step1;case 2:return this.step2;case 3:return this.step3}}},{key:"nexTab",value:function(t){var e,a=this,r=!1,s={type:"offer"};if(Array.from(Array(t-1),(function(t,e){return e+1})).map((function(t,i){(e=a.getRef(t).getArticlesInfo())?s=Object(n.a)(Object(n.a)({},s),e):r=i+1})),r)this.state.currentTab!==r&&this.setState({currentTab:r});else if(4===t)this.setState({article:Object(n.a)(Object(n.a)({},s),{},{author:this.props.user})},(function(){a.setState({currentTab:t})}));else{var i={currentTab:t};this.setState(Object(n.a)({},i))}}},{key:"render",value:function(){var t=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{isLoading:this.state.isFetching}),l.a.createElement("div",{className:"create-page create-order-page"},l.a.createElement(T.CSSTransitionGroup,{transitionName:"loading-height-animation-item",transitionEnterTimeout:300,transitionLeaveTimeout:300,style:{display:"contents"}},!this.state.isFetching&&!this.state.notFound&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"container-fluid"},l.a.createElement("h2",{className:"title"},this.props.title),l.a.createElement(d.a,{changeTub:function(e){t.nexTab(e)},currentTab:this.state.currentTab,tabs:["\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0430\u0432\u0442\u043e","\u041c\u0430\u0440\u0442\u0448\u0440\u0443\u0442","\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0433\u0440\u0443\u0437\u0430","\u041f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u044f \u0442\u043e\u0432\u0430\u0440\u0430"]})),l.a.createElement("div",{className:"steps-create"},l.a.createElement(C,{ref:function(e){return t.step1=e},className:"".concat(1===this.state.currentTab?"active":""," \n              ").concat(this.state.currentTab>1?"deactive":""),car:this.article.car,next:function(){t.nexTab(2)},user:this.props.user,carTemplates:this.state.carTemplates,onChange:function(e){t.setState(e)},comment:this.article.comment,budget:this.article.budget}),l.a.createElement(D,{ref:function(e){return t.step2=e},className:"".concat(2===this.state.currentTab?"active":""," ").concat(this.state.currentTab>2?"deactive":""),next:function(){t.nexTab(3)},prev:function(){t.setState({currentTab:t.state.currentTab-1})},addressFrom:this.article.from,addressTo:this.article.to,startDate:this.article.startDate}),l.a.createElement(P,{ref:function(e){return t.step3=e},className:"".concat(3===this.state.currentTab?"active":""," ").concat(this.state.currentTab>3?"deactive":""),typesCar:this.state.typesCar,next:function(){t.nexTab(4)},prev:function(){t.setState({currentTab:t.state.currentTab-1})},cargoTypes:this.article.cargoTypes,cargoData:this.article.cargoData,cargoStandartData:this.article.cargoStandartData}),l.a.createElement(F.a,{key:"OfferCreate4",className:"".concat(4===this.state.currentTab?"active":""),prev:function(){t.setState({currentTab:t.state.currentTab-1})},isEditing:this.state.isEditing,editingId:this.editingId,article:this.state.article})))),!this.state.isFething&&this.state.notFound&&l.a.createElement(z.a,null)))}}]),a}(l.a.Component);e.default=Object(m.b)((function(t){return{user:t.user}}))(Object(k.o)(A))}}]);
//# sourceMappingURL=4.d3c27130.chunk.js.map