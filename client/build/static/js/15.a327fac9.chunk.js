(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[15],{910:function(e,t,a){"use strict";a.r(t);var n=a(75),r=a(6),i=a(7),c=a(9),l=a(8),s=a(0),p=a.n(s),o=a(18),m=a(32),u=a(59),d=a(37),h=a(11),f=a(17),g=a(16),v=a(85),y=(a(22),a(413)),E=a(414),N=a(118),b=a(26),T=a(100),j=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={isFetching:!1},e.delete=function(){e.setState({isFetching:!0},(function(){fetch("".concat(f.a.urlApi,"/api/car/deleteCarTemplate"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e.props.user.apiToken)},body:JSON.stringify({templateId:e.props.template._id})}).then((function(e){return e.json()})).then((function(t){t.error&&(t.errors.map((function(e){b.b.error(e.msg)})),e.setState({isFetching:!1})),t.error||e.setState({isFetching:!1},(function(){e.props.reload()}))}))}))},e.splitArr=function(e,t){return Object(g.a)(Array(t)).map((function(a,n){return e.filter((function(e,a){return a%t===n}))}))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return p.a.createElement("div",{className:"auto-template mt-4"},p.a.createElement(v.a,{isLoading:this.state.isFetching}),p.a.createElement("div",{className:"head-template align-items-center row"},p.a.createElement("div",{className:"px-3 title-auto",style:{minWidth:"280px"}},this.props.template.car.name),p.a.createElement("div",{className:"row mx-0 templateAction"},p.a.createElement("div",{className:"px-3"},p.a.createElement(o.a,{type:"fill",paddingVertical:"6px",className:"f-12 position-relative"},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",p.a.createElement(h.Link,{to:"/edit-template-auto/".concat(this.props.template._id),className:"sharected-link"}))),p.a.createElement("div",{className:"px-3"},p.a.createElement(o.a,{type:"fill",paddingVertical:"6px",className:"bg-gray f-12 ",onClick:this.delete},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))),p.a.createElement("div",{className:"row mt-4 template-content"},p.a.createElement("div",{className:"templatePhoto"},p.a.createElement("img",{className:"w-100",src:this.props.template.car.photo.path,alt:""})),p.a.createElement("div",{className:"px-3 f-14 carDescription"},this.props.template.car.typesCar.length===N.a.length&&"\u041b\u044e\u0431\u0430\u044f",this.props.template.car.typesCar.length!==N.a.length&&this.props.template.car.typesCar.map((function(t,a,n){var r=N.a.find((function(e){return t===e.id}));return p.a.createElement("div",{key:a},p.a.createElement("div",null,p.a.createElement("b",null,r.name)),e.props.template.car.info&&e.props.template.car.info.find((function(e){return e.carId===t}))&&Object.entries(e.props.template.car.info.find((function(e){return e.carId===t}))).map((function(e,t){var a;if("carId"!==e[0]&&("capacity"===e[0]&&(a="\u0413\u0440\u0443\u0437\u043e\u043f\u043e\u0434\u044a\u0435\u043c\u043d\u043e\u0441\u0442\u044c"),"awning"===e[0]&&(a="\u0422\u0435\u043d\u0442\u043e\u0432\u044b\u0439"),"typeGazel"===e[0]&&(a="\u0422\u0438\u043f \u0413\u0430\u0437\u0435\u043b\u0438"),a))return p.a.createElement("div",{key:t},a,": ",e[1])})),e.props.template.car.property&&p.a.createElement("div",{key:a},"\u0421\u0432\u043e\u0439\u0441\u0442\u0432\u043e: ",e.props.template.car.property))}))),p.a.createElement("div",{className:"row px-3"},this.props.template.car.additionally&&this.splitArr(this.props.template.car.additionally,this.props.template.car.additionally.length>4?2:1).map((function(e,t){return p.a.createElement("div",{className:"additionally"},e.map((function(e,t){return p.a.createElement("span",{className:"position-relative left-angle f-12"},T.b.find((function(t){return e.id===t.id})).name)})))}))),p.a.createElement("div",{className:"col contractInfoTemplate"},this.props.template.car.contractInfo&&!!this.props.template.car.contractInfo.length&&p.a.createElement("span",{className:"property-user f-12"},p.a.createElement(E.a,null),"\u0414\u043e\u0433\u043e\u0432\u043e\u0440 \u0441 \xa0",this.props.template.car.contractInfo.map((function(e,t,a){var n=T.a.find((function(t){return t.id===e.id})).label;return 3!==e.id&&2!==e.id||(n+="("+e.org.value+")"),n+(a.length-1===t?".":", ")}))),this.props.template.car.paymentInfo&&!!this.props.template.car.paymentInfo.length&&p.a.createElement("span",{className:"property-user f-12"},p.a.createElement(y.a,null),"\u041e\u043f\u043b\u0430\u0442\u0430"," ",this.props.template.car.paymentInfo.map((function(e,t,a){return T.c.find((function(t){return t.id===e.id})).label+(a.length-1===t?".":",")}))))))}}]),a}(p.a.Component),x=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={carTemplates:[],isFetching:!0},e.getCarTemplates=function(){e.setState({isFetching:!0},(function(){fetch("".concat(f.a.urlApi,"/api/car/getCarTemplates"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e.props.user.apiToken)}}).then((function(e){return e.json()})).then((function(t){t.error||t.carTemplates&&e.setState({carTemplates:t.carTemplates,isFetching:!1})}))}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getCarTemplates()}},{key:"render",value:function(){var e,t=this;return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"myauto-page"},p.a.createElement("div",{className:"container-fluid"},p.a.createElement("h2",{className:"title",style:{padding:"0 28px 15px 28px",marginRight:"-28px",marginLeft:"-28px",borderBottom:"1px solid #DDDDDD"}},"\u041c\u043e\u0438 \u0448\u0430\u0431\u043b\u043e\u043d\u044b \u0430\u0432\u0442\u043e"),p.a.createElement("div",null,p.a.createElement(h.Link,{to:"/create-template-auto"},p.a.createElement(o.a,(e={paddingVertical:"11px",className:"f-14"},Object(n.a)(e,"paddingVertical","10px"),Object(n.a)(e,"type","fill"),e),"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0448\u0430\u0431\u043b\u043e\u043d \u0430\u0432\u0442\u043e")),p.a.createElement("div",{className:"carTemplates-block"},p.a.createElement(u.a,{isLoading:this.state.isFetching}),p.a.createElement(d.CSSTransitionGroup,{transitionName:"height-animation-item",transitionEnterTimeout:500,transitionLeaveTimeout:1,style:{display:"contents"}},this.state.carTemplates.map((function(e,a){return p.a.createElement(j,{reload:t.getCarTemplates,user:t.props.user,template:e})})),!this.state.carTemplates.length&&p.a.createElement("div",{className:"text-center"},"\u0428\u0430\u0431\u043b\u043e\u043d\u044b \u0430\u0432\u0442\u043e \u0435\u0449\u0435 \u043d\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u044b")))))))}}]),a}(p.a.Component);t.default=Object(m.b)((function(e){return{user:e.user}}))(x)}}]);
//# sourceMappingURL=15.a327fac9.chunk.js.map