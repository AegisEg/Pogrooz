(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[21],{914:function(e,t,a){"use strict";a.r(t);var n=a(6),r=a(7),i=a(9),s=a(8),l=a(0),c=a.n(l),o=a(288),m=a(11),u=a(18),p=a(32),f=a(217),h=a(216),E=a(59),d=a(37),y=a(302),g=a(17),D=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={payments:!1,isFetching:!0,currentPage:0,countAll:!1},e.getPaymentHistory=function(t){e.setState({currentPage:t,isFetching:!0},(function(){fetch("".concat(g.a.urlApi,"/api/tariffs/payments"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e.props.user.apiToken)},body:JSON.stringify({page:t})}).then((function(e){return e.json()})).then((function(t){var a=t.payments,n=t.countAll;e.setState({isFetching:!1,payments:a,countAll:n})}))}))},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.getPaymentHistory(0)}},{key:"render",value:function(){return c.a.createElement("div",{className:"pay-history"},c.a.createElement(E.a,{isLoading:this.state.isFetching}),c.a.createElement(d.CSSTransitionGroup,{transitionName:"height-animation-item",transitionEnterTimeout:500,transitionLeaveTimeout:1,style:{display:"contents"}},!this.state.isFetching&&this.state.payments&&!!this.state.payments.length&&c.a.createElement(c.a.Fragment,null,c.a.createElement("h3",{className:"f-16 font-weight-normal mt-3"},"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u043f\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0439"),c.a.createElement("div",{className:"table-wrapper"},c.a.createElement("table",{className:"table"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"\u0414\u0430\u0442\u0430 \u043e\u043f\u043b\u0430\u0442\u044b"),c.a.createElement("th",null,"\u0421\u043f\u043e\u0441\u043e\u0431 \u043e\u043f\u043b\u0430\u0442\u044b"),c.a.createElement("th",null,"\u0422\u0430\u0440\u0438\u0444"),c.a.createElement("th",null,"\u0421\u0443\u043c\u043c\u0430"),c.a.createElement("th",null,"\u0421\u0440\u043e\u043a"),c.a.createElement("th",null,"\u0414\u0430\u0442\u0430 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f"),c.a.createElement("th",null,"\u0421\u0442\u0430\u0442\u0443\u0441"))),c.a.createElement("tbody",null,this.state.payments.map((function(e,t,a){var n;return e.tariff&&(e.tariff.duration<=28&&(n=e.tariff.duration/7,n+=n>1?" \u043d\u0435\u0434\u0435\u043b\u0438":" \u043d\u0435\u0434\u0435\u043b\u044f"),e.tariff.duration>28&&(n=Object(y.d)(e.tariff.duration/30))),c.a.createElement("tr",{key:t},c.a.createElement("th",{scope:"row"},new Date(e.updatedAt).toDateR()),c.a.createElement("td",null,e.tariff&&"visa / master cart",e.ban&&"----------------"),c.a.createElement("td",null,e.tariff&&e.tariff.name,e.ban&&"\u0412\u043e\u0437\u0432\u0440\u0430\u0442"),c.a.createElement("td",null,e.tariff&&c.a.createElement(c.a.Fragment,null,e.tariff.price-e.tariff.price*e.tariff.discount/100,"\u0440\u0443\u0431")),c.a.createElement("td",null,e.tariff&&n),c.a.createElement("td",null,new Date(e.startedAt).toDateR()," -"," ",new Date(e.expiriesAt).toDateR()," \u0433"),c.a.createElement("td",null,c.a.createElement("span",{className:"left-angle yellow"},new Date(e.expiriesAt)>new Date&&!(t&&new Date(a[t-1].expiriesAt)>new Date)&&"\u0410\u043a\u0442\u0438\u0432\u0435\u043d",new Date(e.expiriesAt)>new Date&&!!t&&new Date(a[t-1].expiriesAt)>new Date&&"\u041e\u0436\u0438\u0434\u0430\u0435\u0442",new Date(e.expiriesAt)<new Date&&"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d")))}))))),c.a.createElement(h.a,{currentPage:this.state.currentPage,pageCount:this.state.countAll-1,onPageChange:this.getPaymentHistory}))))}}]),a}(c.a.Component),w=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={},e}return Object(r.a)(a,[{key:"diffDates",value:function(e,t){return(e-t)/864e5}},{key:"render",value:function(){var e;return this.props.user.expiriesTariffAt&&this.props.user.tariff&&(e=this.props.user.tariff),this.props.user.expiriesTariffAt&&!this.props.user.tariff&&(e={name:"\u0422\u0430\u0440\u0438\u0444 \u0412\u043e\u0437\u0432\u0440\u0430\u0442",isDemo:!0}),this.props.user.expiriesTariffAt||this.props.user.tariff||(e=!1),c.a.createElement("div",{className:"standart-page"},c.a.createElement("div",{className:"container-fluid"},c.a.createElement("h2",{className:"title"},"\u041c\u043e\u0438 \u0442\u0430\u0440\u0438\u0444"),c.a.createElement("div",{className:"row align-items-center"},c.a.createElement("p",{className:"f-14 mt-2 d-inline-block px-3"},!this.props.user.expiriesTariffAt&&!e&&c.a.createElement(c.a.Fragment,null,c.a.createElement(o.a,null)," \u041f\u0440\u043e\u0444\u0438\u043b\u044c \u0441\u043a\u0440\u044b\u0442"),e&&this.diffDates(new Date(this.props.user.expiriesTariffAt),new Date)<=3&&c.a.createElement(c.a.Fragment,null,c.a.createElement("span",null,e.name," ",e.isDemo?"\u0430\u043a\u0442\u0438\u0432\u0435\u043d":"\u043e\u043f\u043b\u0430\u0447\u0435\u043d"," \u0434\u043e"," ",new Date(this.props.user.expiriesTariffAt).toDateR())),e&&this.diffDates(new Date(this.props.user.expiriesTariffAt),new Date)>3&&c.a.createElement(c.a.Fragment,null,c.a.createElement("span",null,e.name," ",e.isDemo?"\u0430\u043a\u0442\u0438\u0432\u0435\u043d":"\u043e\u043f\u043b\u0430\u0447\u0435\u043d"," \u0434\u043e"," ",new Date(this.props.user.expiriesTariffAt).toDateR()))),c.a.createElement("div",{className:"col mt-2"},c.a.createElement(u.a,{type:"fill",className:"f-12",onClick:function(){document.getElementById("tariffs").scrollIntoView({behavior:"smooth"})},paddingVertical:"6px"},"\u041f\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u044c"))),c.a.createElement(D,{user:this.props.user}),c.a.createElement("h3",{className:"f-16 font-weight-normal mt-4"},"\u041f\u0440\u043e\u0434\u043b\u0438\u0442\u044c \u0442\u0430\u0440\u0438\u0444"),c.a.createElement(f.a,null),c.a.createElement("span",{className:"f-14"},"\u0422\u0430\u0440\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f \u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0430\u044f."),c.a.createElement("p",{className:"f-12 mt-0"},"*\u0420\u0430\u0441\u0447\u0435\u0442 \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u0438 \u0434\u043d\u044f \u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d \u0438\u0437 \u0440\u0430\u0441\u0447\u0435\u0442\u0430 30 \u0434\u043d\u0435\u0439 \u0432 \u043c\u0435\u0441\u044f\u0446, \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0432 \u043e\u0437\u043d\u0430\u043a\u043e\u043c\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0446\u0435\u043b\u044f\u0445."),c.a.createElement("span",{className:"mb-4 mt-2 d-block"},c.a.createElement(m.Link,{to:"/autopay",className:"f-14 href-hover",style:{color:"#000"}},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0430\u0432\u0442\u043e\u043f\u043b\u0430\u0442\u0435\u0436\u0430"))))}}]),a}(c.a.Component);t.default=Object(p.b)((function(e){return{user:e.user}}))(w)}}]);
//# sourceMappingURL=21.5a829b99.chunk.js.map