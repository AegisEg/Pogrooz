(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[1],{879:function(e,t,a){"use strict";function n(e,t){var a=e+Math.random()*(t+1-e);return Math.floor(a)}function s(e){var t=parseInt(e/60),a=parseInt(e%60);return(t<10?"0"+t:t)+":"+(a%60<10?"0"+a:a)}function i(e,t,a,n,s){var i;if(i=e||document.getElementById(t)){var o=i.getContext("2d");i.width=i.getBoundingClientRect().width-88,i.height=i.getBoundingClientRect().height,o.clearRect(0,0,i.width,i.height),o.fillStyle=s,o.strokeStyle=s,a.slice().reverse(),a.map((function(e,t){var n=e/180;n=n>1?i.height-9:0===n?2:(i.height-9)*n,o.beginPath(),o.roundedRect(i.width-4*(a.length-t),i.height/2-n/2,1,n,1),o.stroke()}))}}function o(e){var t={},a=new(window.AudioContext||window.webkitAudioContext);return new Promise((function(n,s){fetch(e,{mode:"cors"}).then((function(e){return e.arrayBuffer()})).then(a.decodeAudioData.bind(a)).then((function(e){t.duration=e.duration;for(var a,s,i=e.getChannelData(0),o=[0],c=1;c<300;c++)a=c/300*i.length|0,s=Math.abs(r(i,a,8820))/40,o.push(100*s);t.recordLine=o,n(t)}))}))}function r(e,t,a){for(var n,s,i=0,o=t-a;o<=t;o++)i+=(s=o<0?0:e[o])*s;return n=Math.sqrt(i/a),20*Math.log10(n)}a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return s})),a.d(t,"d",(function(){return i})),a.d(t,"a",(function(){return o})),String.prototype.toTimer=function(){var e=parseInt(this,10),t=Math.floor(e/3600),a=Math.floor((e-3600*t)/60),n=e-3600*t-60*a;return a<10&&(a="0"+a),n<10&&(n="0"+n),a+":"+n},String.prototype.toHHMMSS=function(){var e=parseInt(this,10),t=Math.floor(e/3600),a=Math.floor((e-3600*t)/60),n=e-3600*t-60*a;return t<10&&(t="0"+t),a<10&&(a="0"+a),n<10&&(n="0"+n),t+a+":"+n},CanvasRenderingContext2D.prototype.roundedRect=function(e,t,a,n,s){this.save(),this.translate(e,t),this.moveTo(a/2,0),this.arcTo(a,0,a,n,Math.min(n/2,s)),this.arcTo(a,n,0,n,Math.min(a/2,s)),this.arcTo(0,n,0,0,Math.min(n/2,s)),this.arcTo(0,0,s,0,Math.min(a/2,s)),this.lineTo(a/2,0),this.restore()}},882:function(e,t,a){"use strict";a.r(t),a.d(t,"dialogsAllGet",(function(){return l})),a.d(t,"dialogsGet",(function(){return A})),a.d(t,"dialogGet",(function(){return d})),a.d(t,"dialogsLoad",(function(){return u})),a.d(t,"dialogLoad",(function(){return g})),a.d(t,"updateOnline",(function(){return p})),a.d(t,"retrySendMessage",(function(){return m})),a.d(t,"deleteLocalMessage",(function(){return h})),a.d(t,"sendMessage",(function(){return f})),a.d(t,"readMessages",(function(){return v})),a.d(t,"loadMessages",(function(){return y})),a.d(t,"dialogsOrderGet",(function(){return E})),a.d(t,"dialogOrderGet",(function(){return b})),a.d(t,"dialogOrderLoad",(function(){return C}));var n=a(2),s=a(12),i=a(879),o=a(55),r=a(26),c=a(17),l=function(e){return function(t){return new Promise((function(a,i){fetch("".concat(c.a.urlApi,"/api/dialogsOrder/getAllDialog"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).then((function(e){for(var i=function(t){var a=s.a.getState().dialogs.dialogsUser.dialogs.find((function(a){return a._id===e.dialogs[t]._id}));a&&(e.dialogs[t].messages=a.messages),e.dialogs[t].isGetted=!1,e.dialogs[t].canLoad=!0,e.dialogs[t].user=e.dialogs[t].users.find((function(e){return e._id!==s.a.getState().user._id})),e.dialogs[t].user||(e.dialogs[t].user=e.dialogs[t].users[0]),e.dialogs[t].typers=[]},o=0;o<e.dialogs.length;o++)i(o);t({type:n.T,payload:e}),a()}))}))}},A=function(e){return function(t){return new Promise((function(a,i){fetch("".concat(c.a.urlApi,"/api/dialog/get-all"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).then((function(e){for(var i=function(t){var a=s.a.getState().dialogs.dialogsUser.dialogs.find((function(a){return a._id===e.dialogs[t]._id}));a&&(e.dialogs[t].messages=a.messages),e.dialogs[t].isGetted=!1,e.dialogs[t].canLoad=!0,e.dialogs[t].user=e.dialogs[t].users.find((function(e){return e._id!==s.a.getState().user._id})),e.dialogs[t].user||(e.dialogs[t].user=e.dialogs[t].users[0]),e.dialogs[t].typers=[]},o=0;o<e.dialogs.length;o++)i(o);t({type:n.mb,payload:e}),a()}))}))}},d=function(e,t){return function(a){return new Promise((function(i,o){fetch("".concat(c.a.urlApi,"/api/dialog/get"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e})}).then((function(e){return e.json()})).then((function(t){var o=t.dialog,r=t.messages;if(o.error){var c={isGetted:!0,isNotFound:!0,user:{_id:e}};a({type:n.ib,payload:c}),i()}else o.user=o.users.find((function(e){return e._id!==s.a.getState().user._id})),o.user||(o.user=o.users[0]),o.typing=!1,o.isGetted=!0,o.messages=r.reverse(),o.lastMessage=!1,o.canLoad=50===r.length,o.isLoading=!1,a({type:n.ib,payload:{dialog:o}}),i()}))}))}},u=function(e,t){return function(a){var i;switch(e){case"all":a({type:n.V}),i=s.a.getState().dialogs.dialogsALL;break;case"order":a({type:n.eb}),i=s.a.getState().dialogs.dialogsOrder;break;case"user":a({type:n.qb}),i=s.a.getState().dialogs.dialogsUser}return new Promise((function(o,r){fetch("".concat(c.a.urlApi,"/api/dialog/load"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({type:e,lastDialogId:i.dialogs[i.dialogs.length-1]._id})}).then((function(e){return e.json()})).then((function(t){for(var i=t.dialogs,r=0;r<i.length;r++)i[r].isGetted=!1,i[r].canLoad=!0,i[r].user=i[r].users.find((function(e){return e._id!==s.a.getState().user._id})),i[r].user||(i[r].user=i[r].users[0]),i[r].typers=[];"order"===e?a({type:n.bb,payload:{dialogs:i}}):"user"===e?a({type:n.nb,payload:{dialogs:i}}):"all"===e&&a({type:n.U,payload:{dialogs:i}}),o()}))}))}},g=function(e,t){return function(a){return new Promise((function(s,i){fetch("".concat(c.a.urlApi,"/api/dialog/get"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e})}).then((function(e){return e.json()})).then((function(e){var t=e.dialog,i=e.messages;t.messages=i.reverse(),a({type:n.vb,payload:{dialogId:t._id,messages:t.messages,canLoad:50===i.length}}),s()}))}))}},p=function(e,t,a){return function(s){var i=a?n.hb:n.ub;fetch("".concat(c.a.urlApi,"/api/user/get-online"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e})}).then((function(e){return e.json()})).then((function(t){var a=t.online,n=t.onlineAt;s({type:i,payload:{userId:e,online:a,onlineAt:n}})}))}},m=function(e,t,a){return function(i){var r=a?n.Y:n.kb,l=a?n.X:n.jb,A=a?n.Z:n.lb,d=a?n.gb:n.tb,u=e.dialogId,g=new FormData,p=!1;e.voiceSound&&(g.append("voiceSound",e.voiceSound.file),g.append("voiceSoundDuration",e.voiceSound.duration),g.append("voiceSoundRecordLine",e.voiceSound.recordLine),p=e.voiceSound),g.append("images",JSON.stringify(e.images)),g.append("files",JSON.stringify(e.files)),g.append("sounds",JSON.stringify(e.sounds));var m={_id:e._id,user:s.a.getState().user,text:e.text,images:e.images,sounds:e.sounds,files:e.files,voiceSound:p,isLoading:!0,isError:!1,recentMessage:e.recentMessage,createdAt:Date.now(),type:"message"};i({type:r,payload:{dialogId:u,messageIds:[e._id],lastMessage:!1}}),i({type:l,payload:{message:m,dialogId:e.dialogId}}),e.socketId=o.a.getSocketId(),g.append("text",e.text),g.append("recentMessages",e.recentMessages),g.append("userId",e.userId),g.append("dialog",e.dialogId),g.append("socketId",o.a.getSocketId()),fetch("".concat(c.a.urlApi,"/api/dialog/send-message"),{method:"post",headers:{Authorization:"Bearer ".concat(t)},body:g}).then((function(e){return e.json()})).then((function(t){if(t.error)return i({type:A,payload:{_id:e._id,dialogId:e.dialogId,voiceSound:e.voiceSound}});i({type:d,payload:{_id:e._id,_newId:t._id,dialogId:e.dialogId}})})).catch((function(){i({type:A,payload:{_id:e._id,dialogId:e.dialogId}})}))}},h=function(e,t,a){return function(i){var o,r=[e],c=a?s.a.getState().dialogs.dialogsOrder:s.a.getState().dialogs.dialogsUser;o=!(!c.dialogs.find((function(e){return e._id===t}))||!c.dialogs.find((function(e){return e._id===t})).messages.length)&&c.dialogs.find((function(e){return e._id===t})).messages.filter((function(e){return!r.find((function(t){return t===e._id}))})).pop(),i({type:n.kb,payload:{dialogId:t,messageIds:r,lastMessage:o}})}},f=function(e,t,a){return function(l){var A=a?n.X:n.jb,d=a?n.Z:n.lb,u=a?n.gb:n.tb,g=new FormData,p=Object(i.c)(0,1e6),m=!1;g.append("images",JSON.stringify(e.images)),g.append("files",JSON.stringify(e.files)),g.append("sounds",JSON.stringify(e.sounds)),e.voiceSound&&(g.append("voiceSound",e.voiceSound.file),g.append("voiceSoundDuration",e.voiceSound.duration),g.append("voiceSoundRecordLine",e.voiceSound.recordLine),m=e.voiceSound);var h={_id:p,user:s.a.getState().user,text:e.text,images:e.images,sounds:e.sounds,files:e.files,voiceSound:m,isLoading:!0,isError:!1,isRead:!1,recentMessage:e.recentMessage,createdAt:Date.now(),type:"message"};l({type:A,payload:{message:h,dialogId:e.dialogId}}),e.socketId=o.a.getSocketId(),g.append("text",e.text),g.append("recentMessage",e.recentMessage._id),g.append("dialog",e.dialogId),g.append("userId",e.userId),g.append("socketId",o.a.getSocketId()),fetch("".concat(c.a.urlApi,"/api/dialog/send-message"),{method:"post",headers:{Authorization:"Bearer ".concat(t)},body:g}).then((function(e){return e.json()})).then((function(t){if(t.error)return"max_size"===t.errors[0].msg&&r.b.error("Max file size upload 10 Mb.",{position:r.b.POSITION.TOP_CENTER}),l({type:d,payload:{_id:p,dialogId:e.dialogId}});l({type:u,payload:{_id:p,_newId:t._id,dialogId:e.dialogId,voiceSound:e.voiceSound}})})).catch((function(){l({type:d,payload:{_id:p,dialogId:e.dialogId}})}))}},v=function(e,t,a){var i=e.dialogId,r=e.userId,l=e.otherId;return function(e){var A=a?n.db:n.pb,d=(a?s.a.getState().dialogs.dialogsOrder:s.a.getState().dialogs.dialogsUser).dialogs.find((function(e){return e._id===i})).messages.filter((function(e){return!e.isRead&&e.user._id!==r}));setTimeout((function(){d.length&&e({type:A,payload:{dialogId:i,userId:l,noRead:!0,noReadCount:!0}})}),1),d.length&&fetch("".concat(c.a.urlApi,"/api/dialog/read-messages"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({dialogId:i,otherId:l,socketId:o.a.getSocketId()})}).then().catch((function(){}))}},y=function(e,t,a){var i=e.dialogId;return function(e){var o=a?n.cb:n.ob,r=a?n.Q:n.wb,l=a?s.a.getState().dialogs.dialogsOrder:s.a.getState().dialogs.dialogsUser;return new Promise((function(a,n){var s=l.dialogs.find((function(e){return e._id===i})).messages[0];e({type:r,payload:i}),fetch("".concat(c.a.urlApi,"/api/dialog/load-messages"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({dialogId:i,lastMessageId:s._id})}).then((function(e){return e.json()})).then((function(t){e({type:o,payload:{dialogId:i,messages:t.reverse(),canLoad:50===t.length}}),a()})).catch((function(){}))}))}},E=function(e){return function(t){fetch("".concat(c.a.urlApi,"/api/dialogsOrder/get-all"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).then((function(e){for(var a=function(t){var a=s.a.getState().dialogs.dialogsOrder.dialogs.find((function(a){return a._id===e.dialogs[t]._id}));a&&(e.dialogs[t].messages=a.messages),e.dialogs[t].isGetted=!1,e.dialogs[t].canLoad=!0,e.dialogs[t].user=e.dialogs[t].users.find((function(e){return e._id!==s.a.getState().user._id})),e.dialogs[t].user||(e.dialogs[t].user=e.dialogs[t].users[0]),e.dialogs[t].typers=[]},i=0;i<e.dialogs.length;i++)a(i);t({type:n.ab,payload:e})}))}},b=function(e,t,a){return function(i){return new Promise((function(o,r){fetch("".concat(c.a.urlApi,"/api/dialogsOrder/get"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({userId:e,orderId:t})}).then((function(e){return e.json()})).then((function(t){var a=t.dialog,r=t.messages;if(a.error){var c={isGetted:!0,isNotFound:!0,user:{_id:e}};i({type:n.W,payload:{dialog:c}}),o()}else a.user=a.users.find((function(e){return e._id!==s.a.getState().user._id})),a.user||(a.user=a.users[0]),a.typing=!1,a.isGetted=!0,a.messages=r.reverse(),a.lastMessage=!1,a.canLoad=50===r.length,a.isLoading=!1,i({type:n.W,payload:{dialog:a}}),o()}))}))}},C=function(e,t,a){return function(s){fetch("".concat(c.a.urlApi,"/api/dialogsOrder/get"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({userId:e,orderId:t})}).then((function(e){return e.json()})).then((function(e){var t=e.dialog,a=e.messages;t.messages=a.reverse(),s({type:n.P,payload:{dialogId:t._id,messages:t.messages,canLoad:50===a.length}})}))}}},885:function(e,t,a){e.exports=a.p+"static/media/attachDelete.661f2d69.svg"},889:function(e,t){e.exports="data:image/gif;base64,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"},890:function(e,t,a){e.exports=a.p+"static/media/document.26436f4e.svg"},892:function(e,t,a){"use strict";var n=a(16),s=a(287),i=a.n(s),o=a(304),r=a(1),c=a(6),l=a(7),A=a(9),d=a(8),u=a(0),g=a.n(u),p=a(140),m=function(e){Object(A.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return g.a.createElement("div",{className:"time-tag d-flex"},g.a.createElement("div",{className:"col"}),g.a.createElement("span",null,this.props.date),g.a.createElement("div",{className:"col"}))}}]),a}(g.a.Component),h=a(302),f=a(888);function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function y(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}var E=g.a.createElement("circle",{cx:16,cy:16,r:15.5,stroke:"#909090"}),b=g.a.createElement("path",{d:"M23.6285 15.9005C23.7196 15.3063 23.3811 14.7095 22.7188 14.3107L13.876 8.98374C13.2704 8.61964 12.6748 8.56405 12.199 8.8276C11.7191 9.0933 11.4466 9.63461 11.4318 10.3519L11.3216 15.6253L11.2158 20.7004C11.2037 21.2642 11.357 21.7276 11.6583 22.0405C12.1256 22.5258 12.853 22.5668 13.6051 22.1509L22.6533 17.1286C23.208 16.8215 23.5545 16.3855 23.6285 15.9005Z",fill:"#909090"}),C=function(e){var t=e.svgRef,a=e.title,n=y(e,["svgRef","title"]);return g.a.createElement("svg",v({width:32,height:32,viewBox:"0 0 32 32",fill:"none",ref:t},n),a?g.a.createElement("title",null,a):null,E,b)},w=g.a.forwardRef((function(e,t){return g.a.createElement(C,v({svgRef:t},e))}));a.p;function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function I(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}var O=g.a.createElement("circle",{cx:16,cy:16,r:15.5,stroke:"#A038E3"}),k=g.a.createElement("rect",{x:10,y:9,width:5,height:14,rx:2.5,fill:"#A038E3"}),B=g.a.createElement("rect",{x:17,y:9,width:5,height:14,rx:2.5,fill:"#A038E3"}),M=function(e){var t=e.svgRef,a=e.title,n=I(e,["svgRef","title"]);return g.a.createElement("svg",S({width:32,height:32,viewBox:"0 0 32 32",fill:"none",ref:t},n),a?g.a.createElement("title",null,a):null,O,k,B)},j=g.a.forwardRef((function(e,t){return g.a.createElement(M,S({svgRef:t},e))})),R=(a.p,a(879)),N=a(889),T=a.n(N),L=function(e){Object(A.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={width:!1,height:!1},e.updateDimensions=function(){e.setState({width:document.getElementById(e.props.id).clientWidth,height:document.getElementById(e.props.id).clientHeight})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.updateDimensions(),window.addEventListener("resize",this.updateDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions)}},{key:"render",value:function(){var e=this,t=this.state.width,a=this.state.height,s=this.props.RecordLine.filter((function(e){return"Infinity"!=e}));if(this.props.isAdaptive){var i=t/3,o=Math.abs(s.length-i);if(s.length>i){var r;r=Math.floor(s.length/o);var c=s.length;s.length>i&&(s=s.filter((function(e,t,a){return!r||t%r!=0||c<=i||(c--,!1)})))}else if(s.length<i)for(var l=Math.ceil(1/(s.length/o)),A=0;A<s.length&&s.length<i;A++){for(var d=[],u=0;u<l&&s.length+d.length<i;u++)d[u]=s[A];s=[].concat(Object(n.a)(s.slice(0,A)),d,Object(n.a)(s.slice(A))),A+=d.length}}var p=this.props.percentTime*s.length,m=Math.max.apply(null,s);return g.a.createElement("svg",{id:this.props.id,onClick:function(t){e.props.onClick(t,e.state.width)}},s.map((function(n,i,o){var r=n/m*e.state.height;return r||(r=1),g.a.createElement("rect",{key:i,x:t-3*(s.length-i),y:a/2-r/2,height:r,width:2,rx:"2",fill:"".concat(i<p?"#9509EF":"#909090")})})))}}]),a}(g.a.Component),x=function(e){Object(A.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={currentTime:0,audio:!1,randomId:Object(R.c)(0,1e7)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e,t=this,a=document.getElementsByName(this.props.sound.path),n=Object(f.a)(a);try{for(n.s();!(e=n.n()).done;){var s=e.value;s.volume=.5,this.setState({audio:s});break}}catch(o){n.e(o)}finally{n.f()}var i=document.getElementById(this.state.randomId);i.onpause=function(e){i.parentElement.className="message-sound"},i.onplay=function(){i.parentElement.className="message-sound active"},i.ontimeupdate=function(e){t.setState({currentTime:e.target.currentTime})}}},{key:"componentWillUnmount",value:function(){document.getElementsByName(this.props.sound.path)&&(document.getElementsByName(this.props.sound.path).className="message-sound",this.state.audio&&this.state.audio.pause())}},{key:"playAudio",value:function(e){if(e.stopPropagation(),!this.props.isLoading){var t,a=document.getElementsByClassName("message-sounds-element"),n=Object(f.a)(a);try{for(n.s();!(t=n.n()).done;){t.value.pause()}}catch(r){n.e(r)}finally{n.f()}var s,i=document.getElementsByName(this.props.sound.path),o=Object(f.a)(i);try{for(o.s();!(s=o.n()).done;){s.value.play()}}catch(r){o.e(r)}finally{o.f()}}}},{key:"changeDurationAudio",value:function(e,t){e.stopPropagation();var a,n=(e.nativeEvent.layerX-40)/t,s=this.state.audio.duration*n,i=document.getElementsByName(this.props.sound.path),o=Object(f.a)(i);try{for(o.s();!(a=o.n()).done;){a.value.currentTime=s}}catch(r){o.e(r)}finally{o.f()}}},{key:"stopAudio",value:function(e){e.stopPropagation();var t,a=document.getElementsByName(this.props.sound.path),n=Object(f.a)(a);try{for(n.s();!(t=n.n()).done;){t.value.pause()}}catch(s){n.e(s)}finally{n.f()}}},{key:"render",value:function(){var e=this;return g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{className:"message-sound ".concat(this.props.isLoading?"d-none":"")},g.a.createElement("audio",{preload:"metadata",className:"message-sounds-element",id:this.state.randomId,name:this.props.sound.path,src:this.props.sound.path}),g.a.createElement("span",{className:"play",onClick:function(t){e.playAudio(t)}},g.a.createElement(w,{style:{color:"#008FF7"}})),g.a.createElement("span",{className:"pause",onClick:function(t){e.stopAudio(t)}},g.a.createElement(j,{style:{color:"#008FF7"}})),!this.props.isLoading&&g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{className:"message-sound-info"},g.a.createElement("div",{className:"svg-wrapper"},g.a.createElement(L,{className:"sound-canvas",onClick:this.changeDurationAudio.bind(this),percentTime:this.state.currentTime/this.props.sound.duration,isAdaptive:!0,RecordLine:this.props.sound.recordLine,id:"svg-".concat(this.props.sound.path)})),!this.props.isVoiceSound&&g.a.createElement("p",{className:"message-sounds-name"},this.props.sound.name),g.a.createElement("p",{className:"message-sounds-duration"},this.state.currentTime?Object(R.b)(this.state.currentTime):Object(R.b)(this.props.sound.duration))))),this.props.isLoading&&g.a.createElement("img",{src:T.a,alt:""}))}}]),a}(g.a.Component),D=a(420);function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Q(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}var F=g.a.createElement("path",{d:"M17.9985 8.59543C17.9985 5.53486 15.2997 3.06483 11.9603 3.06483H3.22644L5.39288 1.02208L4.21991 0L0.586486 3.33028L0 3.92082L0.586486 4.40347L4.33752 7.78911L5.51049 6.77129L3.10729 4.56388H11.9603C14.4238 4.56388 16.2947 6.33833 16.2947 8.59543V10.8H18V8.59543H17.9985Z",fill:"#DDDDDD"}),U=function(e){var t=e.svgRef,a=e.title,n=Q(e,["svgRef","title"]);return g.a.createElement("svg",G({width:24,height:17,viewBox:"0 0 18 11",fill:"none",ref:t},n),a?g.a.createElement("title",null,a):null,F)},P=g.a.forwardRef((function(e,t){return g.a.createElement(U,G({svgRef:t},e))})),Y=(a.p,function(e){Object(A.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return g.a.createElement("div",{className:"recentMessage",onClick:function(){e.props.scrollTo(e.props.message._id)}},g.a.createElement("div",{className:"recentContent"},g.a.createElement("div",{className:"name"},this.props.message.user.name.middle," ",this.props.message.user.name.first),g.a.createElement("div",{className:"message-content"},this.props.message.text,this.props.message.voiceSound&&g.a.createElement("div",null,"\u0410\u0443\u0434\u0438\u043e\u0437\u0430\u043f\u0438\u0441\u044c"),(!!this.props.message.images.length||!!this.props.message.files.length||!!this.props.message.sounds.length)&&g.a.createElement("div",null,"\u0412\u043b\u043e\u0436\u0435\u043d\u0438\u044f"))))}}]),a}(g.a.Component)),J=a(890),H=a.n(J),Z=function(e){Object(A.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={isSelected:!1},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(){this.props.scrollingMessage===this.props.message._id?this.setState({isSelected:!0}):this.setState({isSelected:!1})}},{key:"shouldComponentUpdate",value:function(e,t){return JSON.stringify(e.message)!==JSON.stringify(this.props.message)}},{key:"render",value:function(){var e=this,t=!0,a=!1;if(this.props.prevMessage){var n=new Date(this.props.message.createdAt),s=new Date(this.props.prevMessage.createdAt);n.getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()&&n.getDate()===s.getDate()&&(t=!1),Math.abs(n-s)/36e5>1&&(a=!0)}var i=this.props.user._id==this.props.message.user._id,o=this.props.prevMessage&&this.props.prevMessage.user._id!==this.props.message.user._id||!this.props.prevMessage||a,r=(o||t)&&!this.props.isRecent;return g.a.createElement(g.a.Fragment,null,t&&g.a.createElement(m,{date:Object(h.e)(new Date(this.props.message.createdAt))}),g.a.createElement("div",{id:"message".concat(this.props.message._id),className:"messages-block ".concat(r?"padding":""," ").concat(i?"my":"not-my"," ").concat(this.props.message.isRead?"":"unread"," ").concat(this.state.isSelected?"selected":"")},g.a.createElement("div",{className:"avatar-message d-flex"},(o||t)&&!this.props.isRecent&&g.a.createElement(p.a,{name:this.props.message.user.name.first.charAt(0)+this.props.message.user.name.last.charAt(0)})),g.a.createElement("div",{className:"col dialog-content"},g.a.createElement("div",{className:"head-message"},r&&g.a.createElement("span",{className:"name"},this.props.message.user.name.first),r&&g.a.createElement("span",{className:"time"},Object(h.c)(this.props.message.createdAt))),g.a.createElement("div",{className:"message-content"},this.props.message.text,this.props.message.voiceSound&&g.a.createElement(x,{duration:this.props.message.voiceSound.duration,sound:this.props.message.voiceSound,isVoiceSound:!0,isLoading:this.props.message.isLoading}),this.props.message.sounds.map((function(e,t){return g.a.createElement(x,{key:t,sound:e})})),!!this.props.message.images.length&&g.a.createElement("div",{className:"message-images ".concat(this.props.message.images.length>=3?"more":"","\n                  ").concat(1===this.props.message.images.length?"one":"","\n                  ").concat(2===this.props.message.images.length?"two":"")},this.props.message.images.map((function(t,a,n){var s=!1;return n.length>4&&3===a&&(s=!0),a>3?null:s?g.a.createElement("div",{key:a,className:"image",onClick:function(){e.props.addImageToFancyBox(n,a)}},g.a.createElement("div",{className:"image-blur"},g.a.createElement("span",null,"+".concat(n.length-3)),g.a.createElement("img",{key:a,src:t.path,alt:t.name}))):g.a.createElement("div",{key:a,className:"image",onClick:function(){e.props.addImageToFancyBox(n,a)}},g.a.createElement("img",{src:t.path,alt:t.name}))}))),!!this.props.message.files.length&&g.a.createElement("div",{className:"message-files"},this.props.message.files.map((function(e,t){return g.a.createElement("div",{key:t,className:"message-file"},g.a.createElement("img",{src:H.a,alt:""}),g.a.createElement("div",{className:"file-info"},g.a.createElement("div",{className:"name"},e.name),g.a.createElement("div",{className:"size"},e.size>1048576?Math.floor(e.size/1048576)+"\u041c\u0431.":Math.floor(e.size/1024)+"\u041a\u0431.")),g.a.createElement("a",{className:"sharected-link",href:e.path}))}))),this.props.message.recentMessage&&g.a.createElement(Y,{scrollTo:function(t){e.props.scrollTo(t)},message:this.props.message.recentMessage}),!this.props.message.isError&&!i&&!this.props.isRecent&&g.a.createElement("span",{className:"reply-message",onClick:function(){e.props.setRecentMessage(e.props.message)}},g.a.createElement(P,null)))),this.props.message.isError&&g.a.createElement("span",{className:"error-retry"},g.a.createElement(D.a,null),g.a.createElement("div",{className:"action-menu"},g.a.createElement("div",{onClick:function(){e.props.retrySendMessage(e.props.message)}},"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u043f\u043e\u043f\u044b\u0442\u043a\u0443"),g.a.createElement("div",{onClick:function(){e.props.deleteLocalMessage(e.props.message._id)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))))}}]),a}(g.a.Component),z=a(185),K=a(37),W=a(55),V=function(e){Object(A.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={currentTime:0,audio:!1,randomId:Object(R.c)(0,1e7)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e,t=this,a=document.getElementsByName(this.props.sound.path),n=Object(f.a)(a);try{for(n.s();!(e=n.n()).done;){var s=e.value;s.volume=.5,this.setState({audio:s});break}}catch(o){n.e(o)}finally{n.f()}var i=document.getElementById(this.state.randomId);i.onpause=function(e){i.parentElement.className="voice-sound"},i.onplay=function(){i.parentElement.className="voice-sound active"},i.ontimeupdate=function(e){t.setState({currentTime:e.target.currentTime})}}},{key:"componentWillUnmount",value:function(){document.getElementsByName(this.props.sound.path)&&(document.getElementsByName(this.props.sound.path).className="message-sound",this.state.audio&&this.state.audio.pause())}},{key:"playAudio",value:function(e){if(e.stopPropagation(),!this.props.isLoading){var t,a=document.getElementsByClassName("message-sounds-element"),n=Object(f.a)(a);try{for(n.s();!(t=n.n()).done;){t.value.pause()}}catch(r){n.e(r)}finally{n.f()}var s,i=document.getElementsByName(this.props.sound.path),o=Object(f.a)(i);try{for(o.s();!(s=o.n()).done;){s.value.play()}}catch(r){o.e(r)}finally{o.f()}}}},{key:"changeDurationAudio",value:function(e,t){e.stopPropagation();var a,n=(e.nativeEvent.layerX-40)/t,s=this.state.audio.duration*n,i=document.getElementsByName(this.props.sound.path),o=Object(f.a)(i);try{for(o.s();!(a=o.n()).done;){a.value.currentTime=s}}catch(r){o.e(r)}finally{o.f()}}},{key:"stopAudio",value:function(e){e.stopPropagation();var t,a=document.getElementsByName(this.props.sound.path),n=Object(f.a)(a);try{for(n.s();!(t=n.n()).done;){t.value.pause()}}catch(s){n.e(s)}finally{n.f()}}},{key:"render",value:function(){var e=this;return g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{className:"voice-sound"},g.a.createElement("audio",{preload:"metadata",className:"message-sounds-element",id:this.state.randomId,name:this.props.sound.path,src:this.props.sound.path}),g.a.createElement("span",{className:"play",onClick:function(t){e.playAudio(t)}},g.a.createElement(w,{style:{color:"#008FF7"}})),g.a.createElement("span",{className:"pause",onClick:function(t){e.stopAudio(t)}},g.a.createElement(j,{style:{color:"#008FF7"}})),g.a.createElement("div",{className:"svg-wrapper"},g.a.createElement(L,{className:"sound-canvas",onClick:this.changeDurationAudio.bind(this),percentTime:this.state.currentTime/this.props.sound.duration,isAdaptive:!0,RecordLine:this.props.sound.recordLine,id:"svg-".concat(this.props.sound.path)})),g.a.createElement("p",{className:"voice-sounds-duration"},this.state.currentTime?Object(R.b)(this.state.currentTime):Object(R.b)(this.props.sound.duration))))}}]),a}(g.a.Component);function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function X(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}var _=g.a.createElement("g",{fill:"none",fillRule:"evenodd",strokeWidth:1.5},g.a.createElement("path",{d:"m16 20h24v24h-24z",opacity:.4}),g.a.createElement("g",{stroke:"#b1bbc8",strokeLinecap:"round",strokeWidth:2.5},g.a.createElement("path",{d:"m22.5 26.5 11 11"}),g.a.createElement("path",{d:"m33.5 26.5-11 11"}))),$=function(e){var t=e.svgRef,a=e.title,n=X(e,["svgRef","title"]);return g.a.createElement("svg",q({height:24,viewBox:"16 20 24 24",width:24,ref:t},n),a?g.a.createElement("title",null,a):null,_)},ee=g.a.forwardRef((function(e,t){return g.a.createElement($,q({svgRef:t},e))}));a.p;function te(){return(te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ae(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}var ne=g.a.createElement("circle",{cx:16,cy:16,r:15.5,stroke:"#9509EF"}),se=g.a.createElement("rect",{x:9,y:9,width:14,height:14,rx:3,fill:"#A038E3"}),ie=function(e){var t=e.svgRef,a=e.title,n=ae(e,["svgRef","title"]);return g.a.createElement("svg",te({width:32,height:32,viewBox:"0 0 32 32",fill:"none",ref:t},n),a?g.a.createElement("title",null,a):null,ne,se)},oe=g.a.forwardRef((function(e,t){return g.a.createElement(ie,te({svgRef:t},e))}));a.p;function re(){return(re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ce(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}var le,Ae,de,ue,ge,pe,me=g.a.createElement("path",{d:"M23.6758 13.6758C23.8439 12.5664 23.2095 11.4504 21.9712 10.7031L5.43795 0.721671C4.30568 0.0394166 3.19317 -0.0665433 2.30548 0.42399C1.41024 0.918528 0.903371 1.92861 0.878254 3.26826L0.691553 13.1176L0.512155 22.5963C0.491641 23.6493 0.779634 24.5155 1.34335 25.101C2.2178 26.0092 3.57634 26.0883 4.97953 25.3142L21.859 15.9661C22.8939 15.3946 23.5394 14.5815 23.6758 13.6758V13.6758ZM21.1025 14.5975L4.22219 23.9453C3.86511 24.1421 2.97826 24.5444 2.46958 24.0161C2.20332 23.7395 2.06282 23.2458 2.07513 22.6256L2.23998 13.9288L8.88516 14.0545C8.98891 14.0582 9.09238 14.0413 9.18952 14.0046C9.28666 13.968 9.37553 13.9124 9.45094 13.841C9.52636 13.7697 9.5868 13.684 9.62876 13.589C9.67071 13.4941 9.69333 13.3917 9.6953 13.2879C9.69727 13.1841 9.67854 13.0809 9.64022 12.9845C9.60189 12.888 9.54474 12.8001 9.47208 12.7259C9.39942 12.6518 9.31273 12.5928 9.21705 12.5525C9.12136 12.5122 9.01861 12.4914 8.91479 12.4912L2.26961 12.3656L2.44122 3.29815C2.45537 2.55135 2.68143 2.00266 3.06116 1.79281C3.43389 1.58698 4.00602 1.68464 4.63011 2.06115L21.1636 12.0428C21.3767 12.1681 21.5726 12.3204 21.7464 12.496C21.9541 12.7117 22.1891 13.0504 22.1297 13.4425C22.0674 13.8563 21.7026 14.2661 21.1025 14.5975V14.5975Z",fill:"#909090"}),he=function(e){var t=e.svgRef,a=e.title,n=ce(e,["svgRef","title"]);return g.a.createElement("svg",re({width:24,height:26,viewBox:"0 0 24 26",fill:"none",ref:t},n),a?g.a.createElement("title",null,a):null,me)},fe=g.a.forwardRef((function(e,t){return g.a.createElement(he,re({svgRef:t},e))})),ve=(a.p,a(212)),ye=(!!!document.documentMode&&window.StyleMedia,function(e){Object(A.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={isRecordPause:!1,isAudioPlay:!1,isSending:!1,RecordLine:[],countdown:0,audioSrc:!1},e}return Object(l.a)(a,[{key:"startTimer",value:function(){var e=this;this.timer=setInterval((function(){e.timer&&e.setState({countdown:++e.state.countdown})}),1e3)}},{key:"stopTimer",value:function(){clearInterval(this.timer),this.timer=!1}},{key:"recordStart",value:function(){var e=this;return new Promise((function(t,a){pe=new(window.AudioContext||window.webkitAudioContext),[],(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia).bind(navigator)({audio:!0,video:!1},(function(t){if(t){Ae=t,e.renderAudioVolume(Ae);var a=new MediaRecorder(t);(le=a).addEventListener("start",e.startTimer.bind(e)),le.addEventListener("pause",e.stopTimer.bind(e)),le.addEventListener("stop",e.stopTimer.bind(e)),le.start()}}),(function(t){e.props.stopRec()}))}))}},{key:"recordStop",value:function(){var e=this;return new Promise(function(){var t=Object(o.a)(i.a.mark((function t(a,n){var s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:!e.state.isRecordPause&&Ae?(s=function(t){e.props.addVoiceSound(t.data,e.state.countdown,e.state.RecordLine).then((function(){e.setState({isRecordPause:!0,audioSrc:URL.createObjectURL(t.data)}),a()}))},le.addEventListener("dataavailable",s),le&&le.stop(),le=!1,Ae&&(Ae.getAudioTracks()[0].stop(),Ae=!1),de&&(de.disconnect(ue),de.disconnect(ge)),de=!1,ge&&ge.disconnect(pe.destination),ge=!1,pe=!1):a();case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())}},{key:"componentWillUnmount",value:function(){this.recordStop()}},{key:"renderAudioVolume",value:function(e){var t=this;de=pe.createMediaStreamSource(e),ue=pe.createAnalyser(),(ge=pe.createScriptProcessor(4096,2,2)).connect(pe.destination),de.connect(ue),de.connect(ge);var a=new Uint8Array(ue.frequencyBinCount);ge.onaudioprocess=function(e){ue.getByteFrequencyData(a);for(var s=[],i=0;i<a.length;i++)s.push({arg:i,val:a[i]});t.setState({RecordLine:[].concat(Object(n.a)(t.state.RecordLine),[s[2].val])}),Object(R.d)(!1,"voice-canvas",t.state.RecordLine,!1,"#9933ff")}}},{key:"componentDidMount",value:function(){this.recordStart()}},{key:"render",value:function(){var e=this;return g.a.createElement(g.a.Fragment,null,g.a.createElement(ee,{className:"resetRecord",onClick:Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.recordStop().then(Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.stopRec();case 2:return t.next=4,e.props.addVoiceSound(!1);case 4:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t)})))}),g.a.createElement("div",{className:"input-chat"},!this.state.isRecordPause&&g.a.createElement(g.a.Fragment,null,g.a.createElement(oe,{onClick:function(){e.setState({isRecordPause:!0}),e.recordStop()},className:"RecordPauseStart"}),g.a.createElement("canvas",{id:"voice-canvas"}),g.a.createElement("div",{className:"timer"},String(this.state.countdown).toTimer())),this.state.isRecordPause&&this.state.audioSrc&&g.a.createElement(V,{sound:{duration:this.state.countdown,path:this.state.audioSrc,recordLine:this.state.RecordLine}})),!this.state.isSending&&g.a.createElement(fe,{className:"sendRecord",onClick:Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({isSending:!0}),e.recordStop().then(Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.sendMessage();case 2:return t.next=4,e.setState({isSending:!1});case 4:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})))}),this.state.isSending&&g.a.createElement(ve.a,null))}}]),a}(g.a.Component)),Ee=a(94),be=a(898);function Ce(){return(Ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function we(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}var Se=g.a.createElement("path",{d:"M7.57912 27C9.60522 27 11.5188 26.1634 12.9821 24.6496L17.7096 19.63C18.0473 19.2715 18.0473 18.6341 17.7096 18.2755C17.3719 17.917 16.7716 17.917 16.4339 18.2755L11.7064 23.2553C10.6183 24.4105 9.15498 25.048 7.57912 25.048C6.00326 25.048 4.57749 24.4105 3.45188 23.2553C2.32626 22.1 1.76346 20.5463 1.76346 18.8731C1.76346 17.1999 2.36379 15.6861 3.45188 14.491L14.1452 3.13722C14.9331 2.30063 15.9462 1.86241 17.0718 1.86241C18.1599 1.86241 19.2104 2.30063 19.9984 3.13722C20.7863 3.97381 21.199 5.04943 21.199 6.24456C21.199 7.39985 20.7863 8.51531 19.9984 9.3519L9.26754 20.7455C8.32953 21.7414 6.75367 21.7414 5.81566 20.7455C5.36542 20.2674 5.10277 19.5902 5.10277 18.9129C5.10277 18.2357 5.36542 17.5585 5.81566 17.0804L10.5808 12.021C10.9184 11.6625 10.9184 11.0251 10.5808 10.6665C10.2431 10.308 9.64274 10.308 9.30506 10.6665L4.57749 15.7259C3.78956 16.5625 3.33931 17.7178 3.33931 18.9129C3.33931 20.1081 3.78956 21.2634 4.57749 22.1C6.22838 23.8528 8.92985 23.8528 10.5808 22.1L21.2741 10.7462C22.3997 9.55109 23 7.99742 23 6.2844C23 4.57138 22.3997 3.01771 21.2741 1.82257C18.9853 -0.607525 15.1958 -0.607525 12.907 1.82257L2.2137 13.1763C0.787928 14.6902 0 16.7219 0 18.9129C0 21.0642 0.787928 23.0959 2.2137 24.6496C3.63948 26.1634 5.55302 27 7.57912 27Z",fill:"#909090"}),Ie=function(e){var t=e.svgRef,a=e.title,n=we(e,["svgRef","title"]);return g.a.createElement("svg",Ce({width:23,height:27,viewBox:"0 0 23 27",fill:"none",ref:t},n),a?g.a.createElement("title",null,a):null,Se)},Oe=g.a.forwardRef((function(e,t){return g.a.createElement(Ie,Ce({svgRef:t},e))}));a.p;function ke(){return(ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Be(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}var Me=g.a.createElement("path",{d:"M14.371 13.8571C13.2139 15.1429 11.671 15.7857 9.99959 15.7857C8.32816 15.7857 6.7853 15.0143 5.62816 13.8571C5.37102 13.6 5.37102 13.2143 5.62816 12.9571C5.8853 12.7 6.27102 12.7 6.52816 12.9571C7.42816 13.9857 8.71387 14.5 9.99959 14.5C11.2853 14.5 12.571 13.9857 13.3424 12.9571C13.5996 12.7 13.9853 12.7 14.2424 12.9571C14.4996 13.2143 14.4996 13.6 14.371 13.8571Z",fill:"#909090"}),je=g.a.createElement("path",{d:"M10 1C4.98571 1 1 4.98571 1 10C1 15.0143 4.98571 19 10 19C15.0143 19 19 15.0143 19 10C19 4.98571 15.0143 1 10 1ZM4.85714 7.42857C4.85714 6.65714 5.37143 6.14286 6.14286 6.14286C6.91429 6.14286 7.42857 6.65714 7.42857 7.42857C7.42857 8.2 6.91429 8.71429 6.14286 8.71429C5.37143 8.71429 4.85714 8.2 4.85714 7.42857ZM13.8571 8.71429C13.0857 8.71429 12.5714 8.2 12.5714 7.42857C12.5714 6.65714 13.0857 6.14286 13.8571 6.14286C14.6286 6.14286 15.1429 6.65714 15.1429 7.42857C15.1429 8.2 14.5 8.71429 13.8571 8.71429Z",stroke:"#909090",strokeMiterlimit:10}),Re=function(e){var t=e.svgRef,a=e.title,n=Be(e,["svgRef","title"]);return g.a.createElement("svg",ke({width:20,height:20,viewBox:"0 0 20 20",fill:"none",ref:t},n),a?g.a.createElement("title",null,a):null,Me,je)},Ne=g.a.forwardRef((function(e,t){return g.a.createElement(Re,ke({svgRef:t},e))}));a.p;function Te(){return(Te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Le(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}var xe=g.a.createElement("path",{d:"M0.791667 7.93436C0.581704 7.93436 0.38034 8.02325 0.231874 8.18148C0.0834077 8.33971 0 8.55431 0 8.77808L0.000791987 13.1317C0.0609587 18.3122 3.90212 22.5687 8.71467 22.9923C8.71387 23.0041 8.70833 23.0142 8.70833 23.026V25.3125H5.10942C4.89945 25.3125 4.69809 25.4014 4.54962 25.5597C4.40116 25.7179 4.31775 25.9325 4.31775 26.1563C4.31775 26.38 4.40116 26.5946 4.54962 26.7529C4.69809 26.9111 4.89945 27 5.10942 27H13.8906C14.1005 27 14.3019 26.9111 14.4504 26.7529C14.5988 26.5946 14.6823 26.38 14.6823 26.1563C14.6823 25.9325 14.5988 25.7179 14.4504 25.5597C14.3019 25.4014 14.1005 25.3125 13.8906 25.3125H10.2917V23.026C10.2917 23.0142 10.2861 23.0041 10.2853 22.9923C15.0789 22.5696 18.9185 18.3316 18.9984 13.1747L19 8.77808C19 8.55431 18.9166 8.33971 18.7681 8.18148C18.6197 8.02325 18.4183 7.93436 18.2083 7.93436C17.9984 7.93436 17.797 8.02325 17.6485 8.18148C17.5001 8.33971 17.4167 8.55431 17.4167 8.77808L17.4151 13.1469C17.3454 17.6684 13.7948 21.347 9.5 21.347C5.18779 21.347 1.63637 17.6524 1.58412 13.1131L1.58333 8.77808C1.58333 8.55431 1.49993 8.33971 1.35146 8.18148C1.20299 8.02325 1.00163 7.93436 0.791667 7.93436Z",fill:"#909090"}),De=g.a.createElement("path",{d:"M14.9631 13.0617V5.77023C14.9631 2.58854 12.5121 0 9.50059 0C6.48909 0 4.03809 2.58854 4.03809 5.77023V13.0617C4.03809 16.2434 6.48909 18.8319 9.50059 18.8319C12.5121 18.8319 14.9631 16.2434 14.9631 13.0617ZM5.62142 13.0617V5.77023C5.62142 3.51917 7.3615 1.68745 9.50059 1.68745C11.6397 1.68745 13.3798 3.51917 13.3798 5.77023V13.0617C13.3798 15.3127 11.6397 17.1445 9.50059 17.1445C7.3615 17.1445 5.62142 15.3127 5.62142 13.0617Z",fill:"#909090"}),Ge=function(e){var t=e.svgRef,a=e.title,n=Le(e,["svgRef","title"]);return g.a.createElement("svg",Te({width:19,height:27,viewBox:"0 0 19 27",fill:"none",ref:t},n),a?g.a.createElement("title",null,a):null,xe,De)},Qe=g.a.forwardRef((function(e,t){return g.a.createElement(Ge,Te({svgRef:t},e))})),Fe=(a.p,a(22)),Ue=function(e){Object(A.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={text:"",showEmoji:!1},e.showEmoji=e.showEmoji.bind(Object(Ee.a)(e)),e.hideEmoji=e.hideEmoji.bind(Object(Ee.a)(e)),e}return Object(l.a)(a,[{key:"setText",value:function(e){this.setState({text:e})}},{key:"showEmoji",value:function(){this.setState({showEmoji:!0}),document.addEventListener("click",this.hideEmoji)}},{key:"hideEmoji",value:function(e){e.target.closest(".emoji-mart")||(this.setState({showEmoji:!1}),document.removeEventListener("click",this.hideEmoji))}},{key:"render",value:function(){var e=this;return g.a.createElement(g.a.Fragment,null,g.a.createElement(Oe,{className:"addMoreAttach",onClick:function(){document.getElementById("uploadFile").click()}}),g.a.createElement("input",{type:"file",multiple:!0,hidden:!0,onChange:function(t){e.props.loadFiles(t)},id:"uploadFile",style:{display:"none"},accept:"image/jpeg,image/gif,image/jpeg,image/png,application/pdf,text/plain,application/x-zip-compressed,application/zip,application/msword,audio/mpeg"}),g.a.createElement("div",{className:"input-chat"},g.a.createElement("textarea",{className:"input-message",id:"input-message",onKeyDown:function(t){13!==t.keyCode||t.shiftKey||(t.preventDefault(),document.getElementById("input-message").style.maxHeight="48px",e.props.sendMessage(e.state.text))},onInput:function(){var e=document.getElementById("input-message");e.style.height="5px",e.style.height=e.scrollHeight+"px",e.scrollHeight>178?e.style.maxHeight="178px":e.style.maxHeight=e.scrollHeight+"px"},onChange:function(t){e.props.typing(t.target.value,e.state.text),e.setState({text:t.target.value})},value:this.state.text}),!this.state.text&&g.a.createElement("span",{className:"placeholder"},"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"),g.a.createElement(Ne,{onClick:this.showEmoji,className:"smiles"}),g.a.createElement(K.CSSTransitionGroup,{transitionName:"emoji-animation-item",transitionEnterTimeout:100,transitionLeaveTimeout:100,style:{display:"contents"}},this.state.showEmoji&&g.a.createElement(be.a,{showPreview:!1,onClick:function(t,a){e.setState({text:e.state.text+t.native})},native:!0,showSearch:!1,showSkinTones:!1,i18n:Fe.a.localizateEmoji}))),g.a.createElement("div",{className:"sendAndMicro"},g.a.createElement(K.CSSTransitionGroup,{transitionName:"erase-animation-item",transitionEnterTimeout:100,transitionLeaveTimeout:100,style:{display:"contents"}},!this.state.text&&!this.props.isContent&&g.a.createElement(Qe,{onClick:this.props.recordStart}),(this.state.text||this.props.isContent)&&g.a.createElement(fe,{onClick:function(){document.getElementById("input-message").style.maxHeight="48px",e.props.sendMessage(e.state.text)}}))))}}]),a}(g.a.Component),Pe=a(895),Ye=a.n(Pe),Je=function(e){Object(A.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return g.a.createElement("div",{className:"progress-bar"},g.a.createElement("div",{className:"barLine",style:{backgroundImage:"url(".concat(Ye.a,")"),width:this.props.percent+"%"}}))}}]),a}(g.a.Component),He=a(303),Ze=a(26),ze=a(17),Ke=a(32),We=a(882),Ve=a(39),qe=a(248),Xe=a.n(qe),_e=a(896),$e=a.n(_e),et=a(885),tt=a.n(et),at=!!document.documentMode,nt=!at&&!!window.StyleMedia,st=!1,it=!1,ot=function(e){Object(A.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return g.a.createElement("div",{id:"scroll-to-bottom",className:"scroll-to-bottom",onClick:function(){e.props.scrollToBottom()}},g.a.createElement("img",{src:Xe.a,alt:"ArrowDown"}))}}]),a}(g.a.Component),rt=function(e){Object(A.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={scrollTop:0,canTyping:!0,voiceSound:!1,isRecord:!1,setCordMessageScroll:!1,recentMessage:!1,sounds:[],files:[],images:[],loadingFiles:[],dataFancybox:{images:!1,index:!1}},n.inputPanel=g.a.createRef(),n.activePage=!1,n.canLoadAttach=!0,n}return Object(l.a)(a,[{key:"onScroll",value:function(){var e=this.messagesBlock.getScrollHeight()-this.messagesBlock.getScrollTop();this.setState({scrollTop:e}),document.getElementById("load-message-gif").style.top=this.messagesBlock.getScrollTop()+"px",this.messagesBlock.getScrollTop()+this.messagesBlock.getClientHeight()<this.messagesBlock.getScrollHeight()-100?document.getElementById("scroll-to-bottom").classList.contains("active")||document.getElementById("scroll-to-bottom").classList.add("active"):document.getElementById("scroll-to-bottom").classList.contains("active")&&(document.getElementById("scroll-to-bottom").classList.remove("active"),this.props.unRead&&this.readMessages()),this.props.dialog.canLoad&&this.messagesBlock.getScrollTop()<100&&this.loadMessages()}},{key:"scrollToBottom",value:function(){this.messagesBlock&&(nt||at?this.messagesBlock.view.scrollTop=1e5:this.messagesBlock.view.scroll({top:1e5,left:0,behavior:"smooth"}))}},{key:"loadToVictory",value:function(e){var t=this;this.loadMessages(!1).then((function(){t.scrollTo(e)}))}},{key:"scrollTo",value:function(e){var t=this,a=document.getElementById("message"+e);if(a){var n=a.offsetTop;this.setState({setCordMessageScroll:e}),setTimeout((function(){t.setState({setCordMessageScroll:!1})}),5e3),this.messagesBlock&&(nt||at?this.messagesBlock.view.scrollTop=n:this.messagesBlock.view.scroll({top:n,left:0,behavior:"smooth"}),document.getElementById("load-message-gif").classList.remove("active"))}else document.getElementById("load-message-gif").classList.contains("active")||document.getElementById("load-message-gif").classList.add("active"),this.loadToVictory(e)}},{key:"shouldComponentUpdate",value:function(e,t){return t.scrollTop===this.state.scrollTop}},{key:"focusPage",value:function(){var e,t=this;e=!(this.messagesBlock&&this.messagesBlock.getScrollTop()+this.messagesBlock.getClientHeight()<this.messagesBlock.getScrollHeight()),!this.activePage&&e&&this.props.unRead.length&&(st&&clearTimeout(st),this.readMessages(),this.activePage=!0,st=setTimeout((function(){t.activePage=!1}),3e3))}},{key:"blurPage",value:function(){this.activePage=!1}},{key:"componentDidMount",value:function(){window.addEventListener("blur",this.blurPage.bind(this)),window.addEventListener("mousemove",this.focusPage.bind(this)),this.messagesBlock&&(this.messagesBlock.view.scrollTop=1e5);var e=Object(r.a)({},JSON.parse(localStorage.getItem("drafts")));e["draft-"+this.props.dialog._id]&&this.inputPanel.current.setText(e["draft-"+this.props.dialog._id])}},{key:"componentDidUpdate",value:function(e){e.dialog.messages.length<this.props.dialog.messages.length&&JSON.stringify(e.dialog.messages[0])===JSON.stringify(this.props.dialog.messages[0])&&(this.messagesBlock.getScrollHeight()-this.messagesBlock.getScrollTop()<this.messagesBlock.getClientHeight()+200||e.dialog.messages[e.dialog.messages.length-1].user._id===this.props.user._id)&&(this.activePage&&this.readMessages(),this.scrollToBottom(),document.getElementById("scroll-to-bottom").classList.contains("active")&&document.getElementById("scroll-to-bottom").classList.remove("active")),JSON.stringify(e.dialog.messages[0])!==JSON.stringify(this.props.dialog.messages[0])&&(this.state.setCordMessageScroll?this.scrollToBottom():this.messagesBlock.scrollTop(this.messagesBlock.getScrollHeight()-this.state.scrollTop))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("blur",this.blurPage.bind(this)),window.removeEventListener("mousemove",this.focusPage.bind(this))}},{key:"loadMessages",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t&&document.getElementById("load-message-gif").classList.add("active"),new Promise((function(a,n){e.props.dialogsActions.loadMessages({dialogId:e.props.dialog._id},e.props.user.apiToken,!!e.props.dialog.orderId).then((function(){t&&document.getElementById("load-message-gif").classList.remove("active"),a()}))}))}},{key:"typing",value:function(e,t){var a=this;e>t&&(this.state.canTyping&&(this.setState({canTyping:!1}),W.a.typingDialog(this.props.dialog.user._id,this.props.user._id,!!this.props.dialog.orderId)),setTimeout((function(){a.setState({canTyping:!0})}),2500));var n=Object(r.a)({},JSON.parse(localStorage.getItem("drafts")));n["draft-"+this.props.dialogId]=e,n["draft-"+this.props.dialogId]&&/\S/.test(n["draft-"+this.props.dialogId])||delete n["draft-"+this.props.dialogId],localStorage.setItem("drafts",JSON.stringify(n))}},{key:"sendMessage",value:function(e){var t=this;return new Promise((function(a,n){if(/\S/.test(e)||t.state.images.length||t.state.files.length||t.state.sounds.length||t.state.voiceSound){var s=Object(r.a)({},JSON.parse(localStorage.getItem("drafts")));delete s["draft-"+t.props.dialog._id],localStorage.setItem("drafts",JSON.stringify(s)),t.props.dialogsActions.sendMessage({text:t.state.isRecord?"":e,userId:t.props.dialog.user._id,images:t.state.images,files:t.state.files,voiceSound:t.state.voiceSound,sounds:t.state.sounds,recentMessage:t.state.recentMessage,dialogId:t.props.dialog._id},t.props.user.apiToken,!!t.props.dialog.orderId),t.setState({images:[],sounds:[],files:[],voiceSound:!1,isRecord:!1,recentMessage:!1}),t.state.isRecord||t.inputPanel.current.setText("")}a()}))}},{key:"retrySendMessage",value:function(e){e.userId=this.props.dialog.user._id,e.dialogId=this.props.dialog._id,this.props.dialogsActions.retrySendMessage(e,this.props.user.apiToken,!!this.props.dialog.orderId)}},{key:"deleteLocalMessage",value:function(e){this.props.dialogsActions.deleteLocalMessage(e,this.props.dialog._id,!!this.props.dialog.orderId)}},{key:"setRecentMessage",value:function(e){this.setState({recentMessage:e})}},{key:"readMessages",value:function(){var e=this;it&&clearTimeout(it),it=setTimeout((function(){e.props.dialogsActions.readMessages({dialogId:e.props.dialog._id,otherId:e.props.dialog.user._id,userId:e.props.user._id},e.props.user.apiToken,!!e.props.dialog.orderId)}),100)}},{key:"addVoiceSound",value:function(){var e=Object(o.a)(i.a.mark((function e(t,a,n){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=!1,t&&(s={path:URL.createObjectURL(t),file:t,name:"\u0410\u0443\u0434\u0438\u043e\u0437\u0430\u043f\u0438\u0441\u044c",duration:a,recordLine:n,type:"mp3",size:t.size}),this.setState({voiceSound:s}),e.abrupt("return",Promise.resolve());case 4:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"recursiveLoad",value:function(){var e=this,t=!1;if(this.state.loadingFiles.length&&(t=this.state.loadingFiles[0].file),t){this.canLoadAttach=!1;var a=new XMLHttpRequest;a.responseType="json",a.upload.onprogress=function(a){e.setState({loadingFiles:e.state.loadingFiles.map((function(e,n){return e.file.name==t.name?(e.percentage=a.loaded/a.total*100,e):e}))})},a.onerror=a.onabort=function(a){e.setState({loadingFiles:e.state.loadingFiles.filter((function(e){return e.file.name!==t.name}),(function(){e.canLoadAttach=!0}))})},a.onload=function(a){e.setState({loadingFiles:e.state.loadingFiles.filter((function(e){return e.file.name!==t.name}))},Object(o.a)(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.addFile(a.target.response,t);case 2:e.canLoadAttach=!0,e.recursiveLoad();case 4:case"end":return n.stop()}}),n)}))))},a.open("POST","".concat(ze.a.urlApi,"/api/dialog/load-file"),!0),a.setRequestHeader("Authorization","Bearer ".concat(this.props.user.apiToken));var n=new FormData;n.append("file",t),a.send(n)}}},{key:"loadFiles",value:function(e){for(var t=this,a=Object(n.a)(this.state.sounds),s=Object(n.a)(this.state.files),i=Object(n.a)(this.state.images),o=e.target,r=a.length+s.length+i.length,c=[],l=0;l<o.files.length;l++){if(r>9){Ze.b.error("Max upload 10 attachments!",{position:Ze.b.POSITION.TOP_CENTER});break}c.push({file:o.files[l],percentage:0}),r++,this.setState({loadingFiles:[].concat(Object(n.a)(this.state.loadingFiles),c)},(function(){t.canLoadAttach&&t.recursiveLoad()}))}}},{key:"addFile",value:function(){var e=Object(o.a)(i.a.mark((function e(t,a){var s,o,c,l,A,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=Object(n.a)(this.state.sounds),o=Object(n.a)(this.state.files),c=Object(n.a)(this.state.images),t.type=a.name.split(".").pop(),"png"!==t.type&&"jpg"!==t.type&&"jpeg"!==t.type&&"gif"!==t.type||(t.id=c.length,c.push(t)),"txt"!==t.type&&"pdf"!==t.type&&"docx"!==t.type&&"zip"!==t.type&&"doc"!==t.type||(t.id=o.length,o.push(t)),"mp3"!==t.type){e.next=14;break}return t.id=s.length,e.next=10,Object(R.a)((window.URL||window.webkitURL).createObjectURL(new Blob([a],{type:a.type})));case 10:l=e.sent,A=l.duration,d=l.recordLine,s.push(Object(r.a)(Object(r.a)({},t),{},{duration:A,recordLine:d}));case 14:this.setState({sounds:s,files:o,images:c},(function(){return Promise.resolve()}));case 15:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"addImageToFancyBox",value:function(e,t){this.setState({dataFancybox:{images:e,index:t}})}},{key:"render",value:function(){var e=this;return g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{className:"message-container"},g.a.createElement("div",{className:"dialog-wrap"},g.a.createElement(z.Scrollbars,{onScroll:function(){e.onScroll()},ref:function(t){e.messagesBlock=t},renderTrackVertical:function(e){return g.a.createElement("div",{className:"track-vertical"})},renderThumbVertical:function(e){return g.a.createElement("div",{className:"thumb-vertical"})},className:"dialog scroll",autoHide:!0},g.a.createElement(ve.a,{id:"load-message-gif",className:"load-message"}),!!this.props.dialog.messages.length&&this.props.dialog.messages.map((function(t,a,n){var s=!!n[a-1]&&n[a-1];return g.a.createElement(Z,{key:t._id,index:a,scrollingMessage:e.state.setCordMessageScroll,user:e.props.user,scrollTo:function(t){e.scrollTo(t)},retrySendMessage:e.retrySendMessage.bind(e),setRecentMessage:e.setRecentMessage.bind(e),deleteLocalMessage:e.deleteLocalMessage.bind(e),prevMessage:s,message:t,addImageToFancyBox:e.addImageToFancyBox.bind(e)})})),!this.props.dialog.isFetching&&!this.props.dialog.messages.length&&g.a.createElement("div",{className:"messages-block"},g.a.createElement("div",{className:"col pl-0 avatar-message"}),g.a.createElement("div",{className:"col row pl-0"},g.a.createElement("div",{className:"col-12"},"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u0435\u0449\u0435 \u043d\u0435\u0431\u044b\u043b\u043e"))),g.a.createElement("div",{className:"dialog-typers"},g.a.createElement("div",{className:"messages-block",style:{height:"21px"}},this.props.dialog.typing&&g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{className:"avatar-message d-flex"}),g.a.createElement("div",{className:"col dialog-content"},g.a.createElement("div",{className:"message-content"},g.a.createElement("div",{className:"reading-status"},this.props.dialog.user.name.last,"\u2002",this.props.dialog.user.name.first," \u043f\u0435\u0447\u0430\u0442\u0430\u0435\u0442")))))))),g.a.createElement(ot,{scrollToBottom:function(){e.scrollToBottom()}}),g.a.createElement("div",{className:"message-panel "},this.state.recentMessage&&g.a.createElement(Y,{message:this.state.recentMessage}),g.a.createElement("div",{className:"panel"},!this.state.isRecord&&g.a.createElement(Ue,{ref:this.inputPanel,recordStart:function(){(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia).bind(navigator)({audio:!0,video:!1},(function(t){e.setState({isRecord:!0})}),(function(){Ze.b.error("\u041c\u0438\u043a\u0440\u043e\u0444\u043e\u043d \u043d\u0435 \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d",{position:Ze.b.POSITION.TOP_CENTER})}))},isContent:!!this.state.sounds.length||!!this.state.images.length||!!this.state.files.length,loadFiles:this.loadFiles.bind(this),sendMessage:this.sendMessage.bind(this),typing:this.typing.bind(this)}),this.state.isRecord&&g.a.createElement(g.a.Fragment,null,g.a.createElement(ye,{addVoiceSound:this.addVoiceSound.bind(this),stopRec:function(){e.setState({isRecord:!1})},sendMessage:this.sendMessage.bind(this)}))),g.a.createElement("div",{className:"filesAttach",style:{height:this.state.images.length||this.state.files.length||this.state.sounds.length||this.state.loadingFiles.length?"250px":""}},g.a.createElement(z.Scrollbars,{renderTrackVertical:function(e){return g.a.createElement("div",{className:"track-vertical"})},renderThumbVertical:function(e){return g.a.createElement("div",{className:"thumb-vertical"})},renderTrackHorizontal:function(e){return g.a.createElement("div",Object.assign({},e,{className:"track-horizontal",style:{display:"none"}}))},renderThumbHorizontal:function(e){return g.a.createElement("div",Object.assign({},e,{className:"thumb-horizontal",style:{display:"none"}}))},autoHide:!0},g.a.createElement("div",{className:"loading-area"},this.state.loadingFiles.map((function(e,t){return g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{key:t,className:"attach-item"},g.a.createElement(Je,{percent:e.percentage}),g.a.createElement("span",{className:"file-name"},e.file.name)))}))),g.a.createElement("div",{className:"images-area attath-area"},this.state.images.map((function(t,a){return g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{key:a,className:"attach-item"},g.a.createElement("img",{src:t.path,className:"image-message",alt:""}),g.a.createElement("img",{className:"attachDelete",onClick:function(){e.setState({images:e.state.images.filter((function(e,t){return t!=a}))})},src:tt.a,alt:"attachDelete"})))}))),g.a.createElement("div",{className:"sounds-area attath-area"},this.state.sounds.map((function(t,a){return g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{key:a,className:"attach-item"},g.a.createElement("img",{className:"typeImg",src:$e.a,alt:"musicSvg"}),g.a.createElement("span",{className:"file-name"},t.name),g.a.createElement("img",{className:"attachDelete",onClick:function(){e.setState({sounds:e.state.sounds.filter((function(e,t){return t!=a}))})},src:tt.a,alt:"attachDelete"})))}))),g.a.createElement("div",{className:"files-area attath-area"},this.state.files.map((function(t,a){return g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{key:a,className:"attach-item"},g.a.createElement("img",{className:"typeImg",src:H.a,alt:""}),g.a.createElement("div",null,g.a.createElement("div",{className:"file-name"},t.name),g.a.createElement("div",{className:"file-size"},t.size>1048576?Math.floor(t.size/1048576)+"\u041c\u0431.":Math.floor(t.size/1024)+"\u041a\u0431.")),g.a.createElement("img",{className:"attachDelete",src:tt.a,onClick:function(){e.setState({files:e.state.files.filter((function(e,t){return t!=a}))})},alt:"attachDelete"})))}))))))),g.a.createElement(K.CSSTransitionGroup,{transitionName:"fancybox-animation",transitionEnterTimeout:300,transitionLeaveTimeout:300},this.state.dataFancybox.images&&g.a.createElement(He.a,{close:function(){e.setState({dataFancybox:{images:!1,index:!1}})},images:this.state.dataFancybox.images,index:this.state.dataFancybox.index})))}}]),a}(g.a.Component);t.a=Object(Ke.b)((function(e){return{user:e.user,dialogs:e.dialogs}}),(function(e){return{dialogsActions:Object(Ve.b)(We,e)}}))(rt)},895:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAIAAAD9b0jDAAABN2lDQ1BBZG9iZSBSR0IgKDE5OTgpAAAokZWPv0rDUBSHvxtFxaFWCOLgcCdRUGzVwYxJW4ogWKtDkq1JQ5ViEm6uf/oQjm4dXNx9AidHwUHxCXwDxamDQ4QMBYvf9J3fORzOAaNi152GUYbzWKt205Gu58vZF2aYAoBOmKV2q3UAECdxxBjf7wiA10277jTG+38yH6ZKAyNguxtlIYgK0L/SqQYxBMygn2oQD4CpTto1EE9AqZf7G1AKcv8ASsr1fBBfgNlzPR+MOcAMcl8BTB1da4Bakg7UWe9Uy6plWdLuJkEkjweZjs4zuR+HiUoT1dFRF8jvA2AxH2w3HblWtay99X/+PRHX82Vun0cIQCw9F1lBeKEuf1UYO5PrYsdwGQ7vYXpUZLs3cLcBC7dFtlqF8hY8Dn8AwMZP/fNTP8gAAAAJcEhZcwAACxMAAAsTAQCanBgAAAXRaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzE0NSA3OS4xNjM0OTksIDIwMTgvMDgvMTMtMTY6NDA6MjIgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjAtMDctMTVUMTM6NDY6NDcrMDU6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjAtMDctMTVUMTM6NDY6NDcrMDU6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIwLTA3LTE1VDEzOjQ2OjQ3KzA1OjAwIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmIyODg4NmRkLWIzYTYtZTE0MS1hZDliLTA4MzExMWI5MTlmOCIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjZjMzkxZTczLTljZmItZTc0NC05YTU4LTZkYTk4ZWYxOWM3ZiIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjZjNDk5YTgzLTUwYWEtYjg0NC05NThhLWM4NDk4MThjNTA2MCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjZjNDk5YTgzLTUwYWEtYjg0NC05NThhLWM4NDk4MThjNTA2MCIgc3RFdnQ6d2hlbj0iMjAyMC0wNy0xNVQxMzo0Njo0NyswNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpiMjg4ODZkZC1iM2E2LWUxNDEtYWQ5Yi0wODMxMTFiOTE5ZjgiIHN0RXZ0OndoZW49IjIwMjAtMDctMTVUMTM6NDY6NDcrMDU6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6O3D40AAABPklEQVRIiZXWS1qDMBQF4BPyKC20dQWu0VW6E4cOLGBrckkc6KClSQ4wgnDzw/kuAdT72wy2TR/p55PU9K/KvfzvN1RMETKSmsbB9HeHFJURsyc1tkNjtqB+SEgMPav7Q4ImQbgQsXGw3eNIfUKYEANB3QlKb0H9F0uuYI9qMVZDo0AmYuodTLccrKEyIgpBbQ/1ZNTQVX0/LbPX0BggAxF1C3PIjBfRsCK7O2WyV1HWd9XksxfR6BFo31uYff5UHvUDEnt52R7I32gWTZCBdb3Q9yI6r8huDsXseTSMPLs7q1L2Akr7rmGPtYIlOt/4ejd76HYL6i9IdGk+vZaqaIKMa555ctUHVG6QbzLBdNC7LWgYkCKZ4MqPZw5NK/puSN+XqFwhV1JtOzRuC8o/R9WlmUfpb4gysD2p+dt+AVLLbXKbIUIXAAAAAElFTkSuQmCC"},896:function(e,t,a){e.exports=a.p+"static/media/music.21255322.svg"}}]);
//# sourceMappingURL=1.d92cc84b.chunk.js.map