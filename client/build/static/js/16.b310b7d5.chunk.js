(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[16],{911:function(t,e,n){"use strict";n.r(e);var i={};n.r(i),n.d(i,"notificationsGet",(function(){return b})),n.d(i,"notificationRead",(function(){return N})),n.d(i,"notifyLoad",(function(){return g}));var o=n(6),a=n(7),c=n(9),r=n(8),s=n(0),f=n.n(s),l=n(421),p=n(32),u=n(37),h=n(2),d=n(17),y=n(12),m=n(55),b=function(t,e){return function(n){return new Promise((function(i,o){fetch("".concat(d.a.urlApi,"/api/notification/get-all"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({type:t})}).then((function(t){return t.json()})).then((function(e){var o=e.notifications;n({type:v(t,"get"),payload:o});i()}))}))}},N=function(t,e,n){return function(i){i({type:v(e,"read"),payload:t}),i({type:h.Gb,payload:t}),fetch("".concat(d.a.urlApi,"/api/notification/read"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({id:t,socketId:m.a.getSocketId()})})}},g=function(t,e){return function(n){return new Promise((function(i,o){var a=y.a.getState().notifications[t].notifications.length;n({type:v(t,"loading"),payload:{}}),fetch("".concat(d.a.urlApi,"/api/notification/get-all"),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({type:t,offset:a})}).then((function(t){return t.json()})).then((function(e){var o=e.notifications;n({type:v(t,"load"),payload:{notifications:o}}),i()}))}))}};function v(t,e){if("get"===e)switch(t){case"all":return h.Db;case"offer":return h.Lb;case"order":return h.Rb;case"system":return h.Yb;case"tariff":return h.ec}if("read"===e)switch(t){case"all":return h.Gb;case"offer":return h.Ob;case"order":return h.Ub;case"system":return h.bc;case"tariff":return h.hc}if("load"===e)switch(t){case"all":return h.Eb;case"offer":return h.Mb;case"order":return h.Sb;case"system":return h.Zb;case"tariff":return h.fc}if("loading"===e)switch(t){case"all":return h.Fb;case"offer":return h.Nb;case"order":return h.Tb;case"system":return h.ac;case"tariff":return h.gc}}var k=n(39),S=(n(59),n(85)),E=n(185),A=function(t){Object(c.a)(n,t);var e=Object(r.a)(n);function n(){var t;Object(o.a)(this,n);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).state={typeNotification:"all"},t.renderNotification=function(){var e=t.props.notifications[t.state.typeNotification].notifications;return f.a.createElement(f.a.Fragment,null,e.map((function(e,n){return f.a.createElement(l.a,{reading:function(e,n){t.props.notificationActions.notificationRead(e,n,t.props.user.apiToken)},key:n,notification:e})})),!e.length&&f.a.createElement("div",{className:"text-center"},"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0439 \u043f\u043e\u043a\u0430 \u043d\u0435\u0442"))},t}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.props.notifications.all.isGetted||this.props.notificationActions.notificationsGet("all",this.props.user.apiToken).then((function(){t.onScroll()}))}},{key:"onScroll",value:function(){this.props.notifications[this.state.typeNotification].canLoad&&!this.props.notifications[this.state.typeNotification].isFetching&&this.notifyBlock.getScrollHeight()-this.notifyBlock.getScrollTop()<=200+this.notifyBlock.getClientHeight()&&this.props.notificationActions.notifyLoad(this.state.typeNotification,this.props.user.apiToken)}},{key:"render",value:function(){var t=this,e=this.props.notifications[this.state.typeNotification];return f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{className:"container-fluid"},f.a.createElement("h2",{className:"title"},"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f"),f.a.createElement(S.a,{isLoading:e.isFetching})),f.a.createElement(u.CSSTransitionGroup,{transitionName:"height-animation-item",transitionEnterTimeout:500,transitionLeaveTimeout:1,style:{display:"contents"}},(!e.isFetching||e.isGetted)&&f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{className:"container-fluid"},f.a.createElement("div",{className:"tab_groups"},f.a.createElement("span",{className:"tab_group ".concat("all"===this.state.typeNotification?"active":""),onClick:function(){t.setState({typeNotification:"all"}),t.props.notifications.all.isGetted||t.props.notificationActions.notificationsGet("all",t.props.user.apiToken).then((function(){t.onScroll()}))}},"\u0412\u0441\u0435"),f.a.createElement("span",{className:"tab_group ".concat("order"===this.state.typeNotification?"active":""),onClick:function(){t.setState({typeNotification:"order"}),t.props.notifications.order.isGetted||t.props.notificationActions.notificationsGet("order",t.props.user.apiToken).then((function(){t.onScroll()}))}},"\u041f\u043e \u0437\u0430\u043a\u0430\u0437\u0430\u043c"),f.a.createElement("span",{className:"tab_group ".concat("offer"===this.state.typeNotification?"active":""),onClick:function(){t.setState({typeNotification:"offer"}),t.props.notifications.offer.isGetted||t.props.notificationActions.notificationsGet("offer",t.props.user.apiToken).then((function(){t.onScroll()}))}},"\u041f\u043e \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f\u043c"),f.a.createElement("span",{className:"tab_group ".concat("system"===this.state.typeNotification?"active":""),onClick:function(){t.setState({typeNotification:"system"}),t.props.notifications.system.isGetted||t.props.notificationActions.notificationsGet("system",t.props.user.apiToken).then((function(){t.onScroll()}))}},"\u0421\u0438\u0441\u0442\u0435\u043c\u043d\u044b\u0435"),f.a.createElement("span",{className:"tab_group ".concat("tariff"===this.state.typeNotification?"active":""),onClick:function(){t.setState({typeNotification:"tariff"}),t.props.notifications.tariff.isGetted||t.props.notificationActions.notificationsGet("tariff",t.props.user.apiToken).then((function(){t.onScroll()}))}},"\u041f\u043e \u0422\u0430\u0440\u0438\u0444\u0443"))),f.a.createElement(E.Scrollbars,{onScroll:function(){t.onScroll()},ref:function(e){t.notifyBlock=e},renderTrackVertical:function(t){return f.a.createElement("div",{className:"track-vertical"})},renderThumbVertical:function(t){return f.a.createElement("div",{className:"thumb-vertical"})},className:"load-content scroll",autoHide:!0},this.renderNotification()))))}}]),n}(f.a.Component);e.default=Object(p.b)((function(t){return{user:t.user,notifications:t.notifications}}),(function(t){return{notificationActions:Object(k.b)(i,t)}}))(A)}}]);
//# sourceMappingURL=16.b310b7d5.chunk.js.map