{"version":3,"sources":["controllers/FunctionsController.js","redux/actions/dialogs.js","img/attachDelete.svg","img/loadAudio.gif","img/document.svg","Partials/Chat/TimeTag.js","img/play.svg","img/pauseRecord.svg","Partials/Chat/RecordLineSvg.js","Partials/Chat/Audio.js","img/reply.svg","Partials/Chat/RecentMessage.js","Partials/Chat/Message.js","Partials/Chat/AudioVoice.js","img/ResetRecord.svg","img/stopRecord.svg","img/send.svg","Partials/Chat/InputPanel/PanelRecord.js","img/addDocuments.svg","img/smiles.svg","img/microphone.svg","Partials/Chat/InputPanel/PanelStandart.js","Elements/ProgressBar.js","Partials/Chat/Dialog.js","img/progress-bar.png","img/music.svg"],"names":["randomInteger","min","max","rand","Math","random","floor","padZero","v","one","parseInt","two","renderCanvas","ref","id","RecordLine","isAdaptive","color","canvas","document","getElementById","ctxCanvas","getContext","width","getBoundingClientRect","height","clearRect","fillStyle","strokeStyle","slice","reverse","map","item","index","beginPath","roundedRect","length","stroke","getAudioBufferData","blobUrl","data","actx","window","AudioContext","webkitAudioContext","Promise","resolve","reject","fetch","mode","then","resp","arrayBuffer","decodeAudioData","bind","buffer","duration","i","channel","getChannelData","points","x","abs","dB","push","recordLine","pos","winSize","rms","sum","sqrt","log10","String","prototype","toTimer","sec_num","this","hours","minutes","seconds","toHHMMSS","CanvasRenderingContext2D","y","radius","save","translate","moveTo","arcTo","lineTo","restore","dialogsAllGet","apiToken","dispatch","api","urlApi","method","headers","Accept","Authorization","response","json","existDialog","store","getState","dialogs","dialogsUser","find","_id","messages","isGetted","canLoad","user","users","typers","type","DIALOGSALL_GET","payload","dialogsGet","DIALOGS_GET","dialogGet","userId","body","JSON","stringify","dialog","error","isNotFound","DIALOGS_ADD","typing","lastMessage","isLoading","dialogsLoad","DIALOGSALL_SET_LOADING","dialogsALL","DIALOGSORDER_SET_LOADING","dialogsOrder","DIALOGS_SET_LOADING","lastDialogId","DIALOGSORDER_LOAD","DIALOGS_LOAD","DIALOGSALL_LOAD","dialogLoad","DIALOG_LOAD","dialogId","updateOnline","isOrder","DIALOGSORDER_UPDATE_ONLINE","DIALOGS_UPDATE_ONLINE","online","onlineAt","retrySendMessage","message","typeDelete","DIALOGSORDER_DELETE_MESSAGE","DIALOGS_DELETE_MESSAGE","typeAdd","DIALOGSORDER_ADD_MESSAGE","DIALOGS_ADD_MESSAGE","typeError","DIALOGSORDER_ERROR_MESSAGE","DIALOGS_ERROR_MESSAGE","typeSuccessMessage","DIALOGSORDER_SUCCESS_MESSAGE","DIALOGS_SUCCESS_MESSAGE","formData","FormData","voiceSound","append","file","images","files","sounds","localMessage","text","isError","recentMessage","createdAt","Date","now","messageIds","socketId","SocketController","getSocketId","recentMessages","messageRes","_newId","catch","deleteLocalMessage","filter","pop","sendMessage","isRead","errors","msg","toast","position","POSITION","TOP_CENTER","readMessages","otherId","typeRead","DIALOGSORDER_READ_MESSAGES","DIALOGS_READ_MESSAGES","setTimeout","noRead","noReadCount","loadMessages","typeLoad","DIALOGSORDER_LOAD_MESSAGES","DIALOGS_LOAD_MESSAGES","typeSetLoad","DIALOGORDER_SET_LOADING","DIALOG_SET_LOADING","lastMessageId","dialogsOrderGet","DIALOGSORDER_GET","dialogOrderGet","orderId","DIALOGSORDER_ADD","dialogOrderLoad","DIALOGORDER_LOAD","module","exports","TimeTag","className","props","date","React","Component","_extends","Object","assign","target","arguments","source","key","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","createElement","cx","cy","r","_ref3","d","fill","_ref","svgRef","title","viewBox","ForwardRef","forwardRef","rx","_ref4","RecordLineSvg","state","updateDimensions","setState","clientWidth","clientHeight","addEventListener","removeEventListener","svg","countAllSrick","difference","everyIndex","counter","array","countduple","ceil","duplearray","countColors","percentTime","maxValue","onClick","e","items","AudioX","currentTime","audio","randomId","thisAudio","getElementsByName","sound","path","volume","onpause","parentElement","onplay","ontimeupdate","pause","stopPropagation","otherAudio","getElementsByClassName","play","nativeEvent","layerX","time","preload","name","src","playAudio","style","stopAudio","changeDurationAudio","isVoiceSound","loading","alt","RecentMessage","scrollTo","middle","first","Message","isSelected","scrollingMessage","nextProps","nextState","isHistoryDate","moreHour","prevMessage","date1","date2","getFullYear","getMonth","getDate","myMessage","isFirst","isShowMoreElement","isRecent","timeAt","charAt","last","getHM","Audio","image","isBlur","addImageToFancyBox","documentSvg","size","href","top","setRecentMessage","AudioVoice","fillRule","strokeWidth","opacity","strokeLinecap","m","localStream","analyser","processor","ctx","PanelRecord","documentMode","StyleMedia","isRecordPause","isAudioPlay","isSending","countdown","audioSrc","timer","setInterval","clearInterval","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","getMedia","video","stream","renderAudioVolume","mediaRecorder","MediaRecorder","startTimer","stopTimer","start","err","stopRec","a","onRecordingReady","addVoiceSound","URL","createObjectURL","stop","getAudioTracks","disconnect","destination","recordStop","createMediaStreamSource","createAnalyser","createScriptProcessor","connect","Uint8Array","frequencyBinCount","onaudioprocess","getByteFrequencyData","volumes","arg","val","recordStart","strokeMiterlimit","PanelStandart","showEmoji","hideEmoji","closest","click","multiple","hidden","onChange","loadFiles","display","accept","onKeyDown","keyCode","shiftKey","preventDefault","maxHeight","onInput","inputMessage","scrollHeight","value","transitionName","transitionEnterTimeout","transitionLeaveTimeout","showPreview","emoji","event","native","showSearch","showSkinTones","i18n","settings","localizateEmoji","isContent","Avatar","backgroundImage","PngProgress","percent","isIE","isEdge","waitActiveUser","waitFastRead","ScrollBottom","scrollToBottom","ArrowDown","Dialog","scrollTop","canTyping","isRecord","setCordMessageScroll","loadingFiles","dataFancybox","inputPanel","createRef","activePage","canLoadAttach","scroll","messagesBlock","getScrollHeight","getScrollTop","getClientHeight","classList","contains","add","remove","unRead","view","left","behavior","messageBlock","topCord","offsetTop","loadToVictory","active","clearTimeout","blurPage","focusPage","drafts","parse","localStorage","getItem","current","setText","prevProps","controlGif","dialogsActions","newText","prevText","typingDialog","test","setItem","xhr","XMLHttpRequest","responseType","upload","onprogress","percentage","loaded","total","onerror","onabort","onload","addFile","recursiveLoad","open","setRequestHeader","send","InputFile","newFiles","fileUrl","fileBlob","split","webkitURL","Blob","audioData","onScroll","renderTrackVertical","renderThumbVertical","autoHide","isFetching","renderTrackHorizontal","renderThumbHorizontal","ProgressBar","indexR","attachDelete","musicSvg","Fancybox","close","bindActionCreators"],"mappings":"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","file":"static/js/1.d92cc84b.chunk.js","sourcesContent":["String.prototype.toTimer = function () {\r\n  var sec_num = parseInt(this, 10); // don't forget the second param\r\n  var hours = Math.floor(sec_num / 3600);\r\n  var minutes = Math.floor((sec_num - hours * 3600) / 60);\r\n  var seconds = sec_num - hours * 3600 - minutes * 60;\r\n\r\n  if (minutes < 10) {\r\n    minutes = \"0\" + minutes;\r\n  }\r\n  if (seconds < 10) {\r\n    seconds = \"0\" + seconds;\r\n  }\r\n  return minutes + \":\" + seconds;\r\n};\r\nString.prototype.toHHMMSS = function () {\r\n  var sec_num = parseInt(this, 10); // don't forget the second param\r\n  var hours = Math.floor(sec_num / 3600);\r\n  var minutes = Math.floor((sec_num - hours * 3600) / 60);\r\n  var seconds = sec_num - hours * 3600 - minutes * 60;\r\n\r\n  if (hours < 10) {\r\n    hours = \"0\" + hours;\r\n  }\r\n  if (minutes < 10) {\r\n    minutes = \"0\" + minutes;\r\n  }\r\n  if (seconds < 10) {\r\n    seconds = \"0\" + seconds;\r\n  }\r\n  return hours + minutes + \":\" + seconds;\r\n};\r\nexport function randomInteger(min, max) {\r\n  let rand = min + Math.random() * (max + 1 - min);\r\n  return Math.floor(rand);\r\n}\r\n\r\nexport function padZero(v) {\r\n  let one = parseInt(v / 60),\r\n    two = parseInt(v % 60);\r\n  return (one < 10 ? \"0\" + one : one) + \":\" + (two % 60 < 10 ? \"0\" + two : two);\r\n}\r\nCanvasRenderingContext2D.prototype.roundedRect = function (\r\n  x,\r\n  y,\r\n  width,\r\n  height,\r\n  radius\r\n) {\r\n  // Because the function is added to the context prototype\r\n  // the 'this' variable is actually the context\r\n\r\n  // Save the existing state of the canvas so that it can be restored later\r\n  this.save();\r\n\r\n  // Translate to the given X/Y coordinates\r\n  this.translate(x, y);\r\n\r\n  // Move to the center of the top horizontal line\r\n  this.moveTo(width / 2, 0);\r\n\r\n  // Draw the rounded corners. The connecting lines in between them are drawn automatically\r\n  this.arcTo(width, 0, width, height, Math.min(height / 2, radius));\r\n  this.arcTo(width, height, 0, height, Math.min(width / 2, radius));\r\n  this.arcTo(0, height, 0, 0, Math.min(height / 2, radius));\r\n  this.arcTo(0, 0, radius, 0, Math.min(width / 2, radius));\r\n\r\n  // Draw a line back to the start coordinates\r\n  this.lineTo(width / 2, 0);\r\n\r\n  // Restore the state of the canvas to as it was before the save\r\n  this.restore();\r\n};\r\nexport function renderCanvas(ref, id, RecordLine, isAdaptive, color) {\r\n  let canvas;\r\n  let paddingStick = 3,\r\n    widthStick = 1; //Ширина полосок\r\n  if (!!ref) canvas = ref;\r\n  else canvas = document.getElementById(id);\r\n  if (canvas) {\r\n    let ctxCanvas = canvas.getContext(\"2d\");\r\n    canvas.width = canvas.getBoundingClientRect().width - 88; //Ширина минус паддинги\r\n    canvas.height = canvas.getBoundingClientRect().height;\r\n    ctxCanvas.clearRect(0, 0, canvas.width, canvas.height);\r\n    ctxCanvas.fillStyle = color;\r\n    ctxCanvas.strokeStyle = color;\r\n    RecordLine.slice().reverse();\r\n    RecordLine.map((item, index) => {\r\n      let height = item / 180;\r\n      if (height > 1) height = canvas.height - 9;\r\n      else if (height === 0) height = 2;\r\n      else height = (canvas.height - 9) * height;\r\n      ctxCanvas.beginPath();\r\n      ctxCanvas.roundedRect(\r\n        canvas.width -\r\n          (RecordLine.length - index) * (paddingStick + widthStick),\r\n        canvas.height / 2 - height / 2,\r\n        widthStick,\r\n        height,\r\n        1\r\n      );\r\n      ctxCanvas.stroke();\r\n    });\r\n  }\r\n}\r\nexport function getAudioBufferData(blobUrl) {\r\n  let data = {};\r\n  let actx = new (window.AudioContext || window.webkitAudioContext)();\r\n  return new Promise((resolve, reject) => {\r\n    fetch(blobUrl, { mode: \"cors\" })\r\n      .then(function (resp) {\r\n        return resp.arrayBuffer();\r\n      })\r\n      .then(actx.decodeAudioData.bind(actx))\r\n      .then(function (buffer) {\r\n        data.duration = buffer.duration;\r\n        var channel = buffer.getChannelData(0);\r\n        var points = [0];\r\n        for (var x = 1, i, v; x < 300; x++) {\r\n          i = ((x / 300) * channel.length) | 0;\r\n          v = Math.abs(dB(channel, i, 8820)) / 40;\r\n          points.push(v * 100);\r\n        }\r\n        data.recordLine = points;\r\n        resolve(data);\r\n      });\r\n  });\r\n}\r\nfunction dB(buffer, pos, winSize) {\r\n  for (var rms, sum = 0, v, i = pos - winSize; i <= pos; i++) {\r\n    v = i < 0 ? 0 : buffer[i];\r\n    sum += v * v;\r\n  }\r\n  rms = Math.sqrt(sum / winSize); // corrected!\r\n  return 20 * Math.log10(rms);\r\n}\r\n","import {\r\n  DIALOGSALL_GET,\r\n  DIALOGSALL_LOAD,\r\n  DIALOGSALL_SET_LOADING,\r\n  DIALOGSORDER_SET_LOADING,\r\n  DIALOGS_SET_LOADING,\r\n  //DIALOGUSER\r\n  DIALOGS_LOAD,\r\n  DIALOGS_GET,\r\n  DIALOGS_ADD,\r\n  DIALOGS_ADD_MESSAGE,\r\n  DIALOGS_SUCCESS_MESSAGE,\r\n  DIALOGS_ERROR_MESSAGE,\r\n  DIALOGS_READ_MESSAGES,\r\n  DIALOG_LOAD,\r\n  DIALOGS_DELETE_MESSAGE,\r\n  DIALOG_SET_LOADING,\r\n  DIALOGS_LOAD_MESSAGES,\r\n  DIALOGS_UPDATE_ONLINE,\r\n  //DIALOGORDER\r\n  DIALOGSORDER_LOAD,\r\n  DIALOGSORDER_GET,\r\n  DIALOGSORDER_ADD,\r\n  DIALOGSORDER_ADD_MESSAGE,\r\n  DIALOGSORDER_SUCCESS_MESSAGE,\r\n  DIALOGSORDER_ERROR_MESSAGE,\r\n  DIALOGSORDER_READ_MESSAGES,\r\n  DIALOGORDER_LOAD,\r\n  DIALOGSORDER_DELETE_MESSAGE,\r\n  DIALOGORDER_SET_LOADING,\r\n  DIALOGSORDER_LOAD_MESSAGES,\r\n  DIALOGSORDER_UPDATE_ONLINE,\r\n} from \"../constants\";\r\nimport store from \"../store\";\r\nimport { randomInteger } from \"../../controllers/FunctionsController\";\r\nimport SocketController from \"../../controllers/SocketController\";\r\nimport { toast } from \"react-toastify\";\r\nimport api from \"../../config/api\";\r\n\r\n//DIALOGALL\r\nexport const dialogsAllGet = (apiToken) => (dispatch) => {\r\n  return new Promise((resolve, reject) => {\r\n    fetch(`${api.urlApi}/api/dialogsOrder/getAllDialog`, {\r\n      method: \"post\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${apiToken}`,\r\n      },\r\n    })\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        for (let i = 0; i < data.dialogs.length; i++) {\r\n          let existDialog = store\r\n            .getState()\r\n            .dialogs.dialogsUser.dialogs.find(\r\n              (x) => x._id === data.dialogs[i]._id\r\n            );\r\n\r\n          if (existDialog) {\r\n            data.dialogs[i].messages = existDialog.messages;\r\n          }\r\n          data.dialogs[i].isGetted = false;\r\n          data.dialogs[i].canLoad = true;\r\n          data.dialogs[i].user = data.dialogs[i].users.find(\r\n            (user) => user._id !== store.getState().user._id\r\n          );\r\n\r\n          if (!data.dialogs[i].user)\r\n            data.dialogs[i].user = data.dialogs[i].users[0];\r\n\r\n          data.dialogs[i].typers = [];\r\n        }\r\n        dispatch({\r\n          type: DIALOGSALL_GET,\r\n          payload: data,\r\n        });\r\n        resolve();\r\n      });\r\n  });\r\n};\r\n//DIALOGSUSER\r\nexport const dialogsGet = (apiToken) => (dispatch) => {\r\n  return new Promise((resolve, reject) => {\r\n    fetch(`${api.urlApi}/api/dialog/get-all`, {\r\n      method: \"post\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${apiToken}`,\r\n      },\r\n    })\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        for (let i = 0; i < data.dialogs.length; i++) {\r\n          let existDialog = store\r\n            .getState()\r\n            .dialogs.dialogsUser.dialogs.find(\r\n              (x) => x._id === data.dialogs[i]._id\r\n            );\r\n\r\n          if (existDialog) {\r\n            data.dialogs[i].messages = existDialog.messages;\r\n          }\r\n          data.dialogs[i].isGetted = false;\r\n          data.dialogs[i].canLoad = true;\r\n\r\n          data.dialogs[i].user = data.dialogs[i].users.find(\r\n            (user) => user._id !== store.getState().user._id\r\n          );\r\n\r\n          if (!data.dialogs[i].user)\r\n            data.dialogs[i].user = data.dialogs[i].users[0];\r\n\r\n          data.dialogs[i].typers = [];\r\n        }\r\n        dispatch({\r\n          type: DIALOGS_GET,\r\n          payload: data,\r\n        });\r\n        resolve();\r\n      });\r\n  });\r\n};\r\n\r\nexport const dialogGet = (userId, apiToken) => (dispatch) => {\r\n  return new Promise((resolve, reject) => {\r\n    fetch(`${api.urlApi}/api/dialog/get`, {\r\n      method: \"post\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${apiToken}`,\r\n      },\r\n      body: JSON.stringify({\r\n        userId,\r\n      }),\r\n    })\r\n      .then((response) => response.json())\r\n      .then(({ dialog, messages }) => {\r\n        if (!dialog.error) {\r\n          dialog.user = dialog.users.find(\r\n            (user) => user._id !== store.getState().user._id\r\n          );\r\n          if (!dialog.user) dialog.user = dialog.users[0];\r\n\r\n          dialog.typing = false;\r\n\r\n          dialog.isGetted = true;\r\n          dialog.messages = messages.reverse();\r\n          dialog.lastMessage = false;\r\n          dialog.canLoad = messages.length === 50;\r\n          dialog.isLoading = false;\r\n\r\n          dispatch({\r\n            type: DIALOGS_ADD,\r\n            payload: { dialog },\r\n          });\r\n          resolve();\r\n        } else {\r\n          let dialog = {\r\n            isGetted: true,\r\n            isNotFound: true,\r\n            user: { _id: userId },\r\n          };\r\n\r\n          dispatch({\r\n            type: DIALOGS_ADD,\r\n            payload: dialog,\r\n          });\r\n          resolve();\r\n        }\r\n      });\r\n  });\r\n};\r\nexport const dialogsLoad = (type, apiToken) => (dispatch) => {\r\n  let dialogs;\r\n  switch (type) {\r\n    case \"all\":\r\n      dispatch({ type: DIALOGSALL_SET_LOADING });\r\n      dialogs = store.getState().dialogs.dialogsALL;\r\n      break;\r\n    case \"order\":\r\n      dispatch({ type: DIALOGSORDER_SET_LOADING });\r\n      dialogs = store.getState().dialogs.dialogsOrder;\r\n      break;\r\n    case \"user\":\r\n      dispatch({ type: DIALOGS_SET_LOADING });\r\n      dialogs = store.getState().dialogs.dialogsUser;\r\n      break;\r\n  }\r\n  return new Promise((resolve, reject) => {\r\n    fetch(`${api.urlApi}/api/dialog/load`, {\r\n      method: \"post\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${apiToken}`,\r\n      },\r\n      body: JSON.stringify({\r\n        type,\r\n        lastDialogId: dialogs.dialogs[dialogs.dialogs.length - 1]._id,\r\n      }),\r\n    })\r\n      .then((response) => response.json())\r\n      .then(({ dialogs }) => {\r\n        for (let i = 0; i < dialogs.length; i++) {\r\n          dialogs[i].isGetted = false;\r\n          dialogs[i].canLoad = true;\r\n          dialogs[i].user = dialogs[i].users.find(\r\n            (user) => user._id !== store.getState().user._id\r\n          );\r\n\r\n          if (!dialogs[i].user) dialogs[i].user = dialogs[i].users[0];\r\n\r\n          dialogs[i].typers = [];\r\n        }\r\n        if (type === \"order\")\r\n          dispatch({\r\n            type: DIALOGSORDER_LOAD,\r\n            payload: { dialogs },\r\n          });\r\n        else if (type === \"user\")\r\n          dispatch({\r\n            type: DIALOGS_LOAD,\r\n            payload: { dialogs },\r\n          });\r\n        else if (type === \"all\")\r\n          dispatch({\r\n            type: DIALOGSALL_LOAD,\r\n            payload: { dialogs },\r\n          });\r\n        resolve();\r\n      });\r\n  });\r\n};\r\nexport const dialogLoad = (userId, apiToken) => (dispatch) => {\r\n  return new Promise((resolve, reject) => {\r\n    fetch(`${api.urlApi}/api/dialog/get`, {\r\n      method: \"post\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${apiToken}`,\r\n      },\r\n      body: JSON.stringify({\r\n        userId,\r\n      }),\r\n    })\r\n      .then((response) => response.json())\r\n      .then(({ dialog, messages }) => {\r\n        dialog.messages = messages.reverse();\r\n\r\n        dispatch({\r\n          type: DIALOG_LOAD,\r\n          payload: {\r\n            dialogId: dialog._id,\r\n            messages: dialog.messages,\r\n            canLoad: messages.length === 50,\r\n          },\r\n        });\r\n        resolve();\r\n      });\r\n  });\r\n};\r\n\r\nexport const updateOnline = (userId, apiToken, isOrder) => (dispatch) => {\r\n  let type = isOrder ? DIALOGSORDER_UPDATE_ONLINE : DIALOGS_UPDATE_ONLINE;\r\n  fetch(`${api.urlApi}/api/user/get-online`, {\r\n    method: \"post\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${apiToken}`,\r\n    },\r\n    body: JSON.stringify({\r\n      userId,\r\n    }),\r\n  })\r\n    .then((response) => response.json())\r\n    .then(({ online, onlineAt }) => {\r\n      dispatch({\r\n        type: type,\r\n        payload: { userId, online, onlineAt },\r\n      });\r\n    });\r\n};\r\nexport const retrySendMessage = (message, apiToken, isOrder) => (dispatch) => {\r\n  let typeDelete = isOrder\r\n    ? DIALOGSORDER_DELETE_MESSAGE\r\n    : DIALOGS_DELETE_MESSAGE;\r\n  let typeAdd = isOrder ? DIALOGSORDER_ADD_MESSAGE : DIALOGS_ADD_MESSAGE;\r\n  let typeError = isOrder ? DIALOGSORDER_ERROR_MESSAGE : DIALOGS_ERROR_MESSAGE;\r\n  let typeSuccessMessage = isOrder\r\n    ? DIALOGSORDER_SUCCESS_MESSAGE\r\n    : DIALOGS_SUCCESS_MESSAGE;\r\n  let dialogId = message.dialogId;\r\n  let formData = new FormData();\r\n  let voiceSound = false;\r\n  if (message.voiceSound) {\r\n    formData.append(\"voiceSound\", message.voiceSound.file);\r\n    formData.append(\"voiceSoundDuration\", message.voiceSound.duration);\r\n    formData.append(\"voiceSoundRecordLine\", message.voiceSound.recordLine);\r\n    voiceSound = message.voiceSound;\r\n  }\r\n  formData.append(\"images\", JSON.stringify(message.images));\r\n  formData.append(\"files\", JSON.stringify(message.files));\r\n  formData.append(\"sounds\", JSON.stringify(message.sounds));\r\n  let localMessage = {\r\n    _id: message._id,\r\n    user: store.getState().user,\r\n    text: message.text,\r\n    images: message.images,\r\n    sounds: message.sounds,\r\n    files: message.files,\r\n    voiceSound: voiceSound,\r\n    isLoading: true,\r\n    isError: false,\r\n    recentMessage: message.recentMessage,\r\n    createdAt: Date.now(),\r\n    type: \"message\",\r\n  };\r\n  dispatch({\r\n    type: typeDelete,\r\n    payload: { dialogId, messageIds: [message._id], lastMessage: false },\r\n  });\r\n\r\n  dispatch({\r\n    type: typeAdd,\r\n    payload: { message: localMessage, dialogId: message.dialogId },\r\n  });\r\n\r\n  message.socketId = SocketController.getSocketId();\r\n  formData.append(\"text\", message.text);\r\n  formData.append(\"recentMessages\", message.recentMessages);\r\n  formData.append(\"userId\", message.userId);\r\n  formData.append(\"dialog\", message.dialogId);\r\n  formData.append(\"socketId\", SocketController.getSocketId());\r\n\r\n  fetch(`${api.urlApi}/api/dialog/send-message`, {\r\n    method: \"post\",\r\n    headers: {\r\n      // 'Accept': 'application/json',\r\n      // 'Content-Type': 'application/json',\r\n      Authorization: `Bearer ${apiToken}`,\r\n    },\r\n    body: formData,\r\n  })\r\n    .then((response) => response.json())\r\n    .then((messageRes) => {\r\n      if (messageRes.error) {\r\n        return dispatch({\r\n          type: typeError,\r\n          payload: {\r\n            _id: message._id,\r\n            dialogId: message.dialogId,\r\n            voiceSound: message.voiceSound,\r\n          },\r\n        });\r\n      }\r\n      dispatch({\r\n        type: typeSuccessMessage,\r\n        payload: {\r\n          _id: message._id,\r\n          _newId: messageRes._id,\r\n          dialogId: message.dialogId,\r\n        },\r\n      });\r\n    })\r\n    .catch(() => {\r\n      dispatch({\r\n        type: typeError,\r\n        payload: { _id: message._id, dialogId: message.dialogId },\r\n      });\r\n    });\r\n};\r\nexport const deleteLocalMessage = (_id, dialogId, isOrder) => (dispatch) => {\r\n  let messageIds = [_id];\r\n  let dialogs = isOrder\r\n    ? store.getState().dialogs.dialogsOrder\r\n    : store.getState().dialogs.dialogsUser;\r\n  let lastMessage;\r\n  if (\r\n    dialogs.dialogs.find((x) => x._id === dialogId) &&\r\n    !!dialogs.dialogs.find((x) => x._id === dialogId).messages.length\r\n  )\r\n    lastMessage = dialogs.dialogs\r\n      .find((x) => x._id === dialogId)\r\n      .messages.filter((x) => !messageIds.find((y) => y === x._id))\r\n      .pop();\r\n  else lastMessage = false;\r\n\r\n  dispatch({\r\n    type: DIALOGS_DELETE_MESSAGE,\r\n    payload: { dialogId, messageIds, lastMessage },\r\n  });\r\n};\r\nexport const sendMessage = (message, apiToken, isOrder) => (dispatch) => {\r\n  let typeAdd = isOrder ? DIALOGSORDER_ADD_MESSAGE : DIALOGS_ADD_MESSAGE;\r\n  let typeError = isOrder ? DIALOGSORDER_ERROR_MESSAGE : DIALOGS_ERROR_MESSAGE;\r\n  let typeSuccessMessage = isOrder\r\n    ? DIALOGSORDER_SUCCESS_MESSAGE\r\n    : DIALOGS_SUCCESS_MESSAGE;\r\n\r\n  let formData = new FormData();\r\n  let _id = randomInteger(0, 1000000);\r\n  let images = [];\r\n  let files = [];\r\n  let sounds = [];\r\n  let voiceSound = false;\r\n\r\n  formData.append(\"images\", JSON.stringify(message.images));\r\n  formData.append(\"files\", JSON.stringify(message.files));\r\n  formData.append(\"sounds\", JSON.stringify(message.sounds));\r\n  if (message.voiceSound) {\r\n    formData.append(\"voiceSound\", message.voiceSound.file);\r\n    formData.append(\"voiceSoundDuration\", message.voiceSound.duration);\r\n    formData.append(\"voiceSoundRecordLine\", message.voiceSound.recordLine);\r\n    voiceSound = message.voiceSound;\r\n  }\r\n  let localMessage = {\r\n    _id,\r\n    user: store.getState().user,\r\n    text: message.text,\r\n    images: message.images,\r\n    sounds: message.sounds,\r\n    files: message.files,\r\n    voiceSound: voiceSound,\r\n    isLoading: true,\r\n    isError: false,\r\n    isRead: false,\r\n    recentMessage: message.recentMessage,\r\n    createdAt: Date.now(),\r\n    type: \"message\",\r\n  };\r\n  dispatch({\r\n    type: typeAdd,\r\n    payload: { message: localMessage, dialogId: message.dialogId },\r\n  });\r\n\r\n  message.socketId = SocketController.getSocketId();\r\n\r\n  formData.append(\"text\", message.text);\r\n  formData.append(\"recentMessage\", message.recentMessage._id);\r\n  formData.append(\"dialog\", message.dialogId);\r\n  formData.append(\"userId\", message.userId);\r\n  formData.append(\"socketId\", SocketController.getSocketId());\r\n  fetch(`${api.urlApi}/api/dialog/send-message`, {\r\n    method: \"post\",\r\n    headers: {\r\n      Authorization: `Bearer ${apiToken}`,\r\n    },\r\n    body: formData,\r\n  })\r\n    .then((response) => response.json())\r\n    .then((messageRes) => {\r\n      if (messageRes.error) {\r\n        if (messageRes.errors[0].msg === \"max_size\") {\r\n          toast.error(\"Max file size upload 10 Mb.\", {\r\n            position: toast.POSITION.TOP_CENTER,\r\n          });\r\n        }\r\n\r\n        return dispatch({\r\n          type: typeError,\r\n          payload: { _id, dialogId: message.dialogId },\r\n        });\r\n      }\r\n      dispatch({\r\n        type: typeSuccessMessage,\r\n        payload: {\r\n          _id,\r\n          _newId: messageRes._id,\r\n          dialogId: message.dialogId,\r\n          voiceSound: message.voiceSound,\r\n        },\r\n      });\r\n    })\r\n    .catch(() => {\r\n      dispatch({\r\n        type: typeError,\r\n        payload: { _id, dialogId: message.dialogId },\r\n      });\r\n    });\r\n};\r\nexport const readMessages = (\r\n  { dialogId, userId, otherId },\r\n  apiToken,\r\n  isOrder\r\n) => (dispatch) => {\r\n  let typeRead = isOrder ? DIALOGSORDER_READ_MESSAGES : DIALOGS_READ_MESSAGES;\r\n  let dialogs = isOrder\r\n    ? store.getState().dialogs.dialogsOrder\r\n    : store.getState().dialogs.dialogsUser;\r\n  let readMessages = dialogs.dialogs\r\n    .find((dialog) => dialog._id === dialogId)\r\n    .messages.filter((x) => !x.isRead && x.user._id !== userId);\r\n\r\n  setTimeout(() => {\r\n    if (!!readMessages.length) {\r\n      dispatch({\r\n        type: typeRead,\r\n        payload: { dialogId, userId: otherId, noRead: true, noReadCount: true },\r\n      });\r\n    }\r\n  }, 1);\r\n\r\n  if (!!readMessages.length) {\r\n    fetch(`${api.urlApi}/api/dialog/read-messages`, {\r\n      method: \"post\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${apiToken}`,\r\n      },\r\n      body: JSON.stringify({\r\n        dialogId,\r\n        otherId,\r\n        socketId: SocketController.getSocketId(),\r\n      }),\r\n    })\r\n      .then()\r\n      .catch(() => {});\r\n  }\r\n};\r\n\r\nexport const loadMessages = ({ dialogId }, apiToken, isOrder) => (dispatch) => {\r\n  let typeLoad = isOrder ? DIALOGSORDER_LOAD_MESSAGES : DIALOGS_LOAD_MESSAGES;\r\n  let typeSetLoad = isOrder ? DIALOGORDER_SET_LOADING : DIALOG_SET_LOADING;\r\n  let dialogs = isOrder\r\n    ? store.getState().dialogs.dialogsOrder\r\n    : store.getState().dialogs.dialogsUser;\r\n  return new Promise((resolve, reject) => {\r\n    let lastMessage = dialogs.dialogs.find((x) => x._id === dialogId)\r\n      .messages[0];\r\n    dispatch({\r\n      type: typeSetLoad,\r\n      payload: dialogId,\r\n    });\r\n\r\n    fetch(`${api.urlApi}/api/dialog/load-messages`, {\r\n      method: \"post\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${apiToken}`,\r\n      },\r\n      body: JSON.stringify({\r\n        dialogId,\r\n        lastMessageId: lastMessage._id,\r\n      }),\r\n    })\r\n      .then((response) => response.json())\r\n      .then((messages) => {\r\n        dispatch({\r\n          type: typeLoad,\r\n          payload: {\r\n            dialogId,\r\n            messages: messages.reverse(),\r\n            canLoad: messages.length === 50,\r\n          },\r\n        });\r\n        resolve();\r\n      })\r\n      .catch(() => {});\r\n  });\r\n};\r\n\r\n//DIALOGSORDER\r\nexport const dialogsOrderGet = (apiToken) => (dispatch) => {\r\n  fetch(`${api.urlApi}/api/dialogsOrder/get-all`, {\r\n    method: \"post\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${apiToken}`,\r\n    },\r\n  })\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      for (let i = 0; i < data.dialogs.length; i++) {\r\n        let existDialog = store\r\n          .getState()\r\n          .dialogs.dialogsOrder.dialogs.find(\r\n            (x) => x._id === data.dialogs[i]._id\r\n          );\r\n\r\n        if (existDialog) {\r\n          data.dialogs[i].messages = existDialog.messages;\r\n        }\r\n        data.dialogs[i].isGetted = false;\r\n        data.dialogs[i].canLoad = true;\r\n        data.dialogs[i].user = data.dialogs[i].users.find(\r\n          (user) => user._id !== store.getState().user._id\r\n        );\r\n\r\n        if (!data.dialogs[i].user)\r\n          data.dialogs[i].user = data.dialogs[i].users[0];\r\n\r\n        data.dialogs[i].typers = [];\r\n      }\r\n      dispatch({\r\n        type: DIALOGSORDER_GET,\r\n        payload: data,\r\n      });\r\n    });\r\n};\r\n\r\nexport const dialogOrderGet = (userId, orderId, apiToken) => (dispatch) => {\r\n  return new Promise((resolve, reject) => {\r\n    fetch(`${api.urlApi}/api/dialogsOrder/get`, {\r\n      method: \"post\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${apiToken}`,\r\n      },\r\n      body: JSON.stringify({\r\n        userId,\r\n        orderId,\r\n      }),\r\n    })\r\n      .then((response) => response.json())\r\n      .then(({ dialog, messages }) => {\r\n        if (!dialog.error) {\r\n          dialog.user = dialog.users.find(\r\n            (user) => user._id !== store.getState().user._id\r\n          );\r\n          if (!dialog.user) dialog.user = dialog.users[0];\r\n\r\n          dialog.typing = false;\r\n\r\n          dialog.isGetted = true;\r\n          dialog.messages = messages.reverse();\r\n          dialog.lastMessage = false;\r\n          dialog.canLoad = messages.length === 50;\r\n          dialog.isLoading = false;\r\n\r\n          dispatch({\r\n            type: DIALOGSORDER_ADD,\r\n            payload: { dialog },\r\n          });\r\n          resolve();\r\n        } else {\r\n          let dialog = {\r\n            isGetted: true,\r\n            isNotFound: true,\r\n            user: { _id: userId },\r\n          };\r\n          dispatch({\r\n            type: DIALOGSORDER_ADD,\r\n            payload: {dialog},\r\n          });\r\n          resolve();\r\n        }\r\n      });\r\n  });\r\n};\r\n\r\nexport const dialogOrderLoad = (userId, orderId, apiToken) => (dispatch) => {\r\n  fetch(`${api.urlApi}/api/dialogsOrder/get`, {\r\n    method: \"post\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${apiToken}`,\r\n    },\r\n    body: JSON.stringify({\r\n      userId,\r\n      orderId,\r\n    }),\r\n  })\r\n    .then((response) => response.json())\r\n    .then(({ dialog, messages }) => {\r\n      dialog.messages = messages.reverse();\r\n\r\n      dispatch({\r\n        type: DIALOGORDER_LOAD,\r\n        payload: {\r\n          dialogId: dialog._id,\r\n          messages: dialog.messages,\r\n          canLoad: messages.length === 50,\r\n        },\r\n      });\r\n    });\r\n};\r\n","module.exports = __webpack_public_path__ + \"static/media/attachDelete.661f2d69.svg\";","module.exports = \"data:image/gif;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/document.26436f4e.svg\";","// App\r\nimport React from \"react\";\r\n\r\nclass TimeTag extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className=\"time-tag d-flex\">\r\n        <div className=\"col\"></div>\r\n        <span>{this.props.date}</span>\r\n        <div className=\"col\"></div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TimeTag;\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"circle\", {\n  cx: 16,\n  cy: 16,\n  r: 15.5,\n  stroke: \"#909090\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M23.6285 15.9005C23.7196 15.3063 23.3811 14.7095 22.7188 14.3107L13.876 8.98374C13.2704 8.61964 12.6748 8.56405 12.199 8.8276C11.7191 9.0933 11.4466 9.63461 11.4318 10.3519L11.3216 15.6253L11.2158 20.7004C11.2037 21.2642 11.357 21.7276 11.6583 22.0405C12.1256 22.5258 12.853 22.5668 13.6051 22.1509L22.6533 17.1286C23.208 16.8215 23.5545 16.3855 23.6285 15.9005Z\",\n  fill: \"#909090\"\n});\n\nvar SvgPlay = function SvgPlay(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 32,\n    height: 32,\n    viewBox: \"0 0 32 32\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgPlay, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/play.adf7c54d.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"circle\", {\n  cx: 16,\n  cy: 16,\n  r: 15.5,\n  stroke: \"#A038E3\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"rect\", {\n  x: 10,\n  y: 9,\n  width: 5,\n  height: 14,\n  rx: 2.5,\n  fill: \"#A038E3\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"rect\", {\n  x: 17,\n  y: 9,\n  width: 5,\n  height: 14,\n  rx: 2.5,\n  fill: \"#A038E3\"\n});\n\nvar SvgPauseRecord = function SvgPauseRecord(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 32,\n    height: 32,\n    viewBox: \"0 0 32 32\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgPauseRecord, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/pauseRecord.5fdca313.svg\";\nexport { ForwardRef as ReactComponent };","import React from \"react\";\r\n\r\nclass RecordLineSvg extends React.Component {\r\n  state = {\r\n    width: false,\r\n    height: false,\r\n  };\r\n  updateDimensions = () => {\r\n    this.setState({\r\n      width: document.getElementById(this.props.id).clientWidth,\r\n      height: document.getElementById(this.props.id).clientHeight,\r\n    });\r\n  };\r\n  componentDidMount() {\r\n    this.updateDimensions();\r\n    window.addEventListener(\"resize\", this.updateDimensions);\r\n  }\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"resize\", this.updateDimensions);\r\n  }\r\n  render() {\r\n    let paddingStick = 1,\r\n      widthStick = 2;\r\n    let svg = {\r\n      width: this.state.width,\r\n      height: this.state.height,\r\n    };\r\n    let RecordLine = this.props.RecordLine.filter((item) => item != \"Infinity\");\r\n    if (this.props.isAdaptive) {\r\n      //Удалять каждый n элемент при выводе полного сообщения, если не умещается в канвас\r\n      let countAllSrick = svg.width / (widthStick + paddingStick); //Всего допустимо полосок\r\n\r\n      let difference = Math.abs(RecordLine.length - countAllSrick);\r\n      if (RecordLine.length > countAllSrick) {\r\n        //Вычиследние с какой периодичностью удалять\r\n        let everyIndex = false;\r\n        everyIndex = Math.floor(RecordLine.length / difference);\r\n\r\n        let counter = RecordLine.length;\r\n        if (RecordLine.length > countAllSrick)\r\n          RecordLine = RecordLine.filter((item, index, array) => {\r\n            if (\r\n              !(everyIndex && index % everyIndex == 0) ||\r\n              counter <= countAllSrick\r\n            ) {\r\n              return true;\r\n            } else {\r\n              counter--;\r\n              return false;\r\n            }\r\n          });\r\n      } else if (RecordLine.length < countAllSrick) {\r\n        let countduple = Math.ceil(1 / (RecordLine.length / difference));\r\n        for (\r\n          let i = 0;\r\n          i < RecordLine.length && RecordLine.length < countAllSrick;\r\n          i++\r\n        ) {\r\n          let duplearray = [];\r\n          for (\r\n            let y = 0;\r\n            y < countduple &&\r\n            RecordLine.length + duplearray.length < countAllSrick;\r\n            y++\r\n          )\r\n            duplearray[y] = RecordLine[i];\r\n          RecordLine = [\r\n            ...RecordLine.slice(0, i),\r\n            ...duplearray,\r\n            ...RecordLine.slice(i),\r\n          ];\r\n          i += duplearray.length;\r\n        }\r\n      }\r\n    }\r\n    let countColors = this.props.percentTime * RecordLine.length;\r\n    let maxValue = Math.max.apply(null, RecordLine);\r\n    return (\r\n      <svg\r\n        id={this.props.id}\r\n        onClick={(e) => {\r\n          this.props.onClick(e, this.state.width);\r\n        }}\r\n      >\r\n        {RecordLine.map((item, index, items) => {\r\n          let height = (item / maxValue) * this.state.height;\r\n          if (!height) height = 1;\r\n          return (\r\n            <rect\r\n              key={index}\r\n              x={\r\n                svg.width -\r\n                (RecordLine.length - index) * (paddingStick + widthStick)\r\n              }\r\n              y={svg.height / 2 - height / 2}\r\n              height={height}\r\n              width={widthStick}\r\n              rx=\"2\"\r\n              fill={`${index < countColors ? \"#9509EF\" : \"#909090\"}`}\r\n            />\r\n          );\r\n        })}\r\n      </svg>\r\n    );\r\n  }\r\n}\r\nexport default RecordLineSvg;\r\n","// App\r\nimport React from \"react\";\r\n\r\n// Material\r\nimport { ReactComponent as PlayArrowIcon } from \"../../img/play.svg\";\r\nimport { ReactComponent as PauseIcon } from \"../../img/pauseRecord.svg\";\r\nimport { randomInteger, padZero } from \"../../controllers/FunctionsController\";\r\nimport loading from \"../../img/loadAudio.gif\";\r\nimport RecordLineSvg from \"./RecordLineSvg\";\r\n\r\nclass AudioX extends React.Component {\r\n  state = {\r\n    currentTime: 0,\r\n    audio: false,\r\n    randomId: randomInteger(0, 10000000),\r\n  };\r\n  componentDidMount() {\r\n    let thisAudio = document.getElementsByName(this.props.sound.path);\r\n    for (let audio of thisAudio) {\r\n      audio.volume = 0.5;\r\n      this.setState({\r\n        audio,\r\n      });\r\n      break;\r\n    }\r\n\r\n    let audio = document.getElementById(this.state.randomId);\r\n    audio.onpause = (e) => {\r\n      audio.parentElement.className = \"message-sound\";\r\n    };\r\n\r\n    audio.onplay = () => {\r\n      audio.parentElement.className = \"message-sound active\";\r\n    };\r\n    audio.ontimeupdate = (e) => {\r\n      this.setState({ currentTime: e.target.currentTime });\r\n    };\r\n  }\r\n  componentWillUnmount() {\r\n    if (document.getElementsByName(this.props.sound.path)) {\r\n      document.getElementsByName(this.props.sound.path).className =\r\n        \"message-sound\";\r\n      if (this.state.audio) this.state.audio.pause();\r\n    }\r\n  }\r\n\r\n  playAudio(e) {\r\n    e.stopPropagation();\r\n    if (!this.props.isLoading) {\r\n      let otherAudio = document.getElementsByClassName(\r\n        \"message-sounds-element\"\r\n      );\r\n\r\n      for (let audio of otherAudio) {\r\n        audio.pause();\r\n      }\r\n\r\n      let thisAudio = document.getElementsByName(this.props.sound.path);\r\n\r\n      for (let audio of thisAudio) {\r\n        audio.play();\r\n      }\r\n    }\r\n  }\r\n\r\n  changeDurationAudio(e, width) {\r\n    e.stopPropagation();\r\n    let position = (e.nativeEvent.layerX - 40) / width;\r\n    let time = this.state.audio.duration * position;\r\n\r\n    let thisAudio = document.getElementsByName(this.props.sound.path);\r\n\r\n    for (let audio of thisAudio) {\r\n      audio.currentTime = time;\r\n    }\r\n  }\r\n\r\n  stopAudio(e) {\r\n    e.stopPropagation();\r\n\r\n    let thisAudio = document.getElementsByName(this.props.sound.path);\r\n\r\n    for (let audio of thisAudio) {\r\n      audio.pause();\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <>\r\n        <div\r\n          className={`message-sound ${this.props.isLoading ? \"d-none\" : \"\"}`}\r\n        >\r\n          <audio\r\n            preload=\"metadata\"\r\n            className={`message-sounds-element`}\r\n            id={this.state.randomId}\r\n            name={this.props.sound.path}\r\n            src={this.props.sound.path}\r\n          />\r\n          <span\r\n            className=\"play\"\r\n            onClick={(e) => {\r\n              this.playAudio(e);\r\n            }}\r\n          >\r\n            <PlayArrowIcon style={{ color: \"#008FF7\" }} />\r\n          </span>\r\n          <span\r\n            className=\"pause\"\r\n            onClick={(e) => {\r\n              this.stopAudio(e);\r\n            }}\r\n          >\r\n            <PauseIcon style={{ color: \"#008FF7\" }} />\r\n          </span>\r\n          {!this.props.isLoading && (\r\n            <>\r\n              <div className=\"message-sound-info\">\r\n                <div className=\"svg-wrapper\">\r\n                  <RecordLineSvg\r\n                    className=\"sound-canvas\"\r\n                    onClick={this.changeDurationAudio.bind(this)}\r\n                    percentTime={\r\n                      this.state.currentTime / this.props.sound.duration\r\n                    }\r\n                    isAdaptive={true}\r\n                    RecordLine={this.props.sound.recordLine}\r\n                    id={`svg-${this.props.sound.path}`}\r\n                  />\r\n                </div>\r\n                {!this.props.isVoiceSound && (\r\n                  <p className=\"message-sounds-name\">{this.props.sound.name}</p>\r\n                )}\r\n                <p className=\"message-sounds-duration\">\r\n                  {this.state.currentTime\r\n                    ? padZero(this.state.currentTime)\r\n                    : padZero(this.props.sound.duration)}\r\n                </p>\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n        {this.props.isLoading && <img src={loading} alt=\"\" />}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AudioX;\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M17.9985 8.59543C17.9985 5.53486 15.2997 3.06483 11.9603 3.06483H3.22644L5.39288 1.02208L4.21991 0L0.586486 3.33028L0 3.92082L0.586486 4.40347L4.33752 7.78911L5.51049 6.77129L3.10729 4.56388H11.9603C14.4238 4.56388 16.2947 6.33833 16.2947 8.59543V10.8H18V8.59543H17.9985Z\",\n  fill: \"#DDDDDD\"\n});\n\nvar SvgReply = function SvgReply(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 17,\n    viewBox: \"0 0 18 11\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgReply, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/reply.39f6b282.svg\";\nexport { ForwardRef as ReactComponent };","// App\r\nimport React from \"react\";\r\n\r\nclass RecentMessage extends React.Component {\r\n  render() {\r\n    return (\r\n      <div\r\n        className=\"recentMessage\"\r\n        onClick={() => {\r\n          this.props.scrollTo(this.props.message._id);\r\n        }}\r\n      >\r\n        <div className=\"recentContent\">\r\n          <div className=\"name\">\r\n            {this.props.message.user.name.middle}{\" \"}\r\n            {this.props.message.user.name.first}\r\n          </div>\r\n          <div className=\"message-content\">\r\n            {this.props.message.text}\r\n            {this.props.message.voiceSound && <div>Аудиозапись</div>}\r\n            {(!!this.props.message.images.length ||\r\n              !!this.props.message.files.length ||\r\n              !!this.props.message.sounds.length) && <div>Вложения</div>}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default RecentMessage;\r\n","// App\r\nimport React from \"react\";\r\nimport Avatar from \"../../Elements/Avatar\";\r\nimport TimeTag from \"./TimeTag\";\r\nimport { getHM, timeAt } from \"../../controllers/TimeController\";\r\nimport Audio from \"./Audio\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { ReactComponent as ErrorSvg } from \"../../img/error-red.svg\";\r\nimport { ReactComponent as Reply } from \"../../img/reply.svg\";\r\nimport RecentMessage from \"./RecentMessage\";\r\nimport documentSvg from \"../../img/document.svg\";\r\nclass Message extends React.Component {\r\n  state = {\r\n    isSelected: false,\r\n  };\r\n\r\n  componentDidUpdate() {\r\n    if (this.props.scrollingMessage === this.props.message._id) {\r\n      this.setState({ isSelected: true });\r\n    } else this.setState({ isSelected: false });\r\n  }\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    if (\r\n      JSON.stringify(nextProps.message) === JSON.stringify(this.props.message)\r\n    ) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n  render() {\r\n    let isHistoryDate = true;\r\n    let moreHour = false;\r\n    if (!!this.props.prevMessage) {\r\n      let date1 = new Date(this.props.message.createdAt);\r\n      let date2 = new Date(this.props.prevMessage.createdAt);\r\n      if (\r\n        date1.getFullYear() === date2.getFullYear() &&\r\n        date1.getMonth() === date2.getMonth() &&\r\n        date1.getDate() === date2.getDate()\r\n      ) {\r\n        isHistoryDate = false;\r\n      }\r\n\r\n      let diffHours = Math.abs(date1 - date2) / 36e5;\r\n\r\n      if (diffHours > 1) {\r\n        moreHour = true;\r\n      }\r\n    }\r\n    let myMessage = this.props.user._id == this.props.message.user._id;\r\n    let isFirst =\r\n      (this.props.prevMessage &&\r\n        this.props.prevMessage.user._id !== this.props.message.user._id) ||\r\n      !this.props.prevMessage ||\r\n      moreHour;\r\n    let isShowMoreElement = (isFirst || isHistoryDate) && !this.props.isRecent;\r\n\r\n    return (\r\n      <>\r\n        {isHistoryDate && (\r\n          <TimeTag date={timeAt(new Date(this.props.message.createdAt))} />\r\n        )}\r\n        <div\r\n          id={`message${this.props.message._id}`}\r\n          className={`messages-block ${isShowMoreElement ? \"padding\" : \"\"} ${\r\n            myMessage ? \"my\" : \"not-my\"\r\n          } ${!this.props.message.isRead ? \"unread\" : \"\"} ${\r\n            this.state.isSelected ? \"selected\" : \"\"\r\n          }`}\r\n        >\r\n          <div className=\"avatar-message d-flex\">\r\n            {(isFirst || isHistoryDate) && !this.props.isRecent && (\r\n              <Avatar\r\n                name={\r\n                  this.props.message.user.name.first.charAt(0) +\r\n                  this.props.message.user.name.last.charAt(0)\r\n                }\r\n              />\r\n            )}\r\n          </div>\r\n          <div className=\"col dialog-content\">\r\n            <div className=\"head-message\">\r\n              {isShowMoreElement && (\r\n                <span className=\"name\">\r\n                  {this.props.message.user.name.first}\r\n                </span>\r\n              )}\r\n              {isShowMoreElement && (\r\n                <span className=\"time\">\r\n                  {getHM(this.props.message.createdAt)}\r\n                </span>\r\n              )}\r\n            </div>\r\n            <div className=\"message-content\">\r\n              {this.props.message.text}\r\n              {this.props.message.voiceSound && (\r\n                <Audio\r\n                  duration={this.props.message.voiceSound.duration}\r\n                  sound={this.props.message.voiceSound}\r\n                  isVoiceSound={true}\r\n                  isLoading={this.props.message.isLoading}\r\n                />\r\n              )}\r\n              {this.props.message.sounds.map((item, index) => {\r\n                return <Audio key={index} sound={item} />;\r\n              })}\r\n              {!!this.props.message.images.length && (\r\n                <div\r\n                  className={`message-images ${\r\n                    this.props.message.images.length >= 3 ? \"more\" : \"\"\r\n                  }\r\n                  ${this.props.message.images.length === 1 ? \"one\" : \"\"}\r\n                  ${this.props.message.images.length === 2 ? \"two\" : \"\"}`}\r\n                >\r\n                  {this.props.message.images.map((image, index, images) => {\r\n                    let width;\r\n                    let isBlur = false;\r\n\r\n                    if (images.length > 4 && index === 3) isBlur = true;\r\n\r\n                    if (index > 3) return null;\r\n\r\n                    if (isBlur)\r\n                      return (\r\n                        <div\r\n                          key={index}\r\n                          className=\"image\"\r\n                          onClick={() => {\r\n                            this.props.addImageToFancyBox(images, index);\r\n                          }}\r\n                        >\r\n                          <div className=\"image-blur\">\r\n                            <span>{`+${images.length - 3}`}</span>\r\n                            <img\r\n                              key={index}\r\n                              src={image.path}\r\n                              alt={image.name}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      );\r\n\r\n                    return (\r\n                      <div\r\n                        key={index}\r\n                        className=\"image\"\r\n                        onClick={() => {\r\n                          this.props.addImageToFancyBox(images, index);\r\n                        }}\r\n                      >\r\n                        <img src={image.path} alt={image.name} />\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              )}\r\n              {!!this.props.message.files.length && (\r\n                <div className=\"message-files\">\r\n                  {this.props.message.files.map((item, index) => {\r\n                    return (\r\n                      <div key={index} className=\"message-file\">\r\n                        <img src={documentSvg} alt=\"\" />\r\n                        <div className=\"file-info\">\r\n                          <div className=\"name\">{item.name}</div>\r\n                          <div className=\"size\">\r\n                            {item.size > 1048576\r\n                              ? Math.floor(item.size / 1048576) + \"Мб.\"\r\n                              : Math.floor(item.size / 1024) + \"Кб.\"}\r\n                          </div>\r\n                        </div>\r\n                        <a className=\"sharected-link\" href={item.path}></a>\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              )}\r\n              {this.props.message.recentMessage && (\r\n                <RecentMessage\r\n                  scrollTo={(top) => {\r\n                    this.props.scrollTo(top);\r\n                  }}\r\n                  message={this.props.message.recentMessage}\r\n                />\r\n              )}\r\n              {!this.props.message.isError &&\r\n                !myMessage &&\r\n                !this.props.isRecent && (\r\n                  <span\r\n                    className=\"reply-message\"\r\n                    onClick={() => {\r\n                      this.props.setRecentMessage(this.props.message);\r\n                    }}\r\n                  >\r\n                    <Reply />\r\n                  </span>\r\n                )}\r\n            </div>\r\n          </div>\r\n          {this.props.message.isError && (\r\n            <span className=\"error-retry\">\r\n              <ErrorSvg />\r\n              <div className=\"action-menu\">\r\n                <div\r\n                  onClick={() => {\r\n                    this.props.retrySendMessage(this.props.message);\r\n                  }}\r\n                >\r\n                  Повторить попытку\r\n                </div>\r\n                <div\r\n                  onClick={() => {\r\n                    this.props.deleteLocalMessage(this.props.message._id);\r\n                  }}\r\n                >\r\n                  Удалить\r\n                </div>\r\n              </div>\r\n            </span>\r\n          )}\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\nexport default Message;\r\n","// App\r\nimport React from \"react\";\r\n\r\n// Material\r\nimport { ReactComponent as PlayArrowIcon } from \"../../img/play.svg\";\r\nimport { ReactComponent as PauseIcon } from \"../../img/pauseRecord.svg\";\r\nimport { randomInteger, padZero } from \"../../controllers/FunctionsController\";\r\nimport loading from \"../../img/loadAudio.gif\";\r\nimport RecordLineSvg from \"./RecordLineSvg\";\r\n\r\nclass AudioVoice extends React.Component {\r\n  state = {\r\n    currentTime: 0,\r\n    audio: false,\r\n    randomId: randomInteger(0, 10000000),\r\n  };\r\n  componentDidMount() {\r\n    let thisAudio = document.getElementsByName(this.props.sound.path);\r\n    for (let audio of thisAudio) {\r\n      audio.volume = 0.5;\r\n      this.setState({\r\n        audio,\r\n      });\r\n      break;\r\n    }\r\n\r\n    let audio = document.getElementById(this.state.randomId);\r\n    audio.onpause = (e) => {\r\n      audio.parentElement.className = \"voice-sound\";\r\n    };\r\n\r\n    audio.onplay = () => {\r\n      audio.parentElement.className = \"voice-sound active\";\r\n    };\r\n    audio.ontimeupdate = (e) => {\r\n      this.setState({ currentTime: e.target.currentTime });\r\n    };\r\n  }\r\n  componentWillUnmount() {\r\n    if (document.getElementsByName(this.props.sound.path)) {\r\n      document.getElementsByName(this.props.sound.path).className =\r\n        \"message-sound\";\r\n      if (this.state.audio) this.state.audio.pause();\r\n    }\r\n  }\r\n\r\n  playAudio(e) {\r\n    e.stopPropagation();\r\n    if (!this.props.isLoading) {\r\n      let otherAudio = document.getElementsByClassName(\r\n        \"message-sounds-element\"\r\n      );\r\n\r\n      for (let audio of otherAudio) {\r\n        audio.pause();\r\n      }\r\n\r\n      let thisAudio = document.getElementsByName(this.props.sound.path);\r\n\r\n      for (let audio of thisAudio) {\r\n        audio.play();\r\n      }\r\n    }\r\n  }\r\n\r\n  changeDurationAudio(e, width) {\r\n    e.stopPropagation();\r\n    let position = (e.nativeEvent.layerX - 40) / width;\r\n    let time = this.state.audio.duration * position;\r\n\r\n    let thisAudio = document.getElementsByName(this.props.sound.path);\r\n\r\n    for (let audio of thisAudio) {\r\n      audio.currentTime = time;\r\n    }\r\n  }\r\n\r\n  stopAudio(e) {\r\n    e.stopPropagation();\r\n\r\n    let thisAudio = document.getElementsByName(this.props.sound.path);\r\n\r\n    for (let audio of thisAudio) {\r\n      audio.pause();\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <>\r\n        <div className=\"voice-sound\">\r\n          <audio\r\n            preload=\"metadata\"\r\n            className={`message-sounds-element`}\r\n            id={this.state.randomId}\r\n            name={this.props.sound.path}\r\n            src={this.props.sound.path}\r\n          />\r\n          <span\r\n            className=\"play\"\r\n            onClick={(e) => {\r\n              this.playAudio(e);\r\n            }}\r\n          >\r\n            <PlayArrowIcon style={{ color: \"#008FF7\" }} />\r\n          </span>\r\n          <span\r\n            className=\"pause\"\r\n            onClick={(e) => {\r\n              this.stopAudio(e);\r\n            }}\r\n          >\r\n            <PauseIcon style={{ color: \"#008FF7\" }} />\r\n          </span>\r\n          <div className=\"svg-wrapper\">\r\n            <RecordLineSvg\r\n              className=\"sound-canvas\"\r\n              onClick={this.changeDurationAudio.bind(this)}\r\n              percentTime={this.state.currentTime / this.props.sound.duration}\r\n              isAdaptive={true}\r\n              RecordLine={this.props.sound.recordLine}\r\n              id={`svg-${this.props.sound.path}`}\r\n            />\r\n          </div>\r\n          <p className=\"voice-sounds-duration\">\r\n            {this.state.currentTime\r\n              ? padZero(this.state.currentTime)\r\n              : padZero(this.props.sound.duration)}\r\n          </p>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AudioVoice;\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\",\n  strokeWidth: 1.5\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m16 20h24v24h-24z\",\n  opacity: 0.4\n}), /*#__PURE__*/React.createElement(\"g\", {\n  stroke: \"#b1bbc8\",\n  strokeLinecap: \"round\",\n  strokeWidth: 2.5\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m22.5 26.5 11 11\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m33.5 26.5-11 11\"\n})));\n\nvar SvgResetRecord = function SvgResetRecord(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    height: 24,\n    viewBox: \"16 20 24 24\",\n    width: 24,\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgResetRecord, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/ResetRecord.d0baf25e.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"circle\", {\n  cx: 16,\n  cy: 16,\n  r: 15.5,\n  stroke: \"#9509EF\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"rect\", {\n  x: 9,\n  y: 9,\n  width: 14,\n  height: 14,\n  rx: 3,\n  fill: \"#A038E3\"\n});\n\nvar SvgStopRecord = function SvgStopRecord(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 32,\n    height: 32,\n    viewBox: \"0 0 32 32\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgStopRecord, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/stopRecord.521f7549.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M23.6758 13.6758C23.8439 12.5664 23.2095 11.4504 21.9712 10.7031L5.43795 0.721671C4.30568 0.0394166 3.19317 -0.0665433 2.30548 0.42399C1.41024 0.918528 0.903371 1.92861 0.878254 3.26826L0.691553 13.1176L0.512155 22.5963C0.491641 23.6493 0.779634 24.5155 1.34335 25.101C2.2178 26.0092 3.57634 26.0883 4.97953 25.3142L21.859 15.9661C22.8939 15.3946 23.5394 14.5815 23.6758 13.6758V13.6758ZM21.1025 14.5975L4.22219 23.9453C3.86511 24.1421 2.97826 24.5444 2.46958 24.0161C2.20332 23.7395 2.06282 23.2458 2.07513 22.6256L2.23998 13.9288L8.88516 14.0545C8.98891 14.0582 9.09238 14.0413 9.18952 14.0046C9.28666 13.968 9.37553 13.9124 9.45094 13.841C9.52636 13.7697 9.5868 13.684 9.62876 13.589C9.67071 13.4941 9.69333 13.3917 9.6953 13.2879C9.69727 13.1841 9.67854 13.0809 9.64022 12.9845C9.60189 12.888 9.54474 12.8001 9.47208 12.7259C9.39942 12.6518 9.31273 12.5928 9.21705 12.5525C9.12136 12.5122 9.01861 12.4914 8.91479 12.4912L2.26961 12.3656L2.44122 3.29815C2.45537 2.55135 2.68143 2.00266 3.06116 1.79281C3.43389 1.58698 4.00602 1.68464 4.63011 2.06115L21.1636 12.0428C21.3767 12.1681 21.5726 12.3204 21.7464 12.496C21.9541 12.7117 22.1891 13.0504 22.1297 13.4425C22.0674 13.8563 21.7026 14.2661 21.1025 14.5975V14.5975Z\",\n  fill: \"#909090\"\n});\n\nvar SvgSend = function SvgSend(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 26,\n    viewBox: \"0 0 24 26\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgSend, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/send.dcfe51b8.svg\";\nexport { ForwardRef as ReactComponent };","// App\r\nimport React from \"react\";\r\nimport AudioVoice from \"../AudioVoice\";\r\nimport { ReactComponent as ResetRecord } from \"../../../img/ResetRecord.svg\";\r\nimport { ReactComponent as StopRecord } from \"../../../img/stopRecord.svg\";\r\nimport { ReactComponent as Send } from \"../../../img/send.svg\";\r\nimport { ReactComponent as LoadGif } from \"../../../img/Loading.svg\";\r\nimport { renderCanvas } from \"../../../controllers/FunctionsController\";\r\n// Internet Explorer 6-11\r\nconst isIE = /*@cc_on!@*/ false || !!document.documentMode;\r\n// Edge 20+\r\nconst isEdge = !isIE && !!window.StyleMedia;\r\n\r\nlet m, localStream, source, analyser, processor, ctx, audioChunks;\r\nclass PanelRecord extends React.Component {\r\n  state = {\r\n    isRecordPause: false,\r\n    isAudioPlay: false,\r\n    isSending: false,\r\n    RecordLine: [],\r\n    countdown: 0,\r\n    audioSrc: false,\r\n  };\r\n  startTimer() {\r\n    this.timer = setInterval(() => {\r\n      if (this.timer) this.setState({ countdown: ++this.state.countdown });\r\n    }, 1000);\r\n  }\r\n  stopTimer() {\r\n    clearInterval(this.timer);\r\n    this.timer = false;\r\n  }\r\n  //TImer ENd\r\n  recordStart() {\r\n    return new Promise((resolve, reject) => {\r\n      ctx = new (window.AudioContext || window.webkitAudioContext)();\r\n      audioChunks = [];\r\n      let getMedia = (\r\n        navigator.getUserMedia ||\r\n        navigator.webkitGetUserMedia ||\r\n        navigator.mozGetUserMedia ||\r\n        navigator.msGetUserMedia\r\n      ).bind(navigator);\r\n      getMedia(\r\n        { audio: true, video: false },\r\n        (stream) => {\r\n          if (stream) {\r\n            localStream = stream;\r\n            this.renderAudioVolume(localStream);\r\n            let mediaRecorder = new MediaRecorder(stream);\r\n            m = mediaRecorder;\r\n            m.addEventListener(\"start\", this.startTimer.bind(this));\r\n            m.addEventListener(\"pause\", this.stopTimer.bind(this));\r\n            m.addEventListener(\"stop\", this.stopTimer.bind(this));\r\n            m.start();\r\n          }\r\n        },\r\n        (err) => {\r\n          this.props.stopRec();\r\n        }\r\n      );\r\n    });\r\n  }\r\n  recordStop() {\r\n    return new Promise(async (resolve, reject) => {\r\n      if (!this.state.isRecordPause && localStream) {\r\n        let onRecordingReady = (e) => {\r\n          this.props\r\n            .addVoiceSound(e.data, this.state.countdown, this.state.RecordLine)\r\n            .then(() => {\r\n              this.setState({\r\n                isRecordPause: true,\r\n                audioSrc: URL.createObjectURL(e.data),\r\n              });\r\n              resolve();\r\n            });\r\n        };\r\n        m.addEventListener(\"dataavailable\", onRecordingReady);\r\n        if (m) m.stop();\r\n        m = false;\r\n        if (localStream) {\r\n          localStream.getAudioTracks()[0].stop();\r\n          localStream = false;\r\n        }\r\n        if (source) {\r\n          source.disconnect(analyser);\r\n          source.disconnect(processor);\r\n        }\r\n        source = false;\r\n        if (processor) processor.disconnect(ctx.destination);\r\n        processor = false;\r\n        ctx = false;\r\n      } else resolve();\r\n    });\r\n  }\r\n  componentWillUnmount() {\r\n    this.recordStop();\r\n  }\r\n\r\n  renderAudioVolume(stream) {\r\n    source = ctx.createMediaStreamSource(stream);\r\n    analyser = ctx.createAnalyser();\r\n    processor = ctx.createScriptProcessor(4096, 2, 2);\r\n    processor.connect(ctx.destination);\r\n    source.connect(analyser);\r\n    source.connect(processor);\r\n\r\n    let data = new Uint8Array(analyser.frequencyBinCount);\r\n    let count = 0;\r\n\r\n    processor.onaudioprocess = (e) => {\r\n      count++;\r\n      analyser.getByteFrequencyData(data);\r\n      let volumes = [];\r\n      for (let i = 0; i < data.length; i++) {\r\n        volumes.push({ arg: i, val: data[i] });\r\n      }\r\n\r\n      this.setState({\r\n        RecordLine: [...this.state.RecordLine, volumes[2].val],\r\n      });\r\n      renderCanvas(\r\n        false,\r\n        \"voice-canvas\",\r\n        this.state.RecordLine,\r\n        false,\r\n        \"#9933ff\"\r\n      );\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.recordStart();\r\n  }\r\n  render() {\r\n    return (\r\n      <>\r\n        <ResetRecord\r\n          className=\"resetRecord\"\r\n          onClick={async () => {\r\n            // if (!this.state.isRecordPause)\r\n            this.recordStop().then(async () => {\r\n              await this.props.stopRec();\r\n              await this.props.addVoiceSound(false);\r\n            });\r\n          }}\r\n        />\r\n        <div className=\"input-chat\">\r\n          {!this.state.isRecordPause && (\r\n            <>\r\n              <StopRecord\r\n                onClick={() => {\r\n                  this.setState({ isRecordPause: true });\r\n                  this.recordStop();\r\n                }}\r\n                className=\"RecordPauseStart\"\r\n              />\r\n              <canvas id=\"voice-canvas\"></canvas>\r\n              <div className=\"timer\">\r\n                {String(this.state.countdown).toTimer()}\r\n              </div>\r\n            </>\r\n          )}\r\n          {this.state.isRecordPause && this.state.audioSrc && (\r\n            <AudioVoice\r\n              sound={{\r\n                duration: this.state.countdown,\r\n                path: this.state.audioSrc,\r\n                recordLine: this.state.RecordLine,\r\n              }}\r\n            />\r\n          )}\r\n        </div>\r\n        {!this.state.isSending && (\r\n          <Send\r\n            className=\"sendRecord\"\r\n            onClick={async () => {\r\n              this.setState({ isSending: true });\r\n              this.recordStop().then(async () => {\r\n                await this.props.sendMessage();\r\n                await this.setState({ isSending: false });\r\n              });\r\n            }}\r\n          />\r\n        )}\r\n        {this.state.isSending && <LoadGif></LoadGif>}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PanelRecord;\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M7.57912 27C9.60522 27 11.5188 26.1634 12.9821 24.6496L17.7096 19.63C18.0473 19.2715 18.0473 18.6341 17.7096 18.2755C17.3719 17.917 16.7716 17.917 16.4339 18.2755L11.7064 23.2553C10.6183 24.4105 9.15498 25.048 7.57912 25.048C6.00326 25.048 4.57749 24.4105 3.45188 23.2553C2.32626 22.1 1.76346 20.5463 1.76346 18.8731C1.76346 17.1999 2.36379 15.6861 3.45188 14.491L14.1452 3.13722C14.9331 2.30063 15.9462 1.86241 17.0718 1.86241C18.1599 1.86241 19.2104 2.30063 19.9984 3.13722C20.7863 3.97381 21.199 5.04943 21.199 6.24456C21.199 7.39985 20.7863 8.51531 19.9984 9.3519L9.26754 20.7455C8.32953 21.7414 6.75367 21.7414 5.81566 20.7455C5.36542 20.2674 5.10277 19.5902 5.10277 18.9129C5.10277 18.2357 5.36542 17.5585 5.81566 17.0804L10.5808 12.021C10.9184 11.6625 10.9184 11.0251 10.5808 10.6665C10.2431 10.308 9.64274 10.308 9.30506 10.6665L4.57749 15.7259C3.78956 16.5625 3.33931 17.7178 3.33931 18.9129C3.33931 20.1081 3.78956 21.2634 4.57749 22.1C6.22838 23.8528 8.92985 23.8528 10.5808 22.1L21.2741 10.7462C22.3997 9.55109 23 7.99742 23 6.2844C23 4.57138 22.3997 3.01771 21.2741 1.82257C18.9853 -0.607525 15.1958 -0.607525 12.907 1.82257L2.2137 13.1763C0.787928 14.6902 0 16.7219 0 18.9129C0 21.0642 0.787928 23.0959 2.2137 24.6496C3.63948 26.1634 5.55302 27 7.57912 27Z\",\n  fill: \"#909090\"\n});\n\nvar SvgAddDocuments = function SvgAddDocuments(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 23,\n    height: 27,\n    viewBox: \"0 0 23 27\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgAddDocuments, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/addDocuments.8c419dc5.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M14.371 13.8571C13.2139 15.1429 11.671 15.7857 9.99959 15.7857C8.32816 15.7857 6.7853 15.0143 5.62816 13.8571C5.37102 13.6 5.37102 13.2143 5.62816 12.9571C5.8853 12.7 6.27102 12.7 6.52816 12.9571C7.42816 13.9857 8.71387 14.5 9.99959 14.5C11.2853 14.5 12.571 13.9857 13.3424 12.9571C13.5996 12.7 13.9853 12.7 14.2424 12.9571C14.4996 13.2143 14.4996 13.6 14.371 13.8571Z\",\n  fill: \"#909090\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10 1C4.98571 1 1 4.98571 1 10C1 15.0143 4.98571 19 10 19C15.0143 19 19 15.0143 19 10C19 4.98571 15.0143 1 10 1ZM4.85714 7.42857C4.85714 6.65714 5.37143 6.14286 6.14286 6.14286C6.91429 6.14286 7.42857 6.65714 7.42857 7.42857C7.42857 8.2 6.91429 8.71429 6.14286 8.71429C5.37143 8.71429 4.85714 8.2 4.85714 7.42857ZM13.8571 8.71429C13.0857 8.71429 12.5714 8.2 12.5714 7.42857C12.5714 6.65714 13.0857 6.14286 13.8571 6.14286C14.6286 6.14286 15.1429 6.65714 15.1429 7.42857C15.1429 8.2 14.5 8.71429 13.8571 8.71429Z\",\n  stroke: \"#909090\",\n  strokeMiterlimit: 10\n});\n\nvar SvgSmiles = function SvgSmiles(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgSmiles, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/smiles.83609364.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M0.791667 7.93436C0.581704 7.93436 0.38034 8.02325 0.231874 8.18148C0.0834077 8.33971 0 8.55431 0 8.77808L0.000791987 13.1317C0.0609587 18.3122 3.90212 22.5687 8.71467 22.9923C8.71387 23.0041 8.70833 23.0142 8.70833 23.026V25.3125H5.10942C4.89945 25.3125 4.69809 25.4014 4.54962 25.5597C4.40116 25.7179 4.31775 25.9325 4.31775 26.1563C4.31775 26.38 4.40116 26.5946 4.54962 26.7529C4.69809 26.9111 4.89945 27 5.10942 27H13.8906C14.1005 27 14.3019 26.9111 14.4504 26.7529C14.5988 26.5946 14.6823 26.38 14.6823 26.1563C14.6823 25.9325 14.5988 25.7179 14.4504 25.5597C14.3019 25.4014 14.1005 25.3125 13.8906 25.3125H10.2917V23.026C10.2917 23.0142 10.2861 23.0041 10.2853 22.9923C15.0789 22.5696 18.9185 18.3316 18.9984 13.1747L19 8.77808C19 8.55431 18.9166 8.33971 18.7681 8.18148C18.6197 8.02325 18.4183 7.93436 18.2083 7.93436C17.9984 7.93436 17.797 8.02325 17.6485 8.18148C17.5001 8.33971 17.4167 8.55431 17.4167 8.77808L17.4151 13.1469C17.3454 17.6684 13.7948 21.347 9.5 21.347C5.18779 21.347 1.63637 17.6524 1.58412 13.1131L1.58333 8.77808C1.58333 8.55431 1.49993 8.33971 1.35146 8.18148C1.20299 8.02325 1.00163 7.93436 0.791667 7.93436Z\",\n  fill: \"#909090\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M14.9631 13.0617V5.77023C14.9631 2.58854 12.5121 0 9.50059 0C6.48909 0 4.03809 2.58854 4.03809 5.77023V13.0617C4.03809 16.2434 6.48909 18.8319 9.50059 18.8319C12.5121 18.8319 14.9631 16.2434 14.9631 13.0617ZM5.62142 13.0617V5.77023C5.62142 3.51917 7.3615 1.68745 9.50059 1.68745C11.6397 1.68745 13.3798 3.51917 13.3798 5.77023V13.0617C13.3798 15.3127 11.6397 17.1445 9.50059 17.1445C7.3615 17.1445 5.62142 15.3127 5.62142 13.0617Z\",\n  fill: \"#909090\"\n});\n\nvar SvgMicrophone = function SvgMicrophone(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 19,\n    height: 27,\n    viewBox: \"0 0 19 27\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgMicrophone, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/microphone.5823ce97.svg\";\nexport { ForwardRef as ReactComponent };","// App\r\nimport React from \"react\";\r\nimport { CSSTransitionGroup } from \"react-transition-group\";\r\nimport { Picker } from \"emoji-mart\";\r\nimport { ReactComponent as AddDocuments } from \"../../../img/addDocuments.svg\";\r\nimport { ReactComponent as Send } from \"../../../img/send.svg\";\r\nimport { ReactComponent as Smiles } from \"../../../img/smiles.svg\";\r\nimport { ReactComponent as Microphone } from \"../../../img/microphone.svg\";\r\nimport settings from \"../../../config/settings\";\r\nclass PanelStandart extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.showEmoji = this.showEmoji.bind(this);\r\n    this.hideEmoji = this.hideEmoji.bind(this);\r\n  }\r\n  state = {\r\n    text: \"\",\r\n    showEmoji: false,\r\n  };\r\n  setText(text) {\r\n    this.setState({ text });\r\n  }\r\n  showEmoji() {\r\n    this.setState({ showEmoji: true });\r\n    document.addEventListener(\"click\", this.hideEmoji);\r\n  }\r\n  hideEmoji(e) {\r\n    if (!e.target.closest(\".emoji-mart\")) {\r\n      this.setState({ showEmoji: false });\r\n      document.removeEventListener(\"click\", this.hideEmoji);\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <>\r\n        <AddDocuments\r\n          className=\"addMoreAttach\"\r\n          onClick={() => {\r\n            document.getElementById(\"uploadFile\").click();\r\n          }}\r\n        />\r\n\r\n        <input\r\n          type=\"file\"\r\n          multiple\r\n          hidden\r\n          onChange={(e) => {\r\n            this.props.loadFiles(e);\r\n          }}\r\n          id=\"uploadFile\"\r\n          style={{ display: \"none\" }}\r\n          accept=\"image/jpeg,image/gif,image/jpeg,image/png,application/pdf,text/plain,application/x-zip-compressed,application/zip,application/msword,audio/mpeg\"\r\n        />\r\n        <div className=\"input-chat\">\r\n          <textarea\r\n            className=\"input-message\"\r\n            id=\"input-message\"\r\n            onKeyDown={(e) => {\r\n              if (e.keyCode === 13 && !e.shiftKey) {\r\n                e.preventDefault();\r\n                let inputMessage = document.getElementById(\"input-message\");\r\n                inputMessage.style.maxHeight = \"48px\";\r\n                this.props.sendMessage(this.state.text);\r\n              }\r\n            }}\r\n            onInput={() => {\r\n              let inputMessage = document.getElementById(\"input-message\");\r\n              inputMessage.style.height = \"5px\";\r\n              inputMessage.style.height = inputMessage.scrollHeight + \"px\";\r\n              if (inputMessage.scrollHeight > 178) {\r\n                inputMessage.style.maxHeight = \"178px\";\r\n              } else {\r\n                inputMessage.style.maxHeight = inputMessage.scrollHeight + \"px\";\r\n              }\r\n            }}\r\n            onChange={(e) => {\r\n              this.props.typing(e.target.value, this.state.text);\r\n              this.setState({ text: e.target.value });\r\n            }}\r\n            value={this.state.text}\r\n          ></textarea>\r\n          {!this.state.text && <span className=\"placeholder\">Сообщение</span>}\r\n          <Smiles onClick={this.showEmoji} className=\"smiles\" />\r\n          <CSSTransitionGroup\r\n            transitionName=\"emoji-animation-item\"\r\n            transitionEnterTimeout={100}\r\n            transitionLeaveTimeout={100}\r\n            style={{\r\n              display: \"contents\",\r\n            }}\r\n          >\r\n            {this.state.showEmoji && (\r\n              <Picker\r\n                showPreview={false}\r\n                onClick={(emoji, event) => {\r\n                  this.setState({\r\n                    text: this.state.text + emoji.native,\r\n                  });\r\n                }}\r\n                native={true}\r\n                showSearch={false}\r\n                showSkinTones={false}\r\n                i18n={settings.localizateEmoji}\r\n              />\r\n            )}\r\n          </CSSTransitionGroup>\r\n        </div>\r\n        <div className=\"sendAndMicro\">\r\n          <CSSTransitionGroup\r\n            transitionName=\"erase-animation-item\"\r\n            transitionEnterTimeout={100}\r\n            transitionLeaveTimeout={100}\r\n            style={{\r\n              display: \"contents\",\r\n            }}\r\n          >\r\n            {!this.state.text && !this.props.isContent && (\r\n              <Microphone onClick={this.props.recordStart} />\r\n            )}\r\n            {(this.state.text || this.props.isContent) && (\r\n              <Send\r\n                onClick={() => {\r\n                  let inputMessage = document.getElementById(\"input-message\");\r\n                  inputMessage.style.maxHeight = \"48px\";\r\n                  this.props.sendMessage(this.state.text);\r\n                }}\r\n              />\r\n            )}\r\n          </CSSTransitionGroup>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PanelStandart;\r\n","import React from \"react\";\r\nimport PngProgress from \"../img/progress-bar.png\";\r\nclass Avatar extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className=\"progress-bar\">\r\n        <div\r\n          className=\"barLine\"\r\n          style={{\r\n            backgroundImage: `url(${PngProgress})`,\r\n            width: this.props.percent + \"%\",\r\n          }}\r\n        ></div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Avatar;\r\n","import React from \"react\";\r\nimport Message from \"./Message\";\r\nimport { Scrollbars } from \"react-custom-scrollbars\";\r\nimport { CSSTransitionGroup } from \"react-transition-group\";\r\nimport SocketController from \"../../controllers/SocketController\";\r\nimport PanelRecord from \"../../Partials/Chat/InputPanel/PanelRecord\";\r\nimport PanelStandart from \"../../Partials/Chat/InputPanel/PanelStandart\";\r\nimport RecentMessage from \"./RecentMessage\";\r\nimport ProgressBar from \"../../Elements/ProgressBar\";\r\nimport Fancybox from \"../../Elements/Fancybox.js\";\r\nimport { toast } from \"react-toastify\";\r\nimport api from \"../../config/api\";\r\n//Redux\r\nimport { connect } from \"react-redux\";\r\nimport * as dialogsActions from \"../../redux/actions/dialogs\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport ArrowDown from \"../../img/arrowDownperple.svg\";\r\nimport { ReactComponent as LoadGif } from \"../../img/Loading.svg\";\r\nimport { getAudioBufferData } from \"../../controllers/FunctionsController\";\r\nimport documentSvg from \"../../img/document.svg\";\r\nimport musicSvg from \"../../img/music.svg\";\r\nimport attachDelete from \"../../img/attachDelete.svg\";\r\n// Internet Explorer 6-11\r\nconst isIE = /*@cc_on!@*/ false || !!document.documentMode;\r\n\r\n// Edge 20+\r\nconst isEdge = !isIE && !!window.StyleMedia;\r\nlet waitActiveUser = false;\r\nlet waitFastRead = false;\r\nclass ScrollBottom extends React.Component {\r\n  render() {\r\n    return (\r\n      <div\r\n        id=\"scroll-to-bottom\"\r\n        className={`scroll-to-bottom`}\r\n        onClick={() => {\r\n          this.props.scrollToBottom();\r\n        }}\r\n      >\r\n        <img src={ArrowDown} alt=\"ArrowDown\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\nclass Dialog extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.inputPanel = React.createRef();\r\n    this.activePage = false;\r\n    this.canLoadAttach = true;\r\n  }\r\n  state = {\r\n    scrollTop: 0,\r\n    canTyping: true,\r\n    voiceSound: false,\r\n    isRecord: false,\r\n    setCordMessageScroll: false,\r\n    //Отвеченные сообщения\r\n    recentMessage: false,\r\n    sounds: [],\r\n    files: [],\r\n    images: [],\r\n    loadingFiles: [],\r\n    dataFancybox: {\r\n      images: false,\r\n      index: false,\r\n    },\r\n  };\r\n  onScroll() {\r\n    let scroll =\r\n      this.messagesBlock.getScrollHeight() - this.messagesBlock.getScrollTop();\r\n    this.setState({\r\n      scrollTop: scroll,\r\n    });\r\n    document.getElementById(\"load-message-gif\").style.top =\r\n      this.messagesBlock.getScrollTop() + \"px\";\r\n\r\n    if (\r\n      this.messagesBlock.getScrollTop() + this.messagesBlock.getClientHeight() <\r\n      this.messagesBlock.getScrollHeight() - 100\r\n    ) {\r\n      if (\r\n        !document\r\n          .getElementById(\"scroll-to-bottom\")\r\n          .classList.contains(\"active\")\r\n      ) {\r\n        document.getElementById(\"scroll-to-bottom\").classList.add(\"active\");\r\n      }\r\n    } else {\r\n      if (\r\n        document.getElementById(\"scroll-to-bottom\").classList.contains(\"active\")\r\n      ) {\r\n        document.getElementById(\"scroll-to-bottom\").classList.remove(\"active\");\r\n        if (!!this.props.unRead) {\r\n          this.readMessages();\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.props.dialog.canLoad && this.messagesBlock.getScrollTop() < 100) {\r\n      this.loadMessages();\r\n    }\r\n  }\r\n  scrollToBottom() {\r\n    if (this.messagesBlock) {\r\n      if (isEdge || isIE) this.messagesBlock.view.scrollTop = 100000;\r\n      else {\r\n        this.messagesBlock.view.scroll({\r\n          top: 100000,\r\n          left: 0,\r\n          behavior: \"smooth\",\r\n        });\r\n      }\r\n    }\r\n  }\r\n  loadToVictory(top) {\r\n    this.loadMessages(false).then(() => {\r\n      this.scrollTo(top);\r\n    });\r\n  }\r\n  scrollTo(top) {\r\n    let messageBlock = document.getElementById(\"message\" + top);\r\n    if (messageBlock) {\r\n      let topCord = messageBlock.offsetTop;\r\n      this.setState({ setCordMessageScroll: top });\r\n      setTimeout(() => {\r\n        this.setState({ setCordMessageScroll: false });\r\n      }, 5000);\r\n      if (this.messagesBlock) {\r\n        if (isEdge || isIE) this.messagesBlock.view.scrollTop = topCord;\r\n        else {\r\n          this.messagesBlock.view.scroll({\r\n            top: topCord,\r\n            left: 0,\r\n            behavior: \"smooth\",\r\n          });\r\n        }\r\n        document.getElementById(\"load-message-gif\").classList.remove(\"active\");\r\n      }\r\n    } else {\r\n      if (\r\n        !document\r\n          .getElementById(\"load-message-gif\")\r\n          .classList.contains(\"active\")\r\n      )\r\n        document.getElementById(\"load-message-gif\").classList.add(\"active\");\r\n      this.loadToVictory(top);\r\n    }\r\n  }\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    if (nextState.scrollTop !== this.state.scrollTop) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n  focusPage() {\r\n    let active;\r\n    if (\r\n      this.messagesBlock &&\r\n      this.messagesBlock.getScrollTop() + this.messagesBlock.getClientHeight() <\r\n        this.messagesBlock.getScrollHeight()\r\n    ) {\r\n      active = false;\r\n    } else {\r\n      active = true;\r\n    }\r\n    if (!this.activePage && active && !!this.props.unRead.length) {\r\n      if (waitActiveUser) clearTimeout(waitActiveUser);\r\n\r\n      this.readMessages();\r\n      this.activePage = true;\r\n\r\n      waitActiveUser = setTimeout(() => {\r\n        this.activePage = false;\r\n      }, 3000);\r\n    }\r\n  }\r\n  blurPage() {\r\n    this.activePage = false;\r\n  }\r\n  componentDidMount() {\r\n    window.addEventListener(\"blur\", this.blurPage.bind(this));\r\n    window.addEventListener(\"mousemove\", this.focusPage.bind(this));\r\n\r\n    if (this.messagesBlock) {\r\n      this.messagesBlock.view.scrollTop = 100000;\r\n    }\r\n    let drafts = { ...JSON.parse(localStorage.getItem(\"drafts\")) };\r\n\r\n    if (drafts[\"draft-\" + this.props.dialog._id])\r\n      this.inputPanel.current.setText(drafts[\"draft-\" + this.props.dialog._id]);\r\n  }\r\n  componentDidUpdate(prevProps) {\r\n    if (\r\n      prevProps.dialog.messages.length < this.props.dialog.messages.length &&\r\n      JSON.stringify(prevProps.dialog.messages[0]) ===\r\n        JSON.stringify(this.props.dialog.messages[0]) &&\r\n      (this.messagesBlock.getScrollHeight() -\r\n        this.messagesBlock.getScrollTop() <\r\n        this.messagesBlock.getClientHeight() + 200 ||\r\n        prevProps.dialog.messages[prevProps.dialog.messages.length - 1].user\r\n          ._id === this.props.user._id)\r\n    ) {\r\n      if (this.activePage) {\r\n        this.readMessages();\r\n      }\r\n\r\n      this.scrollToBottom();\r\n\r\n      if (\r\n        document.getElementById(\"scroll-to-bottom\").classList.contains(\"active\")\r\n      )\r\n        document.getElementById(\"scroll-to-bottom\").classList.remove(\"active\");\r\n    }\r\n\r\n    if (\r\n      JSON.stringify(prevProps.dialog.messages[0]) !==\r\n      JSON.stringify(this.props.dialog.messages[0])\r\n    ) {\r\n      if (!this.state.setCordMessageScroll)\r\n        this.messagesBlock.scrollTop(\r\n          this.messagesBlock.getScrollHeight() - this.state.scrollTop\r\n        );\r\n      else this.scrollToBottom();\r\n    }\r\n  }\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"blur\", this.blurPage.bind(this));\r\n    window.removeEventListener(\"mousemove\", this.focusPage.bind(this));\r\n  }\r\n  loadMessages(controlGif = true) {\r\n    if (controlGif) {\r\n      document.getElementById(\"load-message-gif\").classList.add(\"active\");\r\n    }\r\n    return new Promise((resolve, reject) => {\r\n      this.props.dialogsActions\r\n        .loadMessages(\r\n          { dialogId: this.props.dialog._id },\r\n          this.props.user.apiToken,\r\n          !!this.props.dialog.orderId\r\n        )\r\n        .then(() => {\r\n          if (controlGif)\r\n            document\r\n              .getElementById(\"load-message-gif\")\r\n              .classList.remove(\"active\");\r\n          resolve();\r\n        });\r\n    });\r\n  }\r\n  //Отправка ввода\r\n  typing(newText, prevText) {\r\n    if (newText > prevText) {\r\n      if (this.state.canTyping) {\r\n        this.setState({ canTyping: false });\r\n        SocketController.typingDialog(\r\n          this.props.dialog.user._id,\r\n          this.props.user._id,\r\n          !!this.props.dialog.orderId\r\n        );\r\n      }\r\n\r\n      setTimeout(() => {\r\n        this.setState({ canTyping: true });\r\n      }, 2500);\r\n    }\r\n    let drafts = { ...JSON.parse(localStorage.getItem(\"drafts\")) };\r\n    drafts[\"draft-\" + this.props.dialogId] = newText;\r\n    if (\r\n      !drafts[\"draft-\" + this.props.dialogId] ||\r\n      !/\\S/.test(drafts[\"draft-\" + this.props.dialogId])\r\n    )\r\n      delete drafts[\"draft-\" + this.props.dialogId];\r\n    localStorage.setItem(\"drafts\", JSON.stringify(drafts));\r\n  }\r\n  //Отправка сообщения\r\n  sendMessage(text) {\r\n    return new Promise((resolve, reject) => {\r\n      if (\r\n        /\\S/.test(text) ||\r\n        !!this.state.images.length ||\r\n        !!this.state.files.length ||\r\n        !!this.state.sounds.length ||\r\n        !!this.state.voiceSound\r\n      ) {\r\n        let drafts = { ...JSON.parse(localStorage.getItem(\"drafts\")) };\r\n        delete drafts[\"draft-\" + this.props.dialog._id];\r\n        localStorage.setItem(\"drafts\", JSON.stringify(drafts));\r\n        this.props.dialogsActions.sendMessage(\r\n          {\r\n            text: !this.state.isRecord ? text : \"\",\r\n            userId: this.props.dialog.user._id,\r\n            images: this.state.images,\r\n            files: this.state.files,\r\n            voiceSound: this.state.voiceSound,\r\n            sounds: this.state.sounds,\r\n            recentMessage: this.state.recentMessage,\r\n            dialogId: this.props.dialog._id,\r\n          },\r\n          this.props.user.apiToken,\r\n          !!this.props.dialog.orderId\r\n        );\r\n\r\n        this.setState({\r\n          images: [],\r\n          sounds: [],\r\n          files: [],\r\n          voiceSound: false,\r\n          isRecord: false,\r\n          recentMessage: false,\r\n        });\r\n        if (!this.state.isRecord) this.inputPanel.current.setText(\"\");\r\n      }\r\n      resolve();\r\n    });\r\n  }\r\n  //Повторная отправка ошибочного сообщения\r\n  retrySendMessage(message) {\r\n    message.userId = this.props.dialog.user._id;\r\n    message.dialogId = this.props.dialog._id;\r\n    this.props.dialogsActions.retrySendMessage(\r\n      message,\r\n      this.props.user.apiToken,\r\n      !!this.props.dialog.orderId\r\n    );\r\n  }\r\n  //Удаление локального сообщения\r\n  deleteLocalMessage(_id) {\r\n    this.props.dialogsActions.deleteLocalMessage(\r\n      _id,\r\n      this.props.dialog._id,\r\n      !!this.props.dialog.orderId\r\n    );\r\n  }\r\n  setRecentMessage(message) {\r\n    this.setState({ recentMessage: message });\r\n  }\r\n  readMessages() {\r\n    if (waitFastRead) clearTimeout(waitFastRead);\r\n    waitFastRead = setTimeout(() => {\r\n      this.props.dialogsActions.readMessages(\r\n        {\r\n          dialogId: this.props.dialog._id,\r\n          otherId: this.props.dialog.user._id,\r\n          userId: this.props.user._id,\r\n        },\r\n        this.props.user.apiToken,\r\n        !!this.props.dialog.orderId\r\n      );\r\n    }, 100);\r\n  }\r\n  async addVoiceSound(data, duration, recordLine) {\r\n    let voiceSound = false;\r\n\r\n    if (data) {\r\n      voiceSound = {\r\n        path: URL.createObjectURL(data),\r\n        file: data,\r\n        name: \"Аудиозапись\",\r\n        duration: duration,\r\n        recordLine: recordLine,\r\n        type: \"mp3\",\r\n        size: data.size,\r\n      };\r\n    }\r\n    this.setState({ voiceSound });\r\n    return Promise.resolve();\r\n  }\r\n  recursiveLoad() {\r\n    let file = false;\r\n    if (this.state.loadingFiles.length) file = this.state.loadingFiles[0].file;\r\n    if (file) {\r\n      this.canLoadAttach = false;\r\n      let xhr = new XMLHttpRequest();\r\n      xhr.responseType = \"json\";\r\n      xhr.upload.onprogress = (event) => {\r\n        this.setState({\r\n          loadingFiles: this.state.loadingFiles.map((item, index) => {\r\n            if (item.file.name == file.name) {\r\n              item.percentage = (event.loaded / event.total) * 100;\r\n              return item;\r\n            } else return item;\r\n          }),\r\n        });\r\n      };\r\n      xhr.onerror = xhr.onabort = (e) => {\r\n        this.setState({\r\n          loadingFiles: this.state.loadingFiles.filter(\r\n            (item) => {\r\n              return item.file.name !== file.name;\r\n            },\r\n            () => {\r\n              this.canLoadAttach = true;\r\n            }\r\n          ),\r\n        });\r\n      };\r\n      xhr.onload = (e) => {\r\n        this.setState(\r\n          {\r\n            loadingFiles: this.state.loadingFiles.filter((item) => {\r\n              return item.file.name !== file.name;\r\n            }),\r\n          },\r\n          async () => {\r\n            await this.addFile(e.target.response, file);\r\n            this.canLoadAttach = true;\r\n            this.recursiveLoad();\r\n          }\r\n        );\r\n      };\r\n\r\n      xhr.open(\"POST\", `${api.urlApi}/api/dialog/load-file`, true);\r\n      xhr.setRequestHeader(\r\n        \"Authorization\",\r\n        `Bearer ${this.props.user.apiToken}`\r\n      );\r\n      var formData = new FormData();\r\n      formData.append(\"file\", file);\r\n      xhr.send(formData);\r\n    }\r\n  }\r\n  loadFiles(e) {\r\n    let sounds = [...this.state.sounds];\r\n    let files = [...this.state.files];\r\n    let images = [...this.state.images];\r\n    let InputFile = e.target;\r\n    let counter = sounds.length + files.length + images.length;\r\n    let newFiles = [];\r\n    for (let i = 0; i < InputFile.files.length; i++) {\r\n      if (counter > 9) {\r\n        toast.error(\"Max upload 10 attachments!\", {\r\n          position: toast.POSITION.TOP_CENTER,\r\n        });\r\n        break;\r\n      }\r\n      newFiles.push({\r\n        file: InputFile.files[i],\r\n        percentage: 0,\r\n      });\r\n      counter++;\r\n      this.setState(\r\n        {\r\n          loadingFiles: [...this.state.loadingFiles, ...newFiles],\r\n        },\r\n        () => {\r\n          if (this.canLoadAttach) this.recursiveLoad();\r\n        }\r\n      );\r\n    }\r\n  }\r\n  async addFile(fileUrl, fileBlob) {\r\n    let sounds = [...this.state.sounds];\r\n    let files = [...this.state.files];\r\n    let images = [...this.state.images];\r\n    fileUrl.type = fileBlob.name.split(\".\").pop();\r\n    if (\r\n      fileUrl.type === \"png\" ||\r\n      fileUrl.type === \"jpg\" ||\r\n      fileUrl.type === \"jpeg\" ||\r\n      fileUrl.type === \"gif\"\r\n    ) {\r\n      fileUrl.id = images.length;\r\n      images.push(fileUrl);\r\n    }\r\n\r\n    if (\r\n      fileUrl.type === \"txt\" ||\r\n      fileUrl.type === \"pdf\" ||\r\n      fileUrl.type === \"docx\" ||\r\n      fileUrl.type === \"zip\" ||\r\n      fileUrl.type === \"doc\"\r\n    ) {\r\n      fileUrl.id = files.length;\r\n      files.push(fileUrl);\r\n    }\r\n\r\n    if (fileUrl.type === \"mp3\") {\r\n      fileUrl.id = sounds.length;\r\n      let audioData = await getAudioBufferData(\r\n        (window.URL || window.webkitURL).createObjectURL(\r\n          new Blob([fileBlob], { type: fileBlob.type })\r\n        )\r\n      );\r\n      let duration = audioData.duration;\r\n      let recordLine = audioData.recordLine;\r\n      sounds.push({ ...fileUrl, duration, recordLine });\r\n    }\r\n    this.setState({ sounds, files, images }, () => {\r\n      return Promise.resolve();\r\n    });\r\n  }\r\n  addImageToFancyBox(images, index) {\r\n    this.setState({\r\n      dataFancybox: {\r\n        images,\r\n        index,\r\n      },\r\n    });\r\n  }\r\n  render() {\r\n    return (\r\n      <>\r\n        <div className=\"message-container\">\r\n          <div className=\"dialog-wrap\">\r\n            <Scrollbars\r\n              onScroll={() => {\r\n                this.onScroll();\r\n              }}\r\n              ref={(ref) => {\r\n                this.messagesBlock = ref;\r\n              }}\r\n              renderTrackVertical={(props) => (\r\n                <div className=\"track-vertical\" />\r\n              )}\r\n              renderThumbVertical={(props) => (\r\n                <div className=\"thumb-vertical\" />\r\n              )}\r\n              className=\"dialog scroll\"\r\n              autoHide\r\n            >\r\n              <LoadGif id=\"load-message-gif\" className=\"load-message\"></LoadGif>\r\n\r\n              {!!this.props.dialog.messages.length &&\r\n                this.props.dialog.messages.map((message, index, messages) => {\r\n                  let prevMessage = messages[index - 1]\r\n                    ? messages[index - 1]\r\n                    : false;\r\n                  return (\r\n                    <Message\r\n                      key={message._id}\r\n                      index={index}\r\n                      scrollingMessage={this.state.setCordMessageScroll}\r\n                      user={this.props.user}\r\n                      scrollTo={(top) => {\r\n                        this.scrollTo(top);\r\n                      }}\r\n                      retrySendMessage={this.retrySendMessage.bind(this)}\r\n                      setRecentMessage={this.setRecentMessage.bind(this)}\r\n                      deleteLocalMessage={this.deleteLocalMessage.bind(this)}\r\n                      prevMessage={prevMessage}\r\n                      message={message}\r\n                      addImageToFancyBox={this.addImageToFancyBox.bind(this)}\r\n                    ></Message>\r\n                  );\r\n                })}\r\n              {!this.props.dialog.isFetching &&\r\n                !this.props.dialog.messages.length && (\r\n                  <div className=\"messages-block\">\r\n                    <div className=\"col pl-0 avatar-message\"></div>\r\n                    <div className=\"col row pl-0\">\r\n                      <div className=\"col-12\">Сообщений еще небыло</div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n              <div className=\"dialog-typers\">\r\n                <div\r\n                  className=\"messages-block\"\r\n                  style={{\r\n                    height: \"21px\",\r\n                  }}\r\n                >\r\n                  {this.props.dialog.typing && (\r\n                    <>\r\n                      <div className=\"avatar-message d-flex\"></div>\r\n                      <div className=\"col dialog-content\">\r\n                        <div className=\"message-content\">\r\n                          <div className=\"reading-status\">\r\n                            {this.props.dialog.user.name.last}&#8194;\r\n                            {this.props.dialog.user.name.first} печатает\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </Scrollbars>\r\n          </div>\r\n          <ScrollBottom\r\n            scrollToBottom={() => {\r\n              this.scrollToBottom();\r\n            }}\r\n          />\r\n          <div className=\"message-panel \">\r\n            {this.state.recentMessage && (\r\n              <RecentMessage message={this.state.recentMessage} />\r\n            )}\r\n            <div className=\"panel\">\r\n              {!this.state.isRecord && (\r\n                <PanelStandart\r\n                  ref={this.inputPanel}\r\n                  recordStart={() => {\r\n                    let getMedia = (\r\n                      navigator.getUserMedia ||\r\n                      navigator.webkitGetUserMedia ||\r\n                      navigator.mozGetUserMedia ||\r\n                      navigator.msGetUserMedia\r\n                    ).bind(navigator);\r\n                    getMedia(\r\n                      { audio: true, video: false },\r\n                      (stream) => {\r\n                        this.setState({ isRecord: true });\r\n                      },\r\n                      () => {\r\n                        toast.error(\"Микрофон не обнаружен\", {\r\n                          position: toast.POSITION.TOP_CENTER,\r\n                        });\r\n                      }\r\n                    );\r\n                  }}\r\n                  isContent={\r\n                    !!this.state.sounds.length ||\r\n                    !!this.state.images.length ||\r\n                    !!this.state.files.length\r\n                  }\r\n                  loadFiles={this.loadFiles.bind(this)}\r\n                  sendMessage={this.sendMessage.bind(this)}\r\n                  typing={this.typing.bind(this)}\r\n                />\r\n              )}\r\n              {this.state.isRecord && (\r\n                <>\r\n                  <PanelRecord\r\n                    addVoiceSound={this.addVoiceSound.bind(this)}\r\n                    stopRec={() => {\r\n                      this.setState({ isRecord: false });\r\n                    }}\r\n                    sendMessage={this.sendMessage.bind(this)}\r\n                  />\r\n                </>\r\n              )}\r\n            </div>\r\n            <div\r\n              className=\"filesAttach\"\r\n              style={{\r\n                height:\r\n                  !!this.state.images.length ||\r\n                  !!this.state.files.length ||\r\n                  !!this.state.sounds.length ||\r\n                  !!this.state.loadingFiles.length\r\n                    ? \"250px\"\r\n                    : \"\",\r\n              }}\r\n            >\r\n              <Scrollbars\r\n                renderTrackVertical={(props) => (\r\n                  <div className=\"track-vertical\" />\r\n                )}\r\n                renderThumbVertical={(props) => (\r\n                  <div className=\"thumb-vertical\" />\r\n                )}\r\n                renderTrackHorizontal={(props) => (\r\n                  <div\r\n                    {...props}\r\n                    className=\"track-horizontal\"\r\n                    style={{ display: \"none\" }}\r\n                  />\r\n                )}\r\n                renderThumbHorizontal={(props) => (\r\n                  <div\r\n                    {...props}\r\n                    className=\"thumb-horizontal\"\r\n                    style={{ display: \"none\" }}\r\n                  />\r\n                )}\r\n                autoHide\r\n              >\r\n                <div className=\"loading-area\">\r\n                  {this.state.loadingFiles.map((item, index) => {\r\n                    return (\r\n                      <>\r\n                        <div key={index} className=\"attach-item\">\r\n                          <ProgressBar percent={item.percentage} />\r\n                          <span className=\"file-name\">{item.file.name}</span>\r\n                        </div>\r\n                      </>\r\n                    );\r\n                  })}\r\n                </div>\r\n                <div className=\"images-area attath-area\">\r\n                  {this.state.images.map((item, index) => {\r\n                    return (\r\n                      <>\r\n                        <div key={index} className=\"attach-item\">\r\n                          <img\r\n                            src={item.path}\r\n                            className=\"image-message\"\r\n                            alt=\"\"\r\n                          />\r\n                          <img\r\n                            className=\"attachDelete\"\r\n                            onClick={() => {\r\n                              this.setState({\r\n                                images: this.state.images.filter(\r\n                                  (item, indexR) => {\r\n                                    return indexR != index;\r\n                                  }\r\n                                ),\r\n                              });\r\n                            }}\r\n                            src={attachDelete}\r\n                            alt=\"attachDelete\"\r\n                          />\r\n                        </div>\r\n                      </>\r\n                    );\r\n                  })}\r\n                </div>\r\n                <div className=\"sounds-area attath-area\">\r\n                  {this.state.sounds.map((item, index) => {\r\n                    return (\r\n                      <>\r\n                        <div key={index} className=\"attach-item\">\r\n                          <img\r\n                            className=\"typeImg\"\r\n                            src={musicSvg}\r\n                            alt=\"musicSvg\"\r\n                          />\r\n                          <span className=\"file-name\">{item.name}</span>\r\n                          <img\r\n                            className=\"attachDelete\"\r\n                            onClick={() => {\r\n                              this.setState({\r\n                                sounds: this.state.sounds.filter(\r\n                                  (item, indexR) => {\r\n                                    return indexR != index;\r\n                                  }\r\n                                ),\r\n                              });\r\n                            }}\r\n                            src={attachDelete}\r\n                            alt=\"attachDelete\"\r\n                          />\r\n                        </div>\r\n                      </>\r\n                    );\r\n                  })}\r\n                </div>\r\n                <div className=\"files-area attath-area\">\r\n                  {this.state.files.map((item, index) => {\r\n                    return (\r\n                      <>\r\n                        <div key={index} className=\"attach-item\">\r\n                          <img className=\"typeImg\" src={documentSvg} alt=\"\" />\r\n                          <div>\r\n                            <div className=\"file-name\">{item.name}</div>\r\n                            <div className=\"file-size\">\r\n                              {item.size > 1048576\r\n                                ? Math.floor(item.size / 1048576) + \"Мб.\"\r\n                                : Math.floor(item.size / 1024) + \"Кб.\"}\r\n                            </div>\r\n                          </div>\r\n                          <img\r\n                            className=\"attachDelete\"\r\n                            src={attachDelete}\r\n                            onClick={() => {\r\n                              this.setState({\r\n                                files: this.state.files.filter(\r\n                                  (item, indexR) => {\r\n                                    return indexR != index;\r\n                                  }\r\n                                ),\r\n                              });\r\n                            }}\r\n                            alt=\"attachDelete\"\r\n                          />\r\n                        </div>\r\n                      </>\r\n                    );\r\n                  })}\r\n                </div>\r\n              </Scrollbars>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <CSSTransitionGroup\r\n          transitionName=\"fancybox-animation\"\r\n          transitionEnterTimeout={300}\r\n          transitionLeaveTimeout={300}\r\n        >\r\n          {this.state.dataFancybox.images && (\r\n            <Fancybox\r\n              close={() => {\r\n                this.setState({\r\n                  dataFancybox: { images: false, index: false },\r\n                });\r\n              }}\r\n              images={this.state.dataFancybox.images}\r\n              index={this.state.dataFancybox.index}\r\n            />\r\n          )}\r\n        </CSSTransitionGroup>\r\n      </>\r\n    );\r\n  }\r\n}\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    user: state.user,\r\n    dialogs: state.dialogs,\r\n  };\r\n};\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    dialogsActions: bindActionCreators(dialogsActions, dispatch),\r\n  };\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Dialog);\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAIAAAD9b0jDAAABN2lDQ1BBZG9iZSBSR0IgKDE5OTgpAAAokZWPv0rDUBSHvxtFxaFWCOLgcCdRUGzVwYxJW4ogWKtDkq1JQ5ViEm6uf/oQjm4dXNx9AidHwUHxCXwDxamDQ4QMBYvf9J3fORzOAaNi152GUYbzWKt205Gu58vZF2aYAoBOmKV2q3UAECdxxBjf7wiA10277jTG+38yH6ZKAyNguxtlIYgK0L/SqQYxBMygn2oQD4CpTto1EE9AqZf7G1AKcv8ASsr1fBBfgNlzPR+MOcAMcl8BTB1da4Bakg7UWe9Uy6plWdLuJkEkjweZjs4zuR+HiUoT1dFRF8jvA2AxH2w3HblWtay99X/+PRHX82Vun0cIQCw9F1lBeKEuf1UYO5PrYsdwGQ7vYXpUZLs3cLcBC7dFtlqF8hY8Dn8AwMZP/fNTP8gAAAAJcEhZcwAACxMAAAsTAQCanBgAAAXRaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzE0NSA3OS4xNjM0OTksIDIwMTgvMDgvMTMtMTY6NDA6MjIgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjAtMDctMTVUMTM6NDY6NDcrMDU6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjAtMDctMTVUMTM6NDY6NDcrMDU6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIwLTA3LTE1VDEzOjQ2OjQ3KzA1OjAwIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmIyODg4NmRkLWIzYTYtZTE0MS1hZDliLTA4MzExMWI5MTlmOCIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjZjMzkxZTczLTljZmItZTc0NC05YTU4LTZkYTk4ZWYxOWM3ZiIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjZjNDk5YTgzLTUwYWEtYjg0NC05NThhLWM4NDk4MThjNTA2MCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjZjNDk5YTgzLTUwYWEtYjg0NC05NThhLWM4NDk4MThjNTA2MCIgc3RFdnQ6d2hlbj0iMjAyMC0wNy0xNVQxMzo0Njo0NyswNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpiMjg4ODZkZC1iM2E2LWUxNDEtYWQ5Yi0wODMxMTFiOTE5ZjgiIHN0RXZ0OndoZW49IjIwMjAtMDctMTVUMTM6NDY6NDcrMDU6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6O3D40AAABPklEQVRIiZXWS1qDMBQF4BPyKC20dQWu0VW6E4cOLGBrckkc6KClSQ4wgnDzw/kuAdT72wy2TR/p55PU9K/KvfzvN1RMETKSmsbB9HeHFJURsyc1tkNjtqB+SEgMPav7Q4ImQbgQsXGw3eNIfUKYEANB3QlKb0H9F0uuYI9qMVZDo0AmYuodTLccrKEyIgpBbQ/1ZNTQVX0/LbPX0BggAxF1C3PIjBfRsCK7O2WyV1HWd9XksxfR6BFo31uYff5UHvUDEnt52R7I32gWTZCBdb3Q9yI6r8huDsXseTSMPLs7q1L2Akr7rmGPtYIlOt/4ejd76HYL6i9IdGk+vZaqaIKMa555ctUHVG6QbzLBdNC7LWgYkCKZ4MqPZw5NK/puSN+XqFwhV1JtOzRuC8o/R9WlmUfpb4gysD2p+dt+AVLLbXKbIUIXAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/music.21255322.svg\";"],"sourceRoot":""}